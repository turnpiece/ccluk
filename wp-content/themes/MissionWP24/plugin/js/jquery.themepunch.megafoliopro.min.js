/**************************************************************************
 * jQuery Plugin for Megafolio
 * @version: 1.0
 * @requires jQuery v1.8 or later
 * @author Krisztian Horvath
**************************************************************************/


(function(e,t){function n(t,n){t.find(">.entry").each(function(){var t=e(this);t.removeClass("tp-layout-first-item").removeClass("tp-layout-last-item").removeClass("very-last-item");t.addClass("tp-notordered");t.wrapInner('<div class="entry-innerwrap"></div>');var r=t.find(".entry-innerwrap");if(n.ie){r.append('<img class="ieimg" src='+t.data("src")+">")}else{r.css({background:"url("+t.data("src")+")",backgroundPosition:"50% 49%",backgroundSize:"cover","background-repeat":"no-repeat"})}})}function r(t){t.find(">.entry.tp-layout").each(function(){var t=e(this);t.removeClass("tp-layout").addClass("tp-notordered")})}function i(n,r){var i=n.data("ie");var s=n.data("ie9");var o=n.data("opt");if(o.filterChangeSpeed==t)o.filterChangeSpeed=Math.round(Math.random()*500+100);var u=1;var a=1;n.find(">.entry").each(function(n){var f=e(this);var l=o.filterChangeRotate;if(l==t)l=30;if(l==99)l=Math.round(Math.random()*50-25);f.removeClass("tp-layout-first-item").removeClass("tp-layout-last-item").removeClass("very-last-item");if(f.hasClass(r)||r=="*"){setTimeout(function(){f.css({visibility:"visible"});if(i||s){f.animate({scale:"1",opacity:1},{queue:false,duration:o.filterChangeSpeed})}else{if(o.filterChangeAnimation=="pagetop"||o.filterChangeAnimation=="pagebottom"||o.filterChangeAnimation=="pagemiddle"){f.find(".entry-innerwrap").transition({scale:1,opacity:1,perspective:"10000px",rotateX:"0deg"},o.filterChangeSpeed);f.transition({opacity:1},o.filterChangeSpeed)}else{f.transition({scale:1,opacity:1,rotate:0},o.filterChangeSpeed)}}},u*o.delay*5);u++;f.removeClass("tp-layout").addClass("tp-notordered")}else{f.removeClass("tp-ordered").removeClass("tp-layout");setTimeout(function(){if(i||s){f.animate({scale:0,opacity:0},{queue:false,duration:o.filterChangeSpeed})}else{if(o.filterChangeAnimation=="fade")f.transition({scale:1,opacity:0,rotate:0},o.filterChangeSpeed);else if(o.filterChangeAnimation=="scale")f.transition({scale:o.filterChangeScale,opacity:0,rotate:0},o.filterChangeSpeed);else if(o.filterChangeAnimation=="rotate")f.transition({scale:1,opacity:0,rotate:l},o.filterChangeSpeed);else if(o.filterChangeAnimation=="rotatescale")f.transition({scale:0,opacity:0,rotate:l},o.filterChangeSpeed);else if(o.filterChangeAnimation=="pagetop"||o.filterChangeAnimation=="pagebottom"||o.filterChangeAnimation=="pagemiddle"){f.find(".entry-innerwrap").addClass(o.filterChangeAnimation);f.transition({opacity:0},o.filterChangeSpeed);f.find(".entry-innerwrap").transition({scale:1,opacity:0,perspective:"10000px",rotateX:"90deg"},o.filterChangeSpeed)}}setTimeout(function(){f.css({visibility:"hidden"})},o.filterChangeSpeed)},a*o.delay/2);a++}})}function s(n){var r=n.data("ie");var i=n.data("ie9");var s=n.data("opt");if(s.filterChangeSpeed==t)s.filterChangeSpeed=Math.round(Math.random()*500+100);if(s.filterChangeScale==t)s.filterChangeScale=.8;var o=0;var u=0;n.find(">.entry").each(function(n){var o=e(this);var u=s.filterChangeRotate;if(u==t)u=30;if(u==99)u=Math.round(Math.random()*360);if(r||i){o.css({opacity:0})}else{if(s.filterChangeAnimation=="fade")o.css({scale:1,opacity:0,rotate:0});else if(s.filterChangeAnimation=="scale")o.css({scale:s.filterChangeScale,opacity:0,rotate:0});else if(s.filterChangeAnimation=="rotate")o.css({scale:1,opacity:0,rotate:u});else if(s.filterChangeAnimation=="rotatescale")o.css({scale:0,opacity:0,rotate:u});else if(s.filterChangeAnimation=="pagetop"||s.filterChangeAnimation=="pagebottom"||s.filterChangeAnimation=="pagemiddle"){o.find(".entry-innerwrap").addClass(s.filterChangeAnimation);o.transition({opacity:0},0);o.find(".entry-innerwrap").transition({scale:1,opacity:1,perspective:"10000px",rotateX:"90deg"},.1)}}});s.filterChangeAnimation=s.savetrans}function o(t,n){if(n==0){var r=new Array}else var r=t.data("lastorder");var i=t.data("order");if(n>i.length-1)n=0;var s=t.find(">.entry.tp-notordered");var a=12;if(s.length<9)a=s.length;var f=i[n];if(i[n]==0||f<2||f>17)f=Math.round(Math.random()*a+1);if(f<2)f=2;if(f>17)f=17;r.push(f);var l=f;if(f==10||f==14)l=3;if(f==11||f==15)l=4;if(f==12||f==16)l=5;if(f==13||f==17)l=6;s.slice(0,l).each(function(t){var n=e(this);n.removeClass("tp-layout-first-item").removeClass("tp-layout-last-item").removeClass("very-last-item");n.addClass("tp-ordered tp-layout "+t);n.data("layout",f);n.data("child",t);if(t==0)n.addClass("tp-layout-first-item");if(t==l-1){n.addClass("tp-layout-last-item")}n.removeClass("tp-notordered")});n=n+1;t.data("lastorder",r);if(t.find(">.entry.tp-notordered").length>0)o(t,n);else{u(t).addClass("very-last-item");return t}}function u(t){var n;t.find(">.entry.tp-layout.tp-ordered").each(function(){n=e(this)});return n}function a(e){return e}function f(t){var n=0;var r=t.data("defaultwidth");var i=t.data("opt");var s=i.delay;if(i.firststart==1){s=0;i.firststart=0}var o=t.width();var u=o/r;var f=185;var l=t.data("paddingh");var c=t.data("paddingv");var h=t.data("ie");var p=t.data("ie9");var d=5*u;var v=0;var m=a(d*160);var g=a(d*158);var y=a(d*152);var b=a(d*148);var w=a(d*132);var E=a(d*123);var S=a(d*122);var x=a(d*119);var T=a(d*113);var N=a(d*112);var C=a(d*98);var k=a(d*84);var L=a(d*83);var A=a(d*79);var O=a(d*78);var M=a(d*77);var _=a(d*74);var D=a(d*73);var P=a(d*69);var H=a(d*68);var B=a(d*67);var j=a(d*65.3);var F=a(d*49);var I=a(d*48);var q=a(d*45);var R=a(d*44);var U=a(d*39.2);var z=a(d*39);var W=a(d*38);var X=a(d*37);var V=a(d*36);var J=a(d*32.66);var K=a(d*222);var Q=b;var G=a(d*111);var Y=_;var Z=D;var et=F;var tt=I;var nt=X;var rt=V;var it=new Array(0,0,0,0,0,0,0,0,0);var st=new Array(0,0,0,0,0,0,0,0,0);var ot=0;var ut=0;t.find(">.entry.tp-layout").each(function(t){var r=e(this);var i=r.find(".entry-innerwrap");ut=r.data("layout");var s=500;var u,a,f;var d=l;var m=c;var w=n;var B=nt;if(o>480){if(ut==2){if(o>767){if(r.data("child")==0){u=T;a=Y;f=0;B=Y}if(r.data("child")==1){u=L;a=Y;f=T;d=0;n=n+Y;B=Y}}else{if(o>480&&o<768){if(r.data("child")==0){u=k;a=Y;f=0;B=Y}if(r.data("child")==1){u=N;a=Y;f=k;d=0;n=n+Y;B=Y}}}}if(ut==3){if(o>767){if(r.data("child")==0){u=O;a=Y;f=0;B=Y}if(r.data("child")==1){u=q;a=Y;f=O;B=Y}if(r.data("child")==2){u=D;a=Y;f=E;n=n+Y;B=Y;d=0}}else{if(o>480&&o<768){if(r.data("child")==0){u=_;a=Y;f=0;B=Y}if(r.data("child")==1){u=O;a=Y;f=_;B=Y}if(r.data("child")==2){u=R;a=Y;f=y;B=Y;n=n+Y;d=0}}}}if(ut==4){if(o>767){if(r.data("child")==0){u=k;a=Y;f=0;B=370}if(r.data("child")==1){u=z;a=nt;f=k}if(r.data("child")==2){u=D;a=Y;f=E;d=0;n=n+nt;B=Y}if(r.data("child")==3){u=z;a=nt;f=k;n=n+nt}}else{if(o>480&&o<768){if(r.data("child")==0){u=z;a=nt;f=k}if(r.data("child")==1){u=k;a=Y;f=0;n=n+nt}if(r.data("child")==2){u=z;a=nt;f=k;n=n-nt}if(r.data("child")==3){u=D;a=Y;f=E;d=0;n=n+Y;B=Y}}}}if(ut==5){if(o>767){if(r.data("child")==0){u=k;a=nt;f=0}if(r.data("child")==1){u=z;a=nt;f=k}if(r.data("child")==2){u=D;a=Y;f=E;d=0;n=n+nt;B=Y}if(r.data("child")==3){u=R;a=nt;f=0}if(r.data("child")==4){u=A;a=nt;f=R;n=n+nt}}else{if(o>480&&o<768){if(r.data("child")==0){u=k;a=nt;f=0}if(r.data("child")==1){u=z;a=nt;f=k}if(r.data("child")==2){u=D;a=nt;f=E;d=0;n=n+nt}if(r.data("child")==3){u=C;a=nt;f=0}if(r.data("child")==4){u=C;a=nt;f=C;d=0;n=n+nt}}}}if(ut==6){if(o>767){if(r.data("child")==0){u=_;a=Y;f=0;B=Y}if(r.data("child")==1){u=q;a=nt;f=_}if(r.data("child")==2){u=M;a=nt;f=x;d=0;n=n+nt}if(r.data("child")==3){u=q;a=nt;f=_}if(r.data("child")==4){u=z;a=nt;f=x}if(r.data("child")==5){u=W;a=nt;f=g;d=0;n=n+nt}}else{if(o>480&&o<768){if(r.data("child")==0){u=q;a=Y;f=0;B=Y}if(r.data("child")==1){u=H;a=Y;f=q;B=Y}if(r.data("child")==2){u=z;a=nt;f=T}if(r.data("child")==3){u=R;a=nt;f=y;d=0;n=n+nt}if(r.data("child")==4){u=z;a=nt;f=T}if(r.data("child")==5){u=R;a=nt;f=y;d=0;n=n+nt}}}}if(ut==7){if(o>767){if(r.data("child")==0){u=T;a=Y;f=0;B=Y}if(r.data("child")==1){u=L;a=nt;f=T;d=0;n=n+nt}if(r.data("child")==2){u=z;a=nt;f=T}if(r.data("child")==3){u=R;a=Y;f=y;d=0;n=n+nt;B=Y}if(r.data("child")==4){u=q;a=nt;f=0}if(r.data("child")==5){u=H;a=nt;f=q}if(r.data("child")==6){u=z;a=nt;f=T;n=n+nt}}else{if(o>480&&o<768){if(r.data("child")==0){u=T;a=Y;f=0;B=Y}if(r.data("child")==1){u=L;a=nt;f=T;d=0;n=n+nt}if(r.data("child")==2){u=z;a=nt;f=T}if(r.data("child")==3){u=R;a=nt;f=y;d=0;n=n+nt}if(r.data("child")==4){u=q;a=nt;f=0}if(r.data("child")==5){u=H;a=nt;f=q}if(r.data("child")==6){u=L;a=nt;f=T;d=0;n=n+nt}}}}if(ut==8){if(o>767){if(r.data("child")==0){u=L;a=nt;f=0}if(r.data("child")==1){u=P;a=Y;f=L;B=Y}if(r.data("child")==2){u=R;a=nt;f=y;d=0;n=n+nt}if(r.data("child")==3){u=z;a=nt;f=0}if(r.data("child")==4){u=R;a=nt;f=z}if(r.data("child")==5){u=R;a=Y;f=y;d=0;n=n+nt;B=nt}if(r.data("child")==6){u=L;a=nt;f=0}if(r.data("child")==7){u=P;a=nt;f=L;n=n+nt}}else{if(o>480&&o<768){if(r.data("child")==0){u=L;a=nt;f=0}if(r.data("child")==1){u=z;a=nt;f=L}if(r.data("child")==2){u=_;a=nt;f=S;d=0;n=n+nt;B=Y}if(r.data("child")==3){u=z;a=nt;f=0}if(r.data("child")==4){u=L;a=nt;f=z}if(r.data("child")==5){u=_;a=Y;f=S;d=0;n=n+nt;B=Y}if(r.data("child")==6){u=L;a=nt;f=0}if(r.data("child")==7){u=z;a=nt;f=L;n=n+nt}}}}if(ut==9){if(o>767){if(r.data("child")==0){u=T;a=Y;f=0;B=Y}if(r.data("child")==1){u=L;a=nt;f=T;d=0;n=n+nt}if(r.data("child")==2){u=z;a=nt;f=T}if(r.data("child")==3){u=R;a=Y;f=y;d=0;n=n+nt;B=Y}if(r.data("child")==4){u=q;a=Y;f=0;B=Y}if(r.data("child")==5){u=H;a=Y;f=q;B=Y}if(r.data("child")==6){u=z;a=nt;f=T;n=n+nt}if(r.data("child")==7){u=z;a=nt;f=T}if(r.data("child")==8){u=R;a=nt;f=y;d=0;n=n+nt}}else{if(o>480&&o<768){if(r.data("child")==0){u=_;a=Y;f=0;B=Y}if(r.data("child")==1){u=I;a=Y;f=_;B=Y}if(r.data("child")==2){u=_;a=Y;f=S;d=0;n=n+Y;B=Y}if(r.data("child")==3){u=I;a=Y;f=0;B=Y}if(r.data("child")==4){u=_;a=Y;f=I;B=Y}if(r.data("child")==5){u=_;a=Y;f=S;d=0;n=n+Y;B=Y}if(r.data("child")==6){u=_;a=Y;f=0;B=Y}if(r.data("child")==7){u=_;a=Y;f=_;B=Y}if(r.data("child")==8){u=I;a=Y;f=b;d=0;n=n+Y;B=Y}}}}if(ut>9&&ut<14){if(ut==10)u=Math.round(j);else if(ut==11)u=Math.round(F);else if(ut==12)u=Math.round(U);else if(ut==13)u=Math.round(J);var a=u;var X=r.data("child");f=u*X;B=a;if(X==2&&ut==10||X==3&&ut==11||X==4&&ut==12||X==5&&ut==13||r.hasClass("tp-layout-last-item")){d=0;n=n+a}}if(ut>13&&ut<18){if(ut==14)u=Math.round(j);else if(ut==15)u=Math.round(F);else if(ut==16)u=Math.round(U);else if(ut==17)u=Math.round(J);var X=r.data("child");var V=u/r.data("width");a=r.data("height")*V;f=u*r.data("child");w=it[X];B=a*V;st[X]=B;n=w+a;if(X==2&&ut==14||X==3&&ut==15||X==4&&ut==16||X==5&&ut==17)d=0;it[X]=n}}else{a=Math.round(r.data("height")*(o/r.data("width")));u=o;d=0;f=0;w=n;n=n+a}if(h||p){r.animate({width:u+"px",height:a+"px",left:f+"px",top:w+"px",paddingBottom:m+"px",paddingRight:d+"px"},{queue:false,duration:400});i.animate({"background-position":"50% 49%","background-size":"cover"},{queue:false,duration:400});if(h){var K=i.find(".ieimg");var Q=Math.round(r.data("width"))/Math.round(r.data("height"));var G=Math.round(u)/Math.round(a);var Z=u;var et=Z/r.data("width")*r.data("height");if(et<a){et=a;Z=et/r.data("height")*r.data("width")}K.css({width:Z+"px",height:et+"px"})}}else{setTimeout(function(){r.css({"z-index":1,width:u,height:a,top:w+"px",left:f+"px",paddingBottom:m+"px",paddingRight:d+"px"});i.css({"background-position":"50% 49%","background-size":"cover"})},0)}if(r.hasClass("very-last-item")&&!r.hasClass("tp-layout-last-item")){n=n+B}else{}if(v<w+a)v=w+a});if(ut>13&&ut<18){n=it[0];for(allh=0;allh<it.length;allh++){if(n<it[allh])n=it[allh]}}t.css({height:v+"px"})}e.fn.extend({megafoliopro:function(r){var u={defaultWidth:960,paddingHorizontal:0,paddingVertical:0,layoutarray:[0],lazyLoadStartEntry:0,filterChangeAnimation:"fade",filterChangeSpeed:500};r=e.extend({},e.fn.megafoliopro.defaults,r);return this.each(function(){if(!e.support.transition)e.fn.transition=e.fn.animate;var u=r;u.firststart=1;if(u.delay==t)u.delay=0;u.savetrans=u.filterChangeAnimation;u.filterChangeAnimation="fade";var a=e.browser.mozilla&&(parseInt(e.browser.version,0)==13||parseInt(e.browser.version,0)==14||parseInt(e.browser.version,0)==15||parseInt(e.browser.version,0)==16);var l=e.browser.msie&&parseInt(e.browser.version,0)<9;var c=e.browser.msie&&parseInt(e.browser.version,0)==9;u.ie=l;u.ie9=c;var h=e(this);h.data("defaultwidth",u.defaultWidth);h.data("paddingh",u.paddingHorizontal);h.data("paddingv",u.paddingVertical);h.data("order",u.layoutarray);h.data("ie",l);h.data("ie9",c);h.data("ff",a);h.data("opt",u);n(h,u);o(h,0);f(h);s(h);i(h,"*");o(h,0);f(h);e(window).resize(function(){f(h)})})},megamethode:function(t){return this.each(function(){var t=e(this)})},megagetcurrentorder:function(){var t=e(this);return t.data("lastorder")},megaremix:function(n){return this.each(function(){var i=e(this);if(n!=t)i.data("order",n);r(i);o(i,0);f(i)})},megafilter:function(t){return this.each(function(){var n=e(this);i(n,t);o(n,0);f(n)})}})})(jQuery)