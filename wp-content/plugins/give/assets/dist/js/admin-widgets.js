(()=>{"use strict";function e(e){e.on("chosen:ready",(function(){jQuery(this).next(".chosen-container").find("input.chosen-search-input").after('<span class="spinner"></span>')})),e.chosen({inherit_select_classes:!0,placeholder_text_single:Give.fn.getGlobalVar("one_option"),placeholder_text_multiple:Give.fn.getGlobalVar("one_or_more_option")}),e.on("chosen:no_results",(function(){var e=jQuery(this).next(".chosen-container"),t=e.find("li.no-results"),n="",s=Give.fn.getGlobalVar("chosen");n=e.hasClass("give-select-chosen-ajax")&&t.length?s.ajax_search_msg.replace("{search_term}",'"'+jQuery("input",e).val()+'"'):s.no_results_msg.replace("{search_term}",'"'+jQuery("input",e).val()+'"'),t.html(n);jQuery(document.body).on("keyup",".give-select.chosen-container .chosen-search input, .give-select.chosen-container .search-field input",(function(e){var t=jQuery(this).val(),n=jQuery(this).closest(".give-select-chosen"),s=n.prev(),a=n.find('input[type="text"]'),i=(n.hasClass("variations"),e.which),o="give_form_search",r=this;if(n.prev().data("search-type")){if("no_ajax"===s.data("search-type"))return;o="give_"+s.data("search-type")+"_search"}t.length>0&&t.length<=3||!o.length||9===i||13===i||16===i||17===i||18===i||19===i||20===i||27===i||33===i||34===i||35===i||36===i||37===i||38===i||39===i||40===i||44===i||45===i||144===i||145===i||91===i||93===i||224===i||112<=i&&123>=i||(clearTimeout(Give.cache.chosenSearchTypingTimer),n.addClass("give-select-chosen-ajax"),Give.cache.chosenSearchTypingTimer=setTimeout((function(){jQuery.ajax({type:"POST",url:ajaxurl,data:{action:o,s:t,fields:jQuery(r).closest("form").serialize()},dataType:"json",beforeSend:function(){s.closest("ul.chosen-results").empty(),a.prop("disabled",!0)},success:function(e){n.removeClass("give-select-chosen-ajax"),jQuery("option:not(:selected)",s).remove(),e.length?(jQuery.each(e,(function(e,n){jQuery('option[value="'+n.id+'"]',s).length||(0===t.length?s.append('<option value="'.concat(n.id,'">').concat(n.name,"</option>")):s.prepend('<option value="'.concat(n.id,'">').concat(n.name,"</option>")))})),n.prev("select.give-select-chosen").trigger("chosen:updated")):n.prev("select.give-select-chosen").trigger("chosen:no_results"),a.prop("disabled",!1),a.val(t).focus()}}).fail((function(e){window.console&&window.console.log&&console.log(e)})).done((function(e){a.prop("disabled",!1)}))}),342))})),jQuery(".give-select-chosen .chosen-search input").each((function(){var e=jQuery(this).parent().parent().parent().prev("select.give-select-chosen").data("search-type"),t="";"form"===e?t=Give.fn.getGlobalVar("search_placeholder"):(e="search_placeholder_"+e,Give.fn.getGlobalVar(e)&&(t=Give.fn.getGlobalVar(e))),jQuery(this).attr("placeholder",t)}))}))}!function(t){function n(e){e.on("change",".give_forms_display_style_setting_row input",(function(){a(t(this))})),e.on("change","select.give-select",(function(){i(jQuery(this))}))}function s(t){Promise.all([e(t)]).then((function(){t.each((function(){var e=jQuery(this).next();e.css("width","100%"),jQuery("ul.chosen-results",e).css("width","100%"),jQuery(this).parent().removeClass("give-hidden"),parseInt(jQuery(this).val())?i(jQuery(this)):jQuery(".js-loader",jQuery(this).closest(".widget-content")).addClass("give-hidden")}))}))}function a(e){e.each((function(){var e=jQuery(this).closest(".give_forms_widget_container"),t=jQuery(".js-form-template-settings.active",e),n=jQuery("p.give_forms_display_style_setting_row",t),s=t.hasClass("js-new-form-template-settings");if(t.hasClass("js-legacy-form-template-settings")){var a=n.next();"onpage"===jQuery("input:checked",n).val()?a.hide():a.show()}else s&&("button"===jQuery("input:checked",n).val()?t.find("p").not(n).removeClass("give-hidden"):t.find("p").not(n).addClass("give-hidden"))}))}function i(e){e.each((function(){var e=t(this),n=jQuery(this).closest(".give_forms_widget_container"),s=jQuery(".js-loader",n),i=jQuery(".js-legacy-form-template-settings",n),o=jQuery(".js-new-form-template-settings",n);i.addClass("give-hidden").removeClass("active"),o.addClass("give-hidden").removeClass("active"),s.removeClass("give-hidden"),jQuery.post(ajaxurl,{action:"give_get_form_template_id",formId:e.val(),security:jQuery('input[name="_wpnonce"]',n).val()},(function(r){s.addClass("give-hidden"),!0===r.success&&("legacy"===r.data?i.removeClass("give-hidden").addClass("active"):o.removeClass("give-hidden").addClass("active")),a(e),function(e){var n;e.each((function(){var e=t(this);e.wpColorPicker({change:function(){window.clearTimeout(n),n=window.setTimeout((function(){e.trigger("change")}),100)}})}))}(jQuery(".give_forms_button_color_setting_row input",n))}))}))}jQuery((function(){var e=jQuery(".widget-liquid-right");e&&function(e){n(e),s(jQuery(".give-select",e))}(e)})),jQuery(document).ajaxSuccess((function(e,t,n){var a=Give.fn.getParameterByName("action",n.data),i=Give.fn.getParameterByName("delete_widget",n.data),o=Give.fn.getParameterByName("widget-id",n.data),r=Give.fn.getParameterByName("sidebar",n.data),c=jQuery("#".concat(r,' [id*="').concat(o,'"]')),l=jQuery(".give-select",c),u=!!parseInt(l.val());if(i||"save-widget"!==a)return!1;console.log("pass 1",l),Promise.all([s(l)]).then((function(){u||jQuery(".js-loader",c).addClass("give-hidden")}))})),jQuery(document).on("widget-added",(function(e,t){var a=jQuery(".give-select",t),i=!!parseInt(a.val());console.log("pass 2",t),jQuery(".control-section-sidebar").length&&Promise.all([s(a)]).then((function(){i||jQuery(".js-loader",t).addClass("give-hidden"),n(t)}))}))}(jQuery)})();