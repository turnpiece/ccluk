(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}!function(t){window.sequoiaTemplateL10n;var a=window.sequoiaTemplateOptions,i=t(".give-embed-form"),n=t(".advance-btn",i),o=t(".back-btn"),r=t(".give-form-navigator .title"),c=t("#give-payment-mode-select"),s=!1,l=window.parent.wp;l&&l.data&&i.on("click",(function(){var e=window.frameElement.closest(".wp-block").getAttribute("data-block");l.data.dispatch("core/block-editor").selectBlock(e)}));var d=window.formNavigator={currentStep:"enabled"===a.introduction.enabled?0:1,animating:!1,firstFocus:!1,goToStep:function(e){var n=p[e].title?t(p[e].selector).height()+50:t(p[e].selector).height(),o=p[d.currentStep].title?t(p[d.currentStep].selector).height()+50:t(p[d.currentStep].selector).height();n>o?t(".give-form-templates").css("min-height","".concat(n+123,"px")):setTimeout((function(){t(".give-form-templates").css("min-height","".concat(n+123,"px"))}),200),t(".step-tracker").removeClass("current"),t('.step-tracker[data-step="'+e+'"]').addClass("current"),"disabled"===a.introduction.enabled?(3===t(".step-tracker").length&&t(".step-tracker").remove(),1===(e=e>0?e:1)?t(".back-btn",i).hide():t(".back-btn",i).show(),t(".give-form-navigator",i).addClass("nav-visible"),t(p[e].selector).css("padding-top","50px")):0===e?(t(".give-form-navigator",i).removeClass("nav-visible"),t(p[e].selector).css("padding-top","")):(t(".give-form-navigator",i).addClass("nav-visible"),t(p[e].selector).css("padding-top","50px"),x()),p[e].title&&r.text(p[e].title);var c=p.map((function(t,a){return a===e||a===d.currentStep?null:t.selector})).filter(Boolean).join(", ");if(t(c).hide(),d.currentStep!==e){var s="slide-in-right slide-in-left slide-out-right slide-out-left",l=d.currentStep<e?"left":"right",u=d.currentStep<e?"right":"left";t(p[d.currentStep].selector).removeClass(s).addClass("slide-out-".concat(l)),t(p[e].selector).show().removeClass(s).addClass("slide-in-".concat(u))}d.currentStep=e,setTimeout((function(){if(y(),!d.firstFocus&&"disabled"===a.introduction.enabled)return d.firstFocus=!0;p[d.currentStep].firstFocus&&t(p[d.currentStep].firstFocus).trigger("focus")}),200)},init:function(){p.forEach((function(e){void 0!==e.setup&&e.setup(),t(e.selector).css("position","absolute")})),n.on("click",(function(e){e.preventDefault(),d.forward()})),o.on("click",(function(e){e.preventDefault(),d.back()})),t(".step-tracker").on("click",(function(e){e.preventDefault(),d.goToStep(parseInt(t(e.target).attr("data-step")))})),function(e){var a=0;function i(){var n=t(p[d.currentStep].selector);a!==t(n).outerHeight()&&(e(t(n).outerHeight()),a=t(n).outerHeight()),window.requestAnimationFrame(i)}window.requestAnimationFrame(i)}((function(e){!1===s?t(".form-footer").css("transition","margin-top 0.2s ease"):t(".form-footer").css("transition",""),t(".form-footer").css("margin-top","".concat(e,"px"))})),t(".give-fee-recovery-donors-choice").parent().hasClass("give-form")&&t("#give_checkout_user_info").after(t(".give-fee-recovery-donors-choice")),d.goToStep(Give.fn.getParameterByName("showDonationProcessingError")||Give.fn.getParameterByName("showFailedDonationError")?2:0)},back:function(){var e=0!==d.currentStep?d.currentStep-1:0;d.goToStep(e),d.currentStep=e},forward:function(){var e=null!==d.currentStep?d.currentStep+1:1;d.goToStep(e),d.currentStep=e}},p=[{id:"introduction",title:null,selector:".give-section.introduction",label:a.introduction.donate_label,showErrors:!1,tabOrder:[".introduction .advance-btn",".step-tracker"]},{id:"choose-amount",title:a.payment_amount.header_label,selector:".give-section.choose-amount",label:a.payment_amount.next_label,showErrors:!1,tabOrder:["select.give-cs-select-currency","input.give-amount-top",".give-donation-levels-wrap button",".give-recurring-period",".give-recurring-donors-choice-period",".give_fee_mode_checkbox",".choose-amount .advance-btn",".step-tracker",".back-btn"],firstFocus:".give-default-level",setup:function(){var e=t(".give-donation-level-btn").length;1===e?t(".give-donation-levels-wrap").attr("style","display: none!important;"):e%2==0&&e<6&&t(".give-donation-levels-wrap").css("grid-template-columns","repeat(2, minmax(0, 1fr))"),t("#give-amount").on("blur",(function(){Give.form.fn.isValidDonationAmount(t("form"))?t(".advance-btn").attr("disabled",!1):t(".advance-btn").attr("disabled",!0)})),t(".give-donation-level-btn").each((function(){if(!t(this).attr("has-tooltip")){var e=t(this).attr("value"),a=t(this).text(),i=t("form"),n=Give.form.fn.getInfo("currency_symbol",i),o=Give.form.fn.getInfo("currency_position",i);if("custom"!==e){var r="before"===o?'<div class="currency currency--before">'.concat(n,"</div>").concat(e):"".concat(e,'<div class="currency currency--after">').concat(n,"</div>");t(this).html(r)}if("custom"!==e&&a!==("before"===o?n+e:e+n)){var c=document.createElement("span");c.classList.add("give-tooltip","hint--top","hint--bounce"),a.length<50&&c.classList.add("narrow"),c.style.width="100%",c.setAttribute("aria-label",a.length<50?a:a.substr(0,50)+"..."),t(this).wrap(c),t(this).attr("has-tooltip",!0)}}}))}},{id:"payment",title:a.payment_information.header_label,label:a.payment_information.checkout_label,selector:".give-section.payment",showErrors:!0,tabOrder:[".payment input, .payment a, .payment button, .payment select, .payment multiselect, .payment textarea, .payment .button",".give-submit",".step-tracker",".back-btn"],firstFocus:"#give-first",setup:function(){t(".give-section.payment").on("click",".give-cancel-login, .give-checkout-register-cancel",S),t(".give-section.payment").on("click touchend",'input[name="give_login_submit"]',(function(){t('input[name="give_login_submit"] + .give-loading-animation').removeClass("give-loading-animation").addClass("sequoia-loader spinning")})),window.give_global_vars.purchase_loading="",t(".give_error").each((function(){g(t(this))})),k({container:"#give-anonymous-donation-wrap label",label:"#give-anonymous-donation-wrap label",input:"#give-anonymous-donation"}),k({container:".give-recurring-donors-choice",label:".give-recurring-donors-choice label",input:'input[name="give-recurring-period"]'}),k({container:".give-fee-recovery-donors-choice",label:".give-fee-message-label-text",input:'input[name="give_fee_mode_checkbox"]'}),k({container:".give-activecampaign-fieldset",label:".give-activecampaign-optin-label",input:".give-activecampaign-optin-input"}),k({container:".give-mailchimp-fieldset",label:".give-mc-message-text",input:'input[name="give_mailchimp_signup"]'}),k({container:".give-constant-contact-fieldset",label:".give-constant-contact-fieldset span",input:'input[name="give_constant_contact_signup"]'}),k({container:"#give_terms_agreement",label:"#give_terms_agreement label",input:'input[name="give_agree_to_terms"]'}),t("body.give-form-templates").on("click touchend",'form.give-form input[name="give-purchase"].give-submit',(function(){t("#give-purchase-button + .give-loading-animation").removeClass("give-loading-animation").addClass("sequoia-loader"),t("form").get(0).checkValidity()&&t(".sequoia-loader").addClass("spinning")})),t("body.give-form-templates").on("click touchend","#give_error_invalid_donation_maximum",(function(){d.goToStep(1)})),t("body.give-form-templates").on("click touchend","#give_error_invalid_donation_amount",(function(){d.goToStep(1)})),t("#give-gateway-radio-list li").each((function(){var e;switch(t("input",this).val()){case"manual":e="fas fa-tools";break;case"offline":e="fas fa-wallet";break;case"paypal":e="fab fa-paypal";break;case"stripe":case"stripe_checkout":case"paypalpro_payflow":case"paypal-commerce":e="far fa-credit-card";break;case"stripe_sepa":case"stripe_ach":case"stripe_ideal":case"stripe_becs":e="fas fa-university";break;case"stripe_google_pay":e="fab fa-google";break;case"stripe_apple_pay":e="fab fa-apple";break;default:e="fas fa-hand-holding-heart"}t(this).append('<i class="'.concat(e,'"></i>'))})),v(),_(),new window.MutationObserver((function(e){e.forEach((function(e){if(e.addedNodes)for(var a=0;a<e.addedNodes.length;a++){var i=e.addedNodes[a];if(t(i).find(".give_error").length>0&&(g(t(i).find(".give_error")),x()),t(i).children().hasClass("give_errors")&&(t(i).parent().hasClass("donation-errors")||t(i).children(".give_errors").each((function(){g(t(this))})),x()),t(i).hasClass("give_errors")&&!t(i).parent().hasClass("donation-errors")&&(g(t(i)),t(".sequoia-loader").removeClass("spinning"),x()),"give_tributes_address_state"===t(i).attr("id")){var n=t(i).attr("placeholder");t(i).prepend("<option selected disabled>".concat(n,"</option>"))}if("give_tributes_address_state"===t(i).attr("name")&&t(i).attr("class").includes("give-input")&&t(i).attr("placeholder",t(i).siblings("label").text().trim()),t(i).attr("id")&&t(i).attr("id").includes("give-checkout-login-register")&&(f(),_()),t(i).prop("tagName")&&"select"===t(i).prop("tagName").toLowerCase()){var o=t(i).attr("placeholder");o&&t(i).prepend('<option value="" disabled selected>'.concat(o,"</option>"))}t(i).find(".required[placeholder]").length&&u(Array.from(t(i).get(0).querySelectorAll(".required[placeholder]")))}}))})).observe(document.body,{childList:!0,subtree:!0,attributes:!1,characterData:!1})}}];function u(e){e.map((function(e){"*"!==e.placeholder.trim().slice(-1)&&(e.placeholder="".concat(e.placeholder.trim(),"*"))}))}function g(a){t(a).parent().hasClass("give-stripe-payment-request-button")||(0===t(".donation-errors").length&&t(".payment").prepend('<div class="donation-errors"></div>'),setTimeout((function(){void 0===e(t(".donation-errors").html())||t(".donation-errors").html().includes(t(a).html())?t(a).remove():t(a).appendTo(".donation-errors")}),1))}function f(){var e=function(e){t(e.target).is("input")&&(t(e.target).hasClass("give-disabled")||t(e.target).closest("label").toggleClass("checked"))};t('[id*="give-register-account-fields"]').off("click",e).on("click",e)}function v(){t("#give-ffm-section").off("click",m).on("click",m),t("#give-ffm-section input").each((function(){switch(t(this).prop("type")){case"checkbox":t(this).prop("checked")?t(this).parent().addClass("checked"):t(this).parent().removeClass("checked");break;case"radio":t(this).prop("checked")?t(this).parent().addClass("selected"):t(this).parent().removeClass("selected")}}))}function m(e){if(t(e.target).is("input"))switch(t(e.target).prop("type")){case"checkbox":t(e.target).closest("label").toggleClass("checked");break;case"radio":t(e.target).closest("label").addClass("selected"),t(e.target).parent().siblings().removeClass("selected")}}function h(){0===t("#donate-fieldset").length&&t(".give-section.payment").append('<fieldset id="donate-fieldset"></fieldset>');[".give-constant-contact-fieldset",".give-activecampaign-fieldset",".give-mailchimp-fieldset","#give_terms_agreement",".give-donation-submit"].forEach((function(e){0===t("#donate-fieldset  ".concat(e)).length||t("#donate-fieldset  ".concat(e)).html()!==t("#give_purchase_form_wrap  ".concat(e)).html()&&void 0!==t("#give_purchase_form_wrap  ".concat(e)).html()?(t("#donate-fieldset  ".concat(e)).remove(),t("#donate-fieldset").append(t("#give_purchase_form_wrap ".concat(e)))):t("#give_purchase_form_wrap ".concat(e)).remove()})),t("li.give-gateway-option-selected").after(t("#give_purchase_form_wrap"));var e="gateway-"+t(".give-gateway-option-selected input").attr("value").replace("_","-");t("#give_purchase_form_wrap").attr("class",e)}function b(e,a){t(e).each((function(){if(""!==t(this).html()&&!1===t(this).html().includes('<i class="fas fa-'.concat(a,'"></i>'))){var e="rtl"===t("html").attr("dir")?"padding-right":"padding-left";t(this).prepend('<i class="fas fa-'.concat(a,'"></i>')),t(this).children("input, selector").each((function(){t(this).attr("style",e+": 33px!important;")}))}}))}function _(){b("#give-first-name-wrap","user"),b("#give-email-wrap","envelope"),b("#give-company-wrap","building"),b("#date_field-wrap","calendar-alt"),b("#url_field-wrap","globe"),b("#phone_field-wrap","phone"),b("#give-phone-wrap","phone"),b("#email_field-wrap","envelope")}function y(){t("select, button, input, textarea, multiselect, a").attr("tabindex",-1),p[d.currentStep].tabOrder.forEach((function(e,a){t(e).attr("tabindex",a+1)}))}function w(){var e=document.querySelectorAll('[data-field-type="checkbox"] input'),a=document.querySelectorAll('[data-field-type="radio"] input');Array.from(e).forEach((function(e){var t="#".concat(e.getAttribute("id")),a="label[for=".concat(e.getAttribute("id"),"]");k({container:a,label:a,input:t})})),Array.from(a).forEach((function(e){var a="#".concat(e.getAttribute("id"));!function(e){var a=e.label,i=e.input;!0===t(i).prop("checked")&&t(a).addClass("active");t(document).on("click",a,(function(e){"INPUT"!==e.target.nodeName&&(t(e.target.parentElement).find("label").not(e.target).removeClass("active"),t(e.target).toggleClass("active"))}))}({label:"label[for=".concat(e.getAttribute("id"),"]"),input:a})}))}function k(e){var a=e.container,i=e.label,n=e.input;!0===t(n).prop("checked")&&t(a).addClass("active"),t(document).on("click",i,(function(e){"INPUT"!==e.target.nodeName&&t(a).toggleClass("active")}))}function S(){t("#give_error_must_log_in").remove()}function C(){t('select option[selected="selected"][value=""]').length>0&&t('select option[selected="selected"][value=""]').each((function(){t(this).parent().siblings("label").length&&(t(this).text(t(this).parent().siblings("label").text().replace("*","").trim()),t(this).attr("disabled",!0))}))}function x(){"parentIFrame"in window&&window.parentIFrame.sendMessage({action:"giveScrollIframeInToView"})}d.init(),c.length&&"none"!==c.css("display")?(h(),t(document).on("give_gateway_loaded",(function(){setTimeout(y,200),h(),w(),f(),v(),_(),C(),t("#give_purchase_form_wrap").slideDown(200,(function(){s=!1}))})),t(document).on("Give:onPreGatewayLoad",(function(){s=!0,t("#give_purchase_form_wrap").slideUp(200)})),t(document).on("Give:onPreGatewayLoad",(function(){var e=["give_error_test_mode"];t(".give_errors, .give_notices, .give_error").each((function(){e.includes(t(this).attr("id"))||t(this).slideUp(200,(function(){t(this).remove()}))}))}))):t("#give_purchase_form_wrap").addClass("give-single-gateway-wrap"),t(document).on("give_gateway_loaded",(function(e,a,i){2===d.currentStep&&t(".give-form-templates").css("min-height","");var n=t("#".concat(i));if(n.parent().hasClass("give-embed-form")){var o={action:"give_cancel_login",form_id:n.find('[name="give-form-id"]').val()};t.post(Give.fn.getGlobalVar("ajaxurl"),o,(function(e){var a=n.find("[id^=give-checkout-login-register]");a.length&&e.fields.includes("give_checkout_user_info")&&n.find("#give_checkout_user_info").remove(),a.replaceWith(t.parseJSON(e.fields)),a.css({display:"block"}),n.find(".give-submit-button-wrap").show()})).done((function(){window.give_fl_trigger(),_()}))}})),w(),C(),f(),v(),_(),u(Array.from(document.querySelectorAll(".give-form .required[placeholder]")))}(jQuery),document.addEventListener("readystatechange",(function(e){if("complete"===e.target.readyState){var t=document.querySelectorAll('[data-field-type="checkbox"] input'),a=document.querySelectorAll('[data-field-type="radio"] input'),i=function(e){e.checked?e.parentElement.classList.add("active"):e.parentElement.classList.remove("active")};t.forEach(i),a.forEach(i)}}))})();