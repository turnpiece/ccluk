var give_scripts,give_global_vars,Give="undefined"!=typeof Give?Give:{};Give={init:function(){var e=["form"],t=0;for(jQuery(document).trigger("give:preInit"),this.fn.__initialize_cache();t<e.length;)Give[e[t]].init&&Give[e[t]].init(),t++;jQuery(document).trigger("give:postInit")},fn:{formatCurrency:function(e,t,i){var n={symbol:"",decimal:parseInt(give_global_vars.decimal_separator),thousand:give_global_vars.thousands_separator,precision:give_global_vars.number_decimals,currency:give_global_vars.currency};if(e=e.toString().trim(),i="undefined"==typeof i?{}:i,i.length&&(n={symbol:"",decimal:Give.form.fn.getInfo("decimal_separator",i),thousand:Give.form.fn.getInfo("thousands_separator",i),precision:Give.form.fn.getInfo("number_decimals",i),currency:Give.form.fn.getInfo("currency_code",i)}),t=jQuery.extend(n,t),t.precision=parseInt(t.precision),"INR"===t.currency){var a,r,o=accounting.unformat(e,".").toString(),d="",l=o.indexOf(".");for(-1!==l&&t.precision?(d=Number(o.substr(parseInt(l))).toFixed(t.precision).toString().substr(1),o=o.substr(0,parseInt(l)),d.length?t.precision+1>d.length&&(d=(d+"000000000").substr(0,t.precision+1)):d=".0000000000".substr(0,parseInt(l)+1)):d=".000000000".substr(0,t.precision+1),a=o.substr(-3),r=o.substr(0,parseInt(o.length)-3);r.length>0;)a=r.substr(-2)+t.thousand+a,r=r.substr(0,parseInt(r.length)-2);d.length&&(a+=d),e=a,void 0!==t.symbol&&t.symbol.length&&("after"===t.position?e+=t.symbol:e=t.symbol+e)}else"after"===t.position&&(t.format="%v%s"),e=accounting.formatMoney(e,t);return e},unFormatCurrency:function(e,t){return Math.abs(parseFloat(accounting.unformat(e,t)))},getParameterByName:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=i.exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},getGlobalVar:function(e){return"undefined"==typeof give_global_vars[e]?"":give_global_vars[e]},setCache:function(e,t,i){i.length?Give.cache["form_"+Give.form.fn.getInfo("form-id",i)][e]=t:Give.cache[e]=t},getCache:function(e,t){var i;return i=t.length?Give.cache["form_"+Give.form.fn.getInfo("form-id",t)][e]:Give.cache[e],i="undefined"==typeof i?"":i},__initialize_cache:function(){jQuery.each(jQuery(".give-form"),function(e,t){t=t instanceof jQuery?t:jQuery(t),Give.cache["form_"+Give.form.fn.getInfo("form-id",t)]=[]})}},cache:{}},Give.form={init:function(){this.fn.field.formatCreditCard(jQuery("form.give-form")),window.onload=function(){Give.form.fn.__sendBackToForm()}},fn:{disable:function(e,t){return!!e.length&&void e.find(".give-submit").prop("disabled",t)},formatAmount:function(e,t,i){return t.length?Give.fn.formatCurrency(e,i,t):e},getInfo:function(e,t){var i="";if(t="undefined"!=typeof t?t:{},!e.length||!t.length)return i;switch(e){case"gateways":i=[],jQuery.each(t.find('input[name="payment-mode"]'),function(e,t){t=t instanceof jQuery?t:jQuery(t),i.push(t.val().trim())});break;case"form-type":t.hasClass("give-form-type-set")?i="set":t.hasClass("give-form-type-multi")&&(i="multi");break;case"form-id":i=t.find('input[name="give-form-id"]').val();break;default:i=t.get(0).hasAttribute("data-"+e)?t.attr("data-"+e):t.attr(e),"undefined"!=typeof i?i.trim():i}return i},setInfo:function(e,t,i,n){if(!e.length||!i.length)return!1;switch(n="undefined"==typeof n?"data":n){case"attr":i.attr(e,t);break;default:i.data(e,t)}return!0},getGateway:function(e){var t="";return e.length?(t=e.find('input[name="payment-mode"]:checked').val().trim(),"undefined"!=typeof t?t:""):t},getVariablePrices:function(e){var t,i=[];return e.length&&e.hasClass("give-form-type-multi")&&(t=e.find(".give-donation-levels-wrap [data-price-id] "))?(jQuery.each(t,function(t,n){n=n instanceof jQuery?n:jQuery(n);var a=Give.form.fn.getInfo("decimal_separator",e);i.push({price_id:n.data("price-id"),amount:Give.fn.unFormatCurrency(n.val(),a)})}),i):i},getPriceID:function(e,t){var i=this.getVariablePrices(e),n=Give.fn.unFormatCurrency(e.find('input[name="give-amount"]').val(),this.getInfo("decimal_separator",e)),a=Give.fn.getCache("amount_"+n,e)?Give.fn.getCache("amount_"+n,e):-1;return t="undefined"==typeof t||t,i.length&&-1===a&&(t?(jQuery.each(i,function(e,t){if(t.amount===n)return a=t.price_id,!1}),-1===a&&this.getMinimumAmount(e)<=n&&(a="custom")):a=jQuery('input[name="give-price-id"]',e).val()),a},getMinimumAmount:function(e){return Give.fn.unFormatCurrency(e.find('input[name="give-form-minimum"]').val())},getAmount:function(e){if(!e.length)return null;var t=e.find('input[name="give-amount"]').val();return"undefined"!=typeof t&&t||(t=0),Give.fn.unFormatCurrency(t,this.getInfo("decimal_separator",e))},autoSelectDonationLevel:function(e,t){if(!e.length||"multi"!==this.getInfo("form-type",e))return!1;switch(t="undefined"==typeof t?this.getPriceID(e,!1):t,!0){case!!e.find(".give-radio-input").length:e.find(".give-radio-input").prop("checked",!1),e.find('.give-radio-input[data-price-id="'+t+'"]').prop("checked",!0).addClass("give-default-level");break;case!!e.find("button.give-donation-level-btn").length:e.find("button.give-donation-level-btn").blur(),e.find('button.give-donation-level-btn[data-price-id="'+t+'"]').focus().addClass("give-default-level");break;case!!e.find("select.give-select-level").length:e.find("select.give-select-level option").prop("selected",!1),e.find('select.give-select-level option[data-price-id="'+t+'"]').prop("selected",!0).addClass("give-default-level")}},autoSetMultiLevel:function(e){var t=e.parents("form"),i=e.val(),n=e.data("price-id");if("undefined"==typeof n&&(n=e.find("option:selected").data("price-id")),"custom"===i)return t.find(".give-amount-top").val("").focus(),!1;t.find(".give-amount-top").val(i),t.find("span.give-amount-top").text(i);var a=Give.form.fn.getInfo("decimal_separator",t);jQuery(".give-donation-amount .give-text-input",t).data("amount",Give.fn.unFormatCurrency(t.find(".give-final-total-amount").data("total"),a)),t.find(".give-donation-amount .give-text-input").trigger("blur",[t,i,n]),jQuery(document).trigger("give_donation_value_updated",[t,i,n])},__sendBackToForm:function(){var e=Give.fn.getParameterByName("form-id"),t=Give.fn.getParameterByName("payment-mode");if(!e||!t)return!1;var i=jQuery("body").find("#give-form-"+e+"-wrap"),n=i.find("form.give-form"),a=i.hasClass("give-display-modal"),r=i.hasClass("give-display-reveal");n.find("#give-gateway-radio-list label").removeClass("give-gateway-option-selected"),n.find("input[name=payment-mode][value="+t+"]").prop("checked",!0).parent().addClass("give-gateway-option-selected");var o=Give.fn.getParameterByName("level-id"),d=n.find('*[data-price-id="'+o+'"]');d.length>0&&this.autoSetMultiLevel(d),a?give_open_form_modal(i,n):r&&(n.find(".give-btn-reveal").hide(),n.find("#give-payment-mode-select, #give_purchase_form_wrap").slideDown())},isValidDonationAmount:function(e){var t=this.getMinimumAmount(e),i=this.getAmount(e),n=this.getPriceID(e,!0);return-1<i&&i>=t||-1!==n},field:{formatCreditCard:function(e){e.each(function(e,t){t=jQuery(t);var i=t.find(".card-number"),n=t.find(".card-cvc"),a=t.find(".card-expiry");i.length&&(i.payment("formatCardNumber"),n.payment("formatCardCVC"),a.payment("formatCardExpiry"))})}}}},Give.notice={fn:{renderNotice:function(e,t){var i,n="";switch(t="undefined"!=typeof t?t:{},e){case"bad_minimum":i=jQuery('<div class="give_error give-invalid-minimum give-hidden">'+this.getNotice(e,t)+"</div>")}return t.length?void i.insertBefore(t.find(".give-total-wrap")).show():n},getNotice:function(e,t){if(!e.length)return null;var i="";switch(e){case"bad_minimum":t.length&&(i=Give.fn.getGlobalVar("bad_minimum")+" "+Give.fn.formatCurrency(Give.form.fn.getMinimumAmount(t),{symbol:Give.form.fn.getInfo("currency_symbol",t)},t))}return i}}},jQuery(function(e){function t(){var t=e(this),i=t.parents("form");if("card_state"!=t.attr("id")){i.find("#card_state").empty().append('<option value="1">'+give_global_vars.general_loading+"</option>").prop("disabled",!0);var a={action:"give_get_states",country:t.val(),field_name:"card_state"};e.ajax({type:"POST",data:a,url:give_global_vars.ajaxurl,xhrFields:{withCredentials:!0},success:function(e){var t="",a=e.states_label;t=void 0!=typeof e.states_found&&1==e.states_found?e.data:'<input type="text" id="card_state"  name="card_state" class="cart-state give-input required" placeholder="'+a+'" value="'+e.default_state+'"/>',!1===i.hasClass("float-labels-enabled")?"undefined"!=typeof e.states_require&&1==e.states_require?i.find('input[name="card_state"], select[name="card_state"]').closest("p").find("label .give-required-indicator").removeClass("give-hidden"):i.find('input[name="card_state"], select[name="card_state"]').closest("p").find("label .give-required-indicator").addClass("give-hidden"):i.find('input[name="card_state"], select[name="card_state"]').closest("p").find("label").text(a),i.find('input[name="card_state"], select[name="card_state"]').closest("p").find("label .state-label-text").text(a),i.find('input[name="card_state"], select[name="card_state"]').replaceWith(t),void 0!=typeof e.show_field&&1==e.show_field?(i.find("p#give-card-state-wrap").removeClass("give-hidden"),i.find("p#give-card-zip-wrap").addClass("form-row-last"),i.find("p#give-card-zip-wrap").removeClass("form-row-wide")):(i.find("p#give-card-state-wrap").addClass("give-hidden"),i.find("p#give-card-zip-wrap").addClass("form-row-wide"),i.find("p#give-card-zip-wrap").removeClass("form-row-last")),n.trigger("give_checkout_billing_address_updated",[e,i.attr("id")])}}).fail(function(e){window.console&&window.console.log&&console.log(e)})}return!1}var i=jQuery("form.give-form"),n=e(document);e.fn.toggleError=function(e){return this.toggleClass("error",e),this.toggleClass("valid",!e),this},Give.init(),n.on("change","#give_cc_address input.card_state, #give_cc_address select",t),n.on("give_gateway_loaded",function(){Give.form.fn.field.formatCreditCard(i)}),n.on("submit","#give_payment_mode",function(){var t=Give.form.fn.getGateway(e(this).closest("form"));if(!t.length)return alert(Give.fn.getGlobalVar("no_gateway")),!1}),n.on("click","#give-payment-mode-select input",function(){var t,i=e(this).parents("form"),n=i.find("#give-payment-mode-select li"),a=i.find('li.give-gateway-option-selected input[name="payment-mode"]').val().trim();n.removeClass("give-gateway-option-selected"),n.prop("checked",!1),e(this).prop("checked",!0),e(this).parent().addClass("give-gateway-option-selected"),t=Give.form.fn.getGateway(i),i.attr("action",i.attr("action").replace("payment-mode="+a,"payment-mode="+t))}),n.on("focus",".give-donation-amount .give-text-input",function(t){var i=e(this).parents("form");e(this).removeClass("invalid-amount");var n=i.find(".give-final-total-amount").data("total"),a=Give.form.fn.getInfo("decimal_separator",i);e(this).data("amount",Give.fn.unFormatCurrency(n,a)),e(this).parent(".give-donation-amount").addClass("give-custom-amount-focus-in"),i.find(".give-default-level, .give-radio-input").removeClass("give-default-level"),i.find(".give-btn-level-custom").addClass("give-default-level"),i.find(".give-radio-input").prop("checked",!1),i.find(".give-radio-input.give-radio-level-custom").prop("checked",!0),i.find(".give-select-level").prop("selected",!1),i.find(".give-select-level .give-donation-level-custom").prop("selected",!0)}),n.on("blur",".give-donation-amount .give-text-input",function(t,i,n,a){var r="undefined"!=typeof i?i:e(this).closest("form"),o=e(this).data("amount"),d="undefined"!=typeof n?n:e(this).val(),l=Give.form.fn.getInfo("decimal_separator",r),s=Give.form.fn.getMinimumAmount(r),f=0===d?s:Give.fn.unFormatCurrency(d,l),u=Give.form.fn.formatAmount(f,r,{});if(a="undefined"==typeof a?Give.form.fn.getPriceID(r,!0):a,Give.fn.setCache("amount_"+f,a,r),e(this).val(u),Give.form.fn.isValidDonationAmount(r))e(this).removeClass("give-invalid-amount"),r.find(".give-invalid-minimum").slideUp(300,function(){e(this).remove()}),Give.form.fn.disable(r,!1);else{e(this).addClass("give-invalid-amount"),Give.form.fn.disable(r,!0);var c=r.find(".give-invalid-minimum");0===c.length&&Give.notice.fn.renderNotice("bad_minimum",r)}o!==f&&r.find(".give-final-total-amount").data("total",f).text(Give.fn.formatCurrency(f,{symbol:Give.form.fn.getInfo("currency_symbol",r),position:Give.form.fn.getInfo("currency_position",r)},r)),-1!==a&&(e('input[name="give-price-id"]',r).val(a),r.find(".give-amount-hidden").val(Give.form.fn.formatAmount(f,r,{})),r.find(".give-default-level").removeClass("give-default-level"),Give.form.fn.autoSelectDonationLevel(r,a)),e(this).parent(".give-donation-amount").removeClass("give-custom-amount-focus-in")}),n.on("click touchend",".give-donation-level-btn",function(t){t.preventDefault(),Give.form.fn.autoSetMultiLevel(e(this))}),n.on("click touchend",".give-radio-input-level",function(t){Give.form.fn.autoSetMultiLevel(e(this))}),n.on("change",".give-select-level",function(t){Give.form.fn.autoSetMultiLevel(e(this))}),n.on("click",".give_terms_links",function(t){t.preventDefault();var i=e(this).closest("fieldset");return e("[class^=give_terms-]",i).slideToggle(),e("a.give_terms_links",i).toggle(),!1}),e('label[for^="give-radio-level"]').on("click",function(t){var i=e(this).closest("form"),n=i.find("#"+e(this).attr("for"));n.length&&(n.trigger("click"),t.preventDefault())})}),jQuery(window).load(function(){jQuery("body").on("keyup change focusout",".give-form .card-number, .give-form .card-cvc, .give-form .card-expiry",function(e){var t=jQuery(this),i=t.parents("form.give-form"),n=t.attr("id"),a=i.find(".card-number"),r=i.find(".card-cvc"),o=i.find(".card-expiry"),d=jQuery.payment.cardType(a.val()),l=!1;switch(e.type){case"focusout":n.indexOf("card_number")>-1?(l=!jQuery.payment.validateCardNumber(a.val()),a.toggleError(l)):n.indexOf("card_cvc")>-1?(l=!jQuery.payment.validateCardCVC(r.val(),d),r.toggleError(l)):n.indexOf("card_expiry")>-1&&(l=!jQuery.payment.validateCardExpiry(o.payment("cardExpiryVal")),o.toggleError(l)),Give.form.fn.disable(t.parents("form"),l);break;default:if(t.hasClass("error")&&t.removeClass("error"),n.indexOf("card_number")>-1){var s=i.find(".card-type");null===d?(s.removeClass().addClass("off card-type"),t.removeClass("valid").addClass("error")):s.removeClass().addClass("card-type "+d)}else if(n.indexOf("card_expiry")>-1){var f=o.payment("cardExpiryVal");i.find(".card-expiry-month").val(f.month),i.find(".card-expiry-year").val(f.year)}}})});