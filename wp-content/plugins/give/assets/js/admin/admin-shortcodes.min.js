var jq=jQuery.noConflict(),scShortcode,scButton,render_continue_button_title_field=function(){var t=jq(".mce-txt",".mce-give-display-style").text(),e=["- Select -","All Fields"];-1!==jq.inArray(t,e)?jq(".mce-give-continue-button-title").closest(".mce-container").hide():jq(".mce-give-continue-button-title").closest(".mce-container").show()},scForm={open:function(t){var e=tinymce.get(t);if(e){var o,n,c,i,s;o={action:"give_shortcode",shortcode:scShortcode},jq.post(ajaxurl,o,function(t){if(!t.body)return void console.error("Bad AJAX response!");if(0===t.body.length)return window.send_to_editor("["+t.shortcode+"]"),void scForm.destroy();jq.each(t.body,function(e,o){"display_style"===o.name&&(t.body[e].onselect=function(){render_continue_button_title_field()})});var o={title:t.title,body:t.body,classes:"sc-popup",minWidth:320,buttons:[{text:t.ok,classes:"primary sc-primary",onclick:function(){s=e.windowManager.getWindows()[0],c=scShortcodes[scShortcode],i=!0;for(var t in c)if(c.hasOwnProperty(t)&&(n=s.find("#"+t)[0],"undefined"!=typeof n&&""===n.state.data.value)){i=!1,alert(c[t]);break}i&&s.submit()}},{text:t.close,onclick:"close"}],onsubmit:function(e){var o="";for(var n in e.data)e.data.hasOwnProperty(n)&&""!==e.data[n]&&(o+=" "+n+'="'+e.data[n]+'"');window.send_to_editor("["+t.shortcode+o+"]")},onclose:function(){scForm.destroy()},onopen:function(){console.log(t),render_continue_button_title_field()}};t.ok.constructor===Array&&(o.buttons[0].text=t.ok[0],o.buttons[0].onclick="close",delete o.buttons[1]),e.windowManager.open(o)})}},destroy:function(){var t=jq("#scTemp");t.length&&(tinymce.get("scTemp").remove(),t.remove())}};jq(function(t){var e=function(){scButton.addClass("active").parent().find(".sc-menu").show()},o=function(){"undefined"!=typeof scButton&&scButton.removeClass("active").parent().find(".sc-menu").hide()};t(document).on("click",function(e){t(e.target).closest(".sc-wrap").length||o()}),t(document).on("click",".sc-button",function(n){n.preventDefault(),scButton=t(this),scButton.hasClass("active")?o():e()}),t(document).on("click",".sc-shortcode",function(e){e.preventDefault(),scShortcode=t(this).attr("data-shortcode"),scShortcode?(tinymce.get(window.wpActiveEditor)?tinymce.execCommand("Give_Shortcode"):(t("#scTemp").length||(t("body").append('<textarea id="scTemp" style="display: none;" />'),tinymce.init({mode:"exact",elements:"scTemp",plugins:["give_shortcode","wplink"]})),setTimeout(function(){tinymce.execCommand("Give_Shortcode")},200)),setTimeout(function(){o()},100)):console.warn("That is not a valid shortcode link.")})});