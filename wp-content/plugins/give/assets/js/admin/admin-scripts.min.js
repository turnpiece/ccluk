function give_render_responsive_tabs(){var e=jQuery(".give-settings-page"),t=jQuery("h2.give-nav-tab-wrapper"),i=e.width(),n=jQuery(".give-sub-nav-tab-wrapper"),a=jQuery("nav",n),o=jQuery("h2.give-nav-tab-wrapper>a:not(give-not-tab)"),r=[],s=[],c=0;if(600<jQuery(window).outerWidth()&&(c=200),!e.length)return!1;t.css({height:"auto",overflow:"visible"}),o.removeClass("give-hidden");var d=new Promise(function(e,t){jQuery.each(o,function(e,t){t=jQuery(t),c+=parseInt(t.outerWidth()),c<i?r.push(t):s.push(t)}),e(!0)});d.then(function(e){if(s.length&&-1!=window.location.search.indexOf("&tab=")){var i={},o=get_url_params();s=s.filter(function(e){var t=-1!=parseInt(e.attr("href").indexOf("&tab="+o.tab));return t&&(i=e),!t}),i.length&&(s.unshift(r.pop()),r.push(i))}var c=new Promise(function(e,t){r.length&&jQuery.each(r,function(e,t){t=jQuery(t),t.hasClass("give-hidden")&&t.removeClass("give-hidden")}),e(!0)});c.then(function(e){s.length?(a.html(""),jQuery.each(s,function(e,t){t=jQuery(t),t.addClass("give-hidden"),t.clone().removeClass().appendTo(a)}),jQuery(".give-sub-nav-tab-wrapper",t).length||t.append(n),n.show()):n.hide()})})}function get_url_params(){for(var e,t=[],i=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),n=0;n<i.length;n++)e=i[n].split("="),t[e[0]]=e[1];return t}jQuery.noConflict(),function(e){function t(e,t){e=accounting.unformat(e,give_vars.decimal_separator).toString();var i=e.indexOf(".");return 0!=t?e=parseFloat(e).toFixed(t):(-1===i||give_vars.currency_decimals>e.substr(i+1).length)&&(e=parseFloat(e).toFixed(give_vars.currency_decimals)),e}var i=function(){if(e(".give_datepicker").length>0){var t="mm/dd/yy";e(".give_datepicker").datepicker({dateFormat:t})}},n=function(){e(".give-select-chosen").chosen({inherit_select_classes:!0,placeholder_text_single:give_vars.one_option,placeholder_text_multiple:give_vars.one_or_more_option}),e("#post").on("click",".give-thickbox",function(){e(".give-select-chosen","#choose-give-form").css("width","100%")})},a={init:function(){this.edit_address(),this.add_note(),this.remove_note(),this.new_donor(),this.resend_receipt(),this.variable_price_list()},edit_address:function(){e('select[name="give-payment-address[0][country]"]').change(function(){var t=e(this);return data={action:"give_get_states",country:t.val(),field_name:"give-payment-address[0][state]"},e.post(ajaxurl,data,function(t){var i=e("#give-order-address-state-wrap");i.find("*").not(".order-data-address-line").remove(),"nostates"==t?i.append('<input type="text" name="give-payment-address[0][state]" value="" class="give-edit-toggles medium-text"/>'):(i.append(t),i.find("select").chosen())}),!1})},add_note:function(){e("#give-add-payment-note").on("click",function(t){t.preventDefault();var i={action:"give_insert_payment_note",payment_id:e(this).data("payment-id"),note:e("#give-payment-note").val()};if(i.note)e.ajax({type:"POST",data:i,url:ajaxurl,success:function(t){e("#give-payment-notes-inner").append(t),e(".give-no-payment-notes").hide(),e("#give-payment-note").val("")}}).fail(function(e){window.console&&window.console.log&&console.log(e)});else{var n=e("#give-payment-note").css("border-color");e("#give-payment-note").css("border-color","red"),setTimeout(function(){e("#give-payment-note").css("border-color",n)},500)}})},remove_note:function(){e("body").on("click",".give-delete-payment-note",function(t){if(t.preventDefault(),confirm(give_vars.delete_payment_note)){var i={action:"give_delete_payment_note",payment_id:e(this).data("payment-id"),note_id:e(this).data("note-id")};return e.ajax({type:"POST",data:i,url:ajaxurl,success:function(t){return e("#give-payment-note-"+i.note_id).remove(),e(".give-payment-note").length||e(".give-no-payment-notes").show(),!1}}).fail(function(e){window.console&&window.console.log&&console.log(e)}),!0}})},new_donor:function(){e("#give-donor-details").on("click",".give-payment-new-customer, .give-payment-new-customer-cancel",function(t){t.preventDefault(),e(".customer-info").toggle(),e(".new-customer").toggle(),e(".new-customer").is(":visible")?e("#give-new-customer").val(1):e("#give-new-customer").val(0)})},resend_receipt:function(){e("body").on("click","#give-resend-receipt",function(e){return confirm(give_vars.resend_receipt)})},variable_price_list:function(){e('select[name="forms"]').chosen().change(function(){var t,i=e(".give-donation-level");return!!(t=e(this).val())&&(!!i.length&&void e.ajax({type:"POST",url:ajaxurl,data:{form_id:t,payment_id:e('input[name="give_payment_id"]').val(),action:"give_check_for_form_price_variations_html"},success:function(t){t=t.trim(),t?(i.html(t),e('select[name="give-variable-price"]').chosen().change()):i.html("")}}))}),e("#give-donation-overview").on("change",'select[name="give-variable-price"]',function(){var t=jQuery(this).data("prices"),i=e("#give-payment-total");e(this).val()in t&&(i.val(t[e(this).val()]).css("background-color","yellow"),window.setTimeout(function(){i.css("background-color","white")},1e3))})}},o={init:function(){this.toggle_options(),this.main_setting_update_notice(),this.verify_settings()},toggle_options:function(){var t=e('input[name="email_access"]',".give-setting-tab-body-general");t.on("change",function(){var t=e('input[name="email_access"]:checked',".give-setting-tab-body-general").val();"enabled"===t?(e("#recaptcha_key").parents("tr").show(),e("#recaptcha_secret").parents("tr").show()):(e("#recaptcha_key").parents("tr").hide(),e("#recaptcha_secret").parents("tr").hide())}).change();var i=e('input[name="form_featured_img"]',".give-setting-tab-body-display");i.on("change",function(){var t=e('input[name="form_featured_img"]:checked',".give-setting-tab-body-display").val();"enabled"===t?e("#featured_image_size").parents("tr").show():e("#featured_image_size").parents("tr").hide()}).change();var n=e('input[name="terms"]',".give-setting-tab-body-display");n.on("change",function(){var t=e('input[name="terms"]:checked',".give-setting-tab-body-display").val();"enabled"===t?(e("#agree_to_terms_label").parents("tr").show(),e("#wp-agreement_text-wrap").parents("tr").show()):(e("#agree_to_terms_label").parents("tr").hide(),e("#wp-agreement_text-wrap").parents("tr").hide())}).change();var a=e('input[name="admin_notices"]',".give-setting-tab-body-emails");a.on("change",function(){var t=e('input[name="admin_notices"]:checked',".give-setting-tab-body-emails").val();"enabled"===t?(e("#donation_notification_subject").parents("tr").show(),e("#wp-donation_notification-wrap").parents("tr").show(),e("#admin_notice_emails").parents("tr").show()):(e("#donation_notification_subject").parents("tr").hide(),e("#wp-donation_notification-wrap").parents("tr").hide(),e("#admin_notice_emails").parents("tr").hide())}).change()},main_setting_update_notice:function(){var t=e("#setting-error-give-setting-updated");t.length&&window.setTimeout(function(){t.slideUp()},5e3)},verify_settings:function(){var t=e("#success_page"),i=e("#failure_page");t.add(i).change(function(){if(t.val()===i.val()){var n='<div id="setting-error-give-matched-success-failure-page" class="updated settings-error notice is-dismissible"> <p><strong>'+give_vars.matched_success_failure_page+'</strong></p> <button type="button" class="notice-dismiss"><span class="screen-reader-text">'+give_vars.dismiss_notice_text+"</span></button> </div>",a=e("#setting-error-give-matched-success-failure-page");if(a.length)return!1;e("h2","#give-mainform").after(n),a=e("#setting-error-give-matched-success-failure-page"),e(".notice-dismiss",a).click(function(){a.remove()}),e(this).val("")}}).change()}},r={init:function(){this.date_options(),this.donors_export(),this.recount_stats()},date_options:function(){e("#give-graphs-date-options").change(function(){var t=e(this);"other"===t.val()?e("#give-date-range-options").show():e("#give-date-range-options").hide()})},donors_export:function(){e("#give_customer_export_form").change(function(){var t=e(this),i=e("option:selected",t).val(),n=e("#give_customer_export_option");"0"===t.val()?n.show():n.hide();var a=e(".give_price_options_select");if(0!=parseInt(i)){var o={action:"give_check_for_form_price_variations",form_id:i,all_prices:!0};e.post(ajaxurl,o,function(t){a.remove(),e("#give_customer_export_form_chosen").after(t)})}else a.remove()})},recount_stats:function(){e("body").on("change","#recount-stats-type",function(){var t=e("#give-tools-recount-form"),i=e("option:selected",this).data("type"),n=e("#recount-stats-submit"),a=e("#tools-form-dropdown");if(t.find(".notice-wrap").remove(),n.removeClass("button-disabled").attr("disabled",!1),a.hide(),e(".give-recount-stats-descriptions span").hide(),"recount-form"===i)a.show(),a.find(".give-select-chosen").css({width:"auto","min-width":"250px"});else if("reset-stats"===i){t.append('<div class="notice-wrap"></div>');var o=t.find(".notice-wrap");o.html('<div class="notice notice-warning"><p><input type="checkbox" id="confirm-reset" name="confirm_reset_store" value="1" /> <label for="confirm-reset">'+give_vars.reset_stats_warn+"</label></p></div>"),n.addClass("button-disabled").attr("disabled","disabled")}else a.hide(),a.val(0);e("#"+i).show()}),e("body").on("change","#confirm-reset",function(){var t=e(this).is(":checked");t?e("#recount-stats-submit").removeClass("button-disabled").removeAttr("disabled"):e("#recount-stats-submit").addClass("button-disabled").attr("disabled","disabled")}),e("#give-tools-recount-form").submit(function(t){var i=e("#recount-stats-type").val(),n=e(this),a=e("option:selected",this).data("type");if("reset-stats"===a){var o=e("#confirm-reset").is(":checked");if(o)return!0;s=!0}n.find(".notice-wrap").remove(),n.append('<div class="notice-wrap"></div>');var r=n.find(".notice-wrap"),s=!1;if(null!==i&&0!==i||(r.html('<div class="updated error"><p>'+give_vars.batch_export_no_class+"</p></div>"),s=!0),"recount-form"===a){var c=e('select[name="form_id"]').val();0==c&&(r.html('<div class="updated error"><p>'+give_vars.batch_export_no_reqs+"</p></div>"),s=!0)}if(s)return n.find(".button-disabled").removeClass("button-disabled"),!1})}},s={init:function(){this.submit(),this.dismiss_message()},submit:function(){var t=this;e(document.body).on("submit",".give-export-form",function(i){i.preventDefault();var n=e(this).find('input[type="submit"]');if(!n.hasClass("button-disabled")){var a=e(this).serialize();n.addClass("button-disabled"),e(this).find(".notice-wrap").remove(),e(this).append('<div class="notice-wrap give-clearfix"><span class="spinner is-active"></span><div class="give-progress"><div></div></div></div>'),t.process_step(1,a,t)}})},process_step:function(t,i,n){e.ajax({type:"POST",url:ajaxurl,data:{form:i,action:"give_do_ajax_export",step:t},dataType:"json",success:function(t){if("done"==t.step||t.error||t.success){var a=e(".give-export-form").find(".give-progress").parent().parent(),o=a.find(".notice-wrap");if(a.find(".button-disabled").removeClass("button-disabled"),t.error){var r=t.message;o.html('<div class="updated error"><p>'+r+"</p></div>")}else if(t.success){var s=t.message;o.html('<div id="give-batch-success" class="updated notice is-dismissible"><p>'+s+'<span class="notice-dismiss"></span></p></div>')}else o.remove(),window.location=t.url}else e(".give-progress div").animate({width:t.percentage+"%"},50,function(){}),n.process_step(parseInt(t.step),i,n)}}).fail(function(t){window.console&&window.console.log&&console.log(t),e(".notice-wrap").append(t.responseText)})},dismiss_message:function(){e("body").on("click","#give-batch-success .notice-dismiss",function(){e("#give-batch-success").parent().slideUp("fast")})}},c=function(){e('select[name="give-payment-status"]').on("change",function(){var t=e(this).val();e(".give-donation-status").removeClass(function(e,t){return(t.match(/\bstatus-\S+/g)||[]).join(" ")}).addClass("status-"+t)})},d={init:function(){this.edit_customer(),this.add_email(),this.user_search(),this.remove_user(),this.cancel_edit(),this.change_country(),this.add_note(),this.delete_checked()},edit_customer:function(){e("body").on("click","#edit-customer",function(t){t.preventDefault(),e("#give-customer-card-wrapper .editable").hide(),e("#give-customer-card-wrapper .edit-item").fadeIn().css("display","block")})},user_search:function(){e("body").on("click.giveSelectUser",".give_user_search_results a",function(t){t.preventDefault();var i=e(this).data("userid");e('input[name="customerinfo[user_id]"]').val(i)})},remove_user:function(){e("body").on("click","#disconnect-customer",function(t){t.preventDefault();var i=e('input[name="customerinfo[id]"]').val(),n={give_action:"disconnect-userid",customer_id:i,_wpnonce:e("#edit-customer-info #_wpnonce").val()};e.post(ajaxurl,n,function(e){window.location.href=window.location.href},"json")})},cancel_edit:function(){e("body").on("click","#give-edit-customer-cancel",function(t){t.preventDefault(),e("#give-customer-card-wrapper .edit-item").hide(),e("#give-customer-card-wrapper .editable").show(),e(".give_user_search_results").html("")})},change_country:function(){e('select[name="customerinfo[country]"]').change(function(){var t=e(this),i={action:"give_get_states",country:t.val(),field_name:"customerinfo[state]"};return e.post(ajaxurl,i,function(t){"nostates"==t?e(':input[name="customerinfo[state]"]').replaceWith('<input type="text" name="'+i.field_name+'" value="" class="give-edit-toggles medium-text"/>'):e(':input[name="customerinfo[state]"]').replaceWith(t)}),!1})},add_note:function(){e("body").on("click","#add-customer-note",function(t){t.preventDefault();var i={give_action:"add-customer-note",customer_id:e("#customer-id").val(),customer_note:e("#customer-note").val(),add_customer_note_nonce:e("#add_customer_note_nonce").val()};if(i.customer_note)e.ajax({type:"POST",data:i,url:ajaxurl,success:function(t){e("#give-customer-notes").prepend(t),e(".give-no-customer-notes").hide(),e("#customer-note").val("")}}).fail(function(e){window.console&&window.console.log&&console.log(e)});else{var n=e("#customer-note").css("border-color");e("#customer-note").css("border-color","red"),setTimeout(function(){e("#customer-note").css("border-color",n)},500)}})},delete_checked:function(){e("#give-customer-delete-confirm").change(function(){var t=e("#give-customer-delete-records"),i=e("#give-delete-customer");e(this).prop("checked")?(t.attr("disabled",!1),i.attr("disabled",!1)):(t.attr("disabled",!0),t.prop("checked",!1),i.attr("disabled",!0))})},add_email:function(){e("#add-customer-email").length&&e(document.body).on("click","#add-customer-email",function(t){t.preventDefault();var i=e(this),n=i.parent();n.parent().find(".notice-wrap").remove(),n.find(".spinner").css("visibility","visible"),i.attr("disabled",!0);var a=n.find('input[name="customer-id"]').val(),o=n.find('input[name="additional-email"]').val(),r=n.find('input[name="make-additional-primary"]').is(":checked"),s=n.find('input[name="add_email_nonce"]').val(),c={give_action:"add_donor_email",customer_id:a,email:o,primary:r,_wpnonce:s};e.post(ajaxurl,c,function(e){!0===e.success?window.location.href=e.redirect:(i.attr("disabled",!1),n.after('<div class="notice-wrap"><div class="notice notice-error inline"><p>'+e.message+"</p></div></div>"),n.find(".spinner").css("visibility","hidden"))},"json")})}},l={init:function(){this.revoke_api_key(),this.regenerate_api_key()},revoke_api_key:function(){e("body").on("click",".give-revoke-api-key",function(e){return confirm(give_vars.revoke_api_key)})},regenerate_api_key:function(){e("body").on("click",".give-regenerate-api-key",function(e){return confirm(give_vars.regenerate_api_key)})}},u={init:function(){this.handle_metabox_tab_click(),this.setup_colorpicker_fields(),this.setup_media_fields(),this.setup_repeatable_fields(),this.handle_repeater_group_events(),this.handle_multi_levels_repeater_group_events()},handle_metabox_tab_click:function(){var t=e(".give-metabox-tabs a");if(t.on("click",function(i){i.preventDefault();var n=e(this).parent(),a=e("ul.give-metabox-sub-tabs",n),o=a.length,r=t.parents("li"),s=e("ul.give-metabox-sub-tabs"),c=e(this).parents("ul.give-metabox-sub-tabs").length;if(o){n.toggleClass("active"),a.toggleClass("give-hidden");var d=e("li.active","ul.give-metabox-sub-tabs");return s.not(a).addClass("give-hidden"),r.not(n).removeClass("active"),d.addClass("active"),!1}return c?c&&(e("ul.give-metabox-sub-tabs").addClass("give-hidden"),r.removeClass("active"),e(this).parents("ul.give-metabox-sub-tabs").removeClass("give-hidden").children("li").removeClass("active"),e(this).parents("li.has-sub-fields").addClass("active")):r.each(function(t,i){i=e(i),i.removeClass("active"),i.hasClass("has-sub-fields")&&e("ul.give-metabox-sub-tabs",i).addClass("give-hidden")}),e(this).parent().addClass("active"),e(".give_options_panel").addClass("give-hidden"),e(e(this).attr("href")).removeClass("give-hidden"),!1}),location.hash.length){var i=e('a[href="'+location.hash+'"]',".give-metabox-tabs");i.length&&i.trigger("click")}},setup_colorpicker_fields:function(){e(document).ready(function(){var t=e(".give-colorpicker");t.length&&t.each(function(t,i){var n=e(i);n.parents(".give-template").length||n.wpColorPicker()})})},setup_media_fields:function(){var t;e("body").on("click",".give-media-upload",function(i){return i.preventDefault(),window.give_media_uploader_input_field=e(this),t?void t.open():(t=wp.media.frames.file_frame=wp.media({title:give_vars.metabox_fields.media.button_title,button:{text:give_vars.metabox_fields.media.button_title},multiple:!1}),t.on("select",function(){var e=t.state().get("selection").first().toJSON(),i=window.give_media_uploader_input_field.prev(),n="id"===i.data("fvalue")?e.id:e.url;console.log(i),i.val(n)}),void t.open())})},setup_repeatable_fields:function(){jQuery(function(){jQuery(".give-repeatable-field-section").each(function(){var t=e(this),i={wrapper:".give-repeatable-fields-section-wrapper",container:".container",row:".give-row",add:".give-add-repeater-field-section-row",remove:".give-remove",move:".give-move",template:".give-template",confirm_before_remove_row:!0,confirm_before_remove_row_text:give_vars.confirm_before_remove_row_text,is_sortable:!0,before_add:null,after_add:v,before_remove:null,after_remove:p,sortable_options:{placeholder:"give-ui-placeholder-state-highlight",start:function(t,i){e("body").trigger("repeater_field_sorting_start",[i.item])},stop:function(t,i){e("body").trigger("repeater_field_sorting_stop",[i.item])},update:function(i,n){n.item.next().hasClass("give-template")&&n.item.next().after(n.item);var a=e(".give-row",t).not(".give-template");if(a.length){var o=1;a.each(function(t,i){var n=e(".give-field, label",e(i));n.length&&n.each(function(){var t=e(this).parents(".give-field-wrap"),i=e(this);e.each(this.attributes,function(e,n){var a=this.value.replace(/\[/g,"_").replace(/]/g,""),r=a+"_field",s="",c="";this.value&&(this.value=this.value.replace(/\[\d+\]/g,"["+(o-1)+"]"),c=this.value.replace(/\[/g,"_").replace(/]/g,""),t.hasClass(r)&&(s=c+"_field",t.removeClass(r).addClass(s)),a==i.attr("id")&&i.attr("id",c))})}),o++}),t.trigger("repeater_field_row_reordered",[n.item])}}}};jQuery(this).repeatable_fields(i)})})},handle_repeater_group_events:function(){var t=e(".give-repeatable-field-section"),i=e("body");i.on("click",".give-row-head button",function(){var t=e(this).closest("tr");t.toggleClass("closed"),e(".give-row-body",t).toggle()}),t.on("repeater_field_new_row_added repeater_field_row_deleted repeater_field_row_reordered",function(){_(e(this))}),i.on("repeater_field_sorting_start",function(t,i){var n=e(".wp-editor-area",i);n.length&&n.each(function(t,i){window.setTimeout(function(){tinyMCE.execCommand("mceRemoveEditor",!0,e(i).attr("id"))},300)})}),i.on("repeater_field_sorting_stop",function(t,i){var n=e(".wp-editor-area",i);n.length&&n.each(function(t,i){window.setTimeout(function(){var t=e(i).attr("id");tinyMCE.execCommand("mceAddEditor",!0,t),window.setTimeout(function(){switchEditors.go(t,"html"),e("#"+t+"-tmce").trigger("click")},100)},300)})}),t.each(function(t,i){var n=e(i);_(n),parseInt(n.data("close-tabs"))&&(e(".give-row-head button",n).trigger("click"),e(".give-template",n).removeClass("closed"),e(".give-template .give-row-body",n).show())}),t.on("repeater_field_new_row_added",function(t,i,n){e(".give-colorpicker",e(this)).each(function(t,i){var n=e(i);n.parents(".wp-picker-container").length||n.parents(".give-template").length||n.wpColorPicker()});var a=e("div[data-wp-editor]",n);a.length&&a.each(function(t,i){var n=e(i),a=e(".wp-editor-wrap",n),o=e("textarea",n),r="give_wysiwyg_unique_"+Math.random().toString().replace(".","_"),s=a.prev();o.attr("id",r),e.post(ajaxurl,{action:"give_load_wp_editor",wp_editor:n.data("wp-editor"),wp_editor_id:r,textarea_name:e("textarea",n).attr("name")},function(t){a.remove(),s.after(t),tinyMCEPreInit.qtInit[o.attr("id")]=e.extend(!0,tinyMCEPreInit.qtInit._give_agree_text,{id:r}),tinyMCEPreInit.mceInit[r]=e.extend(!0,tinyMCEPreInit.mceInit._give_agree_text,{body_class:r+" post-type-give_forms post-status-publish locale-"+tinyMCEPreInit.mceInit._give_agree_text.wp_lang_attr.toLowerCase(),selector:"#"+r}),tinymce.init(tinyMCEPreInit.mceInit[r]),quicktags(tinyMCEPreInit.qtInit[r]),QTags._buttonsInit(),window.setTimeout(function(){switchEditors.go(r,"html"),e("#"+r+"-tmce").trigger("click")},100),window.wpActiveEditor||(window.wpActiveEditor=r)})})})},handle_multi_levels_repeater_group_events:function(){var t=e("#_give_donation_levels_field");e("body").on("keyup",".give-multilevel-text-field",function(){var t=e(this).closest("tr"),i=e(".give-row-head h2 span",t),n=i.data("header-title");return(!e(this).val()||e(this).val()!==i.html())&&void(e(this).val()?i.html(n+": "+e(this).val()):i.html(n))}),e(".give-multilevel-text-field").each(function(t,i){if(t){var n=e(i),a=n.closest("tr"),o=e(".give-row-head h2 span",a),r=o.data("header-title");return(!n.val()||n.val()!==o.html())&&void(n.val()?o.html(r+": "+n.val()):o.html(r))}}),t.on("repeater_field_row_deleted",function(){var t=e(this);window.setTimeout(function(){var i=t,n=e(".give-row",i).not(".give-template"),a=e(".give-give_default_radio_inline",n),o=n.length;1===o&&a.prop("checked",!0)},200)}),t.on("repeater_field_new_row_added",function(t,i,n){var a=e(this),o=0;window.setTimeout(function(){e(".give-give_default_radio_inline",a).is(":checked")===!1&&e(".give-row",a).not(".give-template").first().find(".give-give_default_radio_inline").prop("checked",!0)},200),e('input[type="hidden"].give-levels_id',a).each(function(t,i){var n=e(i),a=parseInt(n.val());o<a&&(o=a)}),e('input[type="hidden"].give-levels_id',n).val(++o)})}},v=function(t,i){var n=e(t).attr("data-rf-row-count"),a=e(t),o=a.parents(".give-repeatable-field-section");n++,e("*",i).each(function(){e.each(this.attributes,function(e,t){this.value=this.value.replace("{{row-count-placeholder}}",n-1)})}),e(t).attr("data-rf-row-count",n),o.trigger("repeater_field_new_row_added",[t,i])},p=function(t){var i=e(t),n=i.parents(".give-repeatable-field-section"),a=e(t).attr("data-rf-row-count");i.attr("data-rf-row-count",--a),n.trigger("repeater_field_row_deleted")},_=function(t){if(parseInt(t.data("group-numbering"))){var i=e(".give-row-head h2 span",t),n=i.data("header-title");i.each(function(t,i){var a=e(i);a.parents(".give-template").length||a.html(n+": "+t)})}},g=function(){jQuery('[data-tooltip!=""]').qtip({content:{attr:"data-tooltip"},style:{classes:"qtip-rounded qtip-tipsy"},events:{show:function(t,i){var n=e(i.elements.target[0]);n.qtip("option","position.my",void 0==n.data("tooltip-my-position")?"bottom center":n.data("tooltip-my-position")),n.qtip("option","position.at",void 0==n.data("tooltip-target-position")?"top center":n.data("tooltip-target-position"))}}})},h={init:function(){this.handle_bulk_delete()},handle_bulk_delete:function(){var t=e("#give-payments-filter");t.on("submit",function(t){var i=e('select[name="action"]',e(this)).val(),n=[],a="";switch(e('input[name="payment[]"]:checked',e(this)).each(function(t,i){n.push(e(this).val())}),n=n.length.toString(),i){case"delete":if(!parseInt(n))return alert(give_vars.bulk_action["delete"].zero_payment_selected),!1;if(a=1<n?give_vars.bulk_action["delete"].delete_payments:give_vars.bulk_action["delete"].delete_payment,!window.confirm(a.replace("{payment_count}",n)))return!1;break;case"resend-receipt":if(!parseInt(n))return alert(give_vars.bulk_action.resend_receipt.zero_recipient_selected),!1;if(a=1<n?give_vars.bulk_action.resend_receipt.resend_receipts:give_vars.bulk_action.resend_receipt.resend_receipt,!window.confirm(a.replace("{payment_count}",n)))return!1}return!0})}};e(function(){function v(t){t.each(function(){e(this).qtip({style:"qtip-dark qtip-tipsy",content:{text:give_vars.price_format_guide.trim()},show:"",position:{my:"bottom center",at:"top center"}})})}i(),c(),n(),a.init(),o.init(),r.init(),d.init(),l.init(),s.init(),u.init(),h.init(),g(),e("a.give-rating-link").click(function(){jQuery(this).parent().text(jQuery(this).data("rated"))}),e(".give-ajax-user-search").on("keyup",function(){var t=e(this).val(),i="";e(this).data("exclude")&&(i=e(this).data("exclude")),e(".give-ajax").show(),data={action:"give_search_users",user_name:t,exclude:i},document.body.style.cursor="wait",e.ajax({type:"POST",data:data,dataType:"json",url:ajaxurl,success:function(t){e(".give-ajax").hide(),e(".give_user_search_results").removeClass("hidden"),e(".give_user_search_results span").html(""),e(t.results).appendTo(".give_user_search_results span"),document.body.style.cursor="default"}})}),e("body").on("click.giveSelectUser",".give_user_search_results span a",function(t){t.preventDefault();var i=e(this).data("login");e(".give-ajax-user-search").val(i),e(".give_user_search_results").addClass("hidden"),e(".give_user_search_results span").html("")}),e("body").on("click.giveCancelUserSearch",".give_user_search_results a.give-ajax-user-cancel",function(t){t.preventDefault(),e(".give-ajax-user-search").val(""),e(".give_user_search_results").addClass("hidden"),e(".give_user_search_results span").html("")});var p=e("input.give-money-field, input.give-price-field"),_=give_vars.thousands_separator,f=give_vars.decimal_separator,m="",b="",w="",y=f===_?1:0;v(p),e("#_give_donation_levels_repeat").on("click","button.cmb-add-group-row",function(){window.setTimeout(function(){p=e("input.give-money-field, input.give-price-field"),v(p)},100)}),e("#poststuff").on("keyup","input.give-money-field, input.give-price-field",function(){m=(e(this).val().match(new RegExp(_,"g"))||[]).length,b=(e(this).val().match(new RegExp("[a-z]","g"))||[]).length,-1!==e(this).val().indexOf(_)&&y<m?e(this).qtip("show"):b?e(this).qtip("show"):e(this).qtip("hide"),m=b=""}),e("#poststuff").on("focusout","input.give-money-field, input.give-price-field",function(){return w=t(e(this).val(),!1),parseInt(w)?(w=w.replace(".",f),-1!==w.indexOf("-")&&(w=w.replace("-","")),void e(this).val(w)):(e(this).val(""),!1)}),e(".give-settings-page").on("click","#give-show-sub-nav",function(t){t.preventDefault();var i=e(this).next();return i.is(":hover")||i.toggleClass("give-hidden"),!1}).on("blur","#give-show-sub-nav",function(){var t=e(this).next();t.is(":hover")||t.addClass("give-hidden")}),give_render_responsive_tabs()})}(jQuery),jQuery(window).resize(function(){give_render_responsive_tabs()});