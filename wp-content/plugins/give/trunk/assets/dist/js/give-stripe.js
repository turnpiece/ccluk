!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=490)}({21:function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},490:function(e,t,r){e.exports=r(871)},871:function(e,t,r){"use strict";r.r(t);var n=r(9),a=r.n(n),i=r(21),l=r.n(i),o=function(){function e(t){a()(this,e),t&&(this.formElement=t,this.publishableKey=t.getAttribute("data-publishable-key"),this.accountId=t.getAttribute("data-account")?t.getAttribute("data-account"):"",this.idPrefix=t.getAttribute("data-id")?t.getAttribute("data-id"):"",this.locale=give_stripe_vars.preferred_locale,this.fieldsFormat=give_stripe_vars.cc_fields_format,this.isMounted=!1,this.fontStyles=[],0!==Object.keys(give_stripe_vars.element_font_styles).length&&this.fontStyles.push(give_stripe_vars.element_font_styles))}return l()(e,[{key:"setupStripeElement",value:function(){var e={};return 0!==this.accountId.trim().length&&(e={stripeAccount:this.accountId}),Stripe(this.publishableKey,e)}},{key:"getElements",value:function(e){var t={locale:this.locale};return this.fontStyles.length>0&&(t={fonts:this.fontStyles,locale:this.locale}),e.elements(t)}},{key:"createElement",value:function(e,t){var r=[],n=this.getElementsToMountOn(),a={style:this.getElementStyles(),classes:this.getElementClasses()};return n.forEach((function(t,n){"card"===t[0]?a.hidePostalCode=!!give_stripe_vars.checkout_address:"cardNumber"===t[0]?a.placeholder=give_stripe_vars.card_number_placeholder_text:"cardCvc"===t[0]?a.placeholder=give_stripe_vars.card_cvc_placeholder_text:delete a.placeholder,r.push(e.create(t[0],a))})),"cardNumber"===n[0][0]&&r[0].addEventListener("change",(function(e){var r="diners"===e.brand?"dinersclub":e.brand;t.querySelector(".card-type").className="card-type "+r})),r}},{key:"destroyElement",value:function(e){e.forEach((function(e,t){e.destroy()}))}},{key:"getElementStyles",value:function(){return{base:give_stripe_vars.element_base_styles,complete:give_stripe_vars.element_complete_styles,empty:give_stripe_vars.element_empty_styles,invalid:give_stripe_vars.element_invalid_styles}}},{key:"getElementClasses",value:function(){return{focus:"focus",empty:"empty",invalid:"invalid"}}},{key:"getElementsToMountOn",value:function(){var e={cardNumber:"#give-card-number-field-".concat(this.idPrefix),cardCvc:"#give-card-cvc-field-".concat(this.idPrefix),cardExpiry:"#give-card-expiration-field-".concat(this.idPrefix)};return"single"===this.fieldsFormat&&(e={card:"#give-stripe-single-cc-fields-".concat(this.idPrefix)}),Object.entries(e)}},{key:"mountElement",value:function(e){var t=this.getElementsToMountOn();Array.from(e).forEach((function(e,r){e.mount(t[r][1])}))}},{key:"unMountElement",value:function(e){var t=this.getElementsToMountOn();Array.from(e).forEach((function(e,r){e.unmount(t[r][1])}))}},{key:"createPaymentMethod",value:function(e,t,r){var n={name:"",email:""},a=e.querySelector('input[name="give_first"]').value,i=e.querySelector('input[name="give_last"]').value,l=e.querySelector('input[name="give_email"]').value;if(e.querySelector("[id^=give-purchase-button]").setAttribute("disabled","disabled"),n.name="".concat(a," ").concat(i),n.email=l,give_stripe_vars.checkout_address&&!give_stripe_vars.stripe_card_update){var o=e.querySelector(".card-address").value,c=e.querySelector(".card-address-2").value,u=e.querySelector(".card-city").value,s=e.querySelector(".card_state").value,d=e.querySelector(".card-zip").value,v=e.querySelector(".billing-country").value;n.address={line1:o||"",line2:c||"",city:u||"",state:s||"",postal_code:d||"",country:v||""}}t.createPaymentMethod({type:"card",card:r[0],billing_details:n}).then((function(t){if(t.error){var r=e.getElementById("give-purchase-button"),n='<div class="give_errors"><p class="give_error">'.concat(t.error.message,"</p></div>");r.setAttribute("disabled",!1),e.getElementById("give-stripe-payment-errors-".concat(formId)).innerHTML=n,give_global_vars.complete_purchase?e.value=give_global_vars.complete_purchase:e.value=e.getAttribute("data-before-validation-label")}else e.querySelector('input[name="give_stripe_payment_method"]').value=t.paymentMethod.id,e.submit()}))}},{key:"triggerStripeModal",value:function(e,t,r,n){var a=e.querySelector('input[name="give-form-id-prefix"]'),i=e.querySelector("#give-stripe-checkout-modal-donate-button-".concat(a.value)),l=e.querySelector('input[name="card_name"]'),o={};n.forEach((function(e){o.cardName=!1,e.addEventListener("ready",(function(e){o[e.elementType]=!1,o.cardName="card"===e.elementType})),e.addEventListener("change",(function(e){o[e.elementType]=e.complete,Object.values(o).every((function(e){return!0===e}))?i.removeAttribute("disabled"):i.setAttribute("disabled","disabled")}))})),null!==l&&l.addEventListener("keyup",(function(e){o.cardName=""!==e.target.value,Object.values(o).every((function(e){return!0===e}))?i.removeAttribute("disabled"):i.setAttribute("disabled","disabled")})),null!==i&&i.addEventListener("click",(function(a){var l=a.target,o=l.nextElementSibling;i.getAttribute("data-is_legacy_form")?(l.value=give_global_vars.purchase_loading,o.style.display="inline-block"):(l.value="",o.classList.add("sequoia-loader"),o.classList.add("spinning"),o.classList.remove("give-loading-animation")),t.createPaymentMethod(e,r,n),a.preventDefault()}))}}]),e}();document.addEventListener("DOMContentLoaded",(function(e){Array.from(document.querySelectorAll(".give-form-wrap")).forEach((function(e){var t=e.querySelector(".give-form");if(null!==t){var r=t.querySelector('input[name="give-gateway"]'),n=t.querySelector('input[name="give-form-id-prefix"]'),a=new o(t),i=a.setupStripeElement(),l=a.getElements(i),c=a.createElement(l,t);"stripe"!==r.value&&"stripe_checkout"!==r.value||a.mountElement(c),document.addEventListener("give_gateway_loaded",(function(e){var r=e.detail.selectedGateway,n=a.getElements(i);c=a.createElement(n,t),"stripe"===r||"stripe_checkout"===r?a.mountElement(c):a.unMountElement(c),"stripe_checkout"===r&&a.triggerStripeModal(t,a,i,c)})),"stripe_checkout"===r.value&&a.triggerStripeModal(t,a,i,c),t.onsubmit=function(e){var r=t.querySelector(".give-gateway:checked").value;if("stripe"===r)a.createPaymentMethod(t,i,c),e.preventDefault();else if("stripe_checkout"===r){var l=t.querySelector(".give-stripe-checkout-modal"),o=l.querySelector(".give-stripe-checkout-donation-amount"),u=l.querySelector(".give-stripe-checkout-donor-email"),s=t.querySelector(".give-final-total-amount").textContent,d=t.querySelector('input[name="give_email"]').value,v=t.querySelector('input[name="give_validate_stripe_payment_fields"]');l.classList.add("give-stripe-checkout-show-modal"),null!==o&&(o.innerHTML=s),null!==u&&(u.innerHTML=d),v.setAttribute("value","1");var m=t.querySelector(".give-stripe-checkout-modal-close");null!==m&&m.addEventListener("click",(function(e){t.querySelector("#give-stripe-checkout-modal-".concat(n.value)).classList.remove("give-stripe-checkout-show-modal");var r=t.querySelector(".give-submit");null!==r&&(r.value=r.getAttribute("data-before-validation-label"),r.nextElementSibling.style.display="none",r.removeAttribute("disabled"),t.querySelector('input[name="give_validate_stripe_payment_fields"]').setAttribute("value","0")),e.preventDefault()})),e.preventDefault()}}}}))}))},9:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}}});