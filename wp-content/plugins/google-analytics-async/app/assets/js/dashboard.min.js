(function(t){function s(s){for(var a,r,o=s[0],u=s[1],l=s[2],d=0,p=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&p.push(i[r][0]),i[r]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(t[a]=u[a]);c&&c(s);while(p.length)p.shift()();return n.push.apply(n,l||[]),e()}function e(){for(var t,s=0;s<n.length;s++){for(var e=n[s],a=!0,o=1;o<e.length;o++){var u=e[o];0!==i[u]&&(a=!1)}a&&(n.splice(s--,1),t=r(r.s=e[0]))}return t}var a={},i={dashboard:0},n=[];function r(s){if(a[s])return a[s].exports;var e=a[s]={i:s,l:!1,exports:{}};return t[s].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=t,r.c=a,r.d=function(t,s,e){r.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:e})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,s){if(1&s&&(t=r(t)),8&s)return t;if(4&s&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var a in t)r.d(e,a,function(s){return t[s]}.bind(null,a));return e},r.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(s,"a",s),s},r.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},r.p="/app/assets/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=s,o=o.slice();for(var l=0;l<o.length;l++)s(o[l]);var c=u;n.push([0,"chunk-vendors","chunk-common"]),e()})({0:function(t,s,e){t.exports=e("89f2")},"0218":function(t,s,e){},"6c4d":function(t,s,e){"use strict";var a=e("0218"),i=e.n(a);i.a},"89f2":function(t,s,e){"use strict";e.r(s);e("e260"),e("e6cf"),e("cca6"),e("a79d");var a=e("2b0e"),i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"sui-wrap",attrs:{id:"beehive-wrap"}},[e("sui-header",{attrs:{title:t.$i18n.title.dashboard},scopedSlots:t._u([{key:"right",fn:function(){return[e("sui-calendar-range",{attrs:{id:"beehive-stats-datepicker",periods:t.$vars.dates.periods,"start-date":t.$vars.dates.start_date,"end-date":t.$vars.dates.end_date,"selected-label":t.$vars.dates.selected_label},on:{periodChange:t.changePeriod}})]},proxy:!0}])}),e("summary-widget",{attrs:{stats:t.stats.summary,loading:t.loading}}),e("div",{staticClass:"sui-row"},[e("div",{staticClass:"sui-col-md-6"},[e("statistics-widget",{attrs:{stats:t.stats.list,loading:t.loading}})],1),e("div",{staticClass:"sui-col-md-6"},[e("gtm-widget")],1)]),e("sui-footer"),t.showOnboarding?e("onboarding"):t.showWelcome?e("welcome-modal"):t._e()],1)},n=[],r=e("7f2d"),o=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("sui-box",{attrs:{titleIcon:"gtm",title:t.$i18n.title.gtm_box},scopedSlots:t._u([{key:"body",fn:function(){return[e("p",[t._v(t._s(t.$i18n.desc.gtm_box))]),t.isActive?t._e():e("account-inactive"),t.isActive&&!t.isSetup?e("sui-notice",{attrs:{type:"warning"}},[e("p",[t._v(t._s(t.$i18n.notice.gtm_not_setup))]),e("p",[e("a",{staticClass:"sui-button",attrs:{role:"button",href:t.$vars.urls.gtm_account}},[t._v(" "+t._s(t.$i18n.button.finish_setup)+" ")])])]):t._e()]},proxy:!0},t.isActive&&t.isSetup?{key:"outside",fn:function(){return[e("account-active")]},proxy:!0}:null],null,!0)})},u=[],l=e("e5d1"),c=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("fragment",[e("table",{staticClass:"sui-table beehive-outside-table"},[e("tbody",[e("tr",[e("th",{staticClass:"content-title"},[t._v(" "+t._s(t.$i18n.label.gtm_account)+" ")]),e("td",{staticClass:"content-center"},[e("span",{staticClass:"sui-tag sui-tag-blue sui-tag-sm"},[t._v(" "+t._s(t.$i18n.label.gtm_active)+" ")])]),e("td",{staticClass:"content-right"},[e("a",{staticClass:"sui-button-icon",attrs:{role:"button",href:t.$vars.urls.gtm_account}},[e("i",{staticClass:"sui-icon-widget-settings-config",attrs:{"aria-hidden":"true"}}),e("span",{staticClass:"sui-screen-reader-text"},[t._v(" "+t._s(t.$i18n.button.configure)+" ")])])])]),e("tr",[e("th",{staticClass:"content-title"},[t._v(" "+t._s(t.$i18n.label.gtm_variables)+" ")]),e("td",{staticClass:"content-center"},[t._v(t._s(t.varsCount))]),e("td",{staticClass:"content-right"},[e("a",{staticClass:"sui-button-icon",attrs:{role:"button",href:t.$vars.urls.gtm_settings}},[e("i",{staticClass:"sui-icon-widget-settings-config",attrs:{"aria-hidden":"true"}}),e("span",{staticClass:"sui-screen-reader-text"},[t._v(" "+t._s(t.$i18n.button.configure)+" ")])])])])]),e("tfoot",[e("tr",[e("td",{attrs:{colspan:"3"}},[e("a",{staticClass:"sui-button sui-button-ghost",attrs:{href:t.$vars.urls.gtm_settings}},[e("i",{staticClass:"sui-icon-eye",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$i18n.button.configure)+" ")])])])])])])},d=[],p=(e("b64b"),{name:"AccountActive",computed:{varsCount:function(){var t=this.getOption("enabled","gtm"),s=this.getOption("custom","gtm");return Object.keys(t).length+Object.keys(s).length}}}),h=p,g=e("2877"),_=Object(g["a"])(h,c,d,!1,null,null,null),m=_.exports,b=e("5659"),v=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("a",{staticClass:"sui-button sui-button-blue",attrs:{role:"button",href:t.$vars.urls.gtm_account}},[t._v(" "+t._s(t.$i18n.button.activate)+" ")])},f=[],w={name:"AccountInactive"},y=w,$=Object(g["a"])(y,v,f,!1,null,null,null),C=$.exports,S={name:"GtmWidget",props:["stats","loading"],components:{SuiBox:l["a"],SuiNotice:b["a"],AccountActive:m,AccountInactive:C},computed:{isActive:function(){return this.getOption("active","gtm")},isSetup:function(){return!!this.getOption("container","gtm")}}},O=S,x=Object(g["a"])(O,o,u,!1,null,null,null),k=x.exports,j=e("23f7"),T=e("6e06"),E=e("2323"),M=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{class:t.summaryClass},[e("div",{staticClass:"sui-summary-image-space",style:t.reBrandedStyle,attrs:{"aria-hidden":"true"}}),e("div",{staticClass:"sui-summary-segment"},[t.loading?e("p",{staticClass:"beehive-loading-text"},[e("span",{staticClass:"sui-icon-loader sui-loading",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$i18n.label.fetching_data)+" ")]):t._e(),e("div",{staticClass:"sui-summary-details"},[e("span",{staticClass:"sui-summary-large"},[t._v(" "+t._s(t.stats.pageviews.value||"-")+" ")]),e("span",{staticClass:"sui-summary-percent"},[t.pageViewsTrend<0?e("span",{staticClass:"beehive-stats-trend beehive-red"},[e("i",{staticClass:"sui-icon-arrow-down sui-sm",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(Math.abs(t.pageViewsTrend))+"% ")]):t.pageViewsTrend>0?e("span",{staticClass:"beehive-stats-trend beehive-green"},[e("i",{staticClass:"sui-icon-arrow-up sui-sm",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(Math.abs(t.pageViewsTrend))+"% ")]):0===t.pageViewsTrend?e("span",[t._v("0%")]):t._e()]),e("span",{staticClass:"sui-summary-sub"},[t._v(t._s(t.$i18n.label.pageviews))]),e("span",{staticClass:"sui-summary-detail"},[t._v(" "+t._s(t.stats.newUsers.trend||"")+" "),t.newUsersTrend<0?e("span",{staticClass:"beehive-stats-trend beehive-red"},[e("i",{staticClass:"sui-icon-arrow-down sui-sm",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(Math.abs(t.newUsersTrend))+"% ")]):t.newUsersTrend>0?e("span",{staticClass:"beehive-stats-trend beehive-green"},[e("i",{staticClass:"sui-icon-arrow-up sui-sm",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(Math.abs(t.newUsersTrend))+"% ")]):0===t.newUsersTrend?e("span",[t._v("0%")]):t._e()]),e("span",{staticClass:"sui-summary-sub"},[t._v(t._s(t.$i18n.label.new_users))])])]),e("div",{staticClass:"sui-summary-segment"},[e("ul",{staticClass:"sui-list"},[e("li",[e("span",{staticClass:"sui-list-label"},[t._v(" "+t._s(t.$i18n.label.top_page)+" ")]),e("span",{staticClass:"sui-list-detail",domProps:{innerHTML:t._s(t.stats.page.anchor||t.$i18n.label.none)}})]),e("li",[e("span",{staticClass:"sui-list-label"},[t._v(" "+t._s(t.$i18n.label.top_search_engine)+" ")]),e("span",{staticClass:"sui-list-detail"},[t._v(" "+t._s(t.stats.searchEngine.name||t.$i18n.label.none)+" ")])]),e("li",[e("span",{staticClass:"sui-list-label"},[t._v(" "+t._s(t.$i18n.label.top_medium)+" ")]),e("span",{staticClass:"sui-list-detail"},[t._v(" "+t._s(t.stats.medium.name||t.$i18n.label.none)+" ")])])])])])},P=[],W={name:"SummaryWidget",props:["stats","loading"],computed:{pageViewsTrend:function(){return this.stats.pageviews.trend||""},newUsersTrend:function(){return this.stats.newUsers.trend||""},summaryClass:function(){return{"sui-box":!0,"sui-summary":!0,"sui-unbranded":this.$vars.whitelabel.is_unbranded,"sui-rebranded":this.$vars.whitelabel.is_rebranded,"beehive-loading":this.loading}},reBrandedStyle:function(){if(this.$vars.whitelabel.is_rebranded)return{"background-image":"url("+this.$vars.whitelabel.custom_image+")"}}}},A=W,U=Object(g["a"])(A,M,P,!1,null,null,null),V=U.exports,N=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("sui-box",{attrs:{id:"beehive-widget-stats",titleIcon:"graph-line","aria-live":"polite",loading:t.loading,title:t.$i18n.title.statistics_box},scopedSlots:t._u([{key:"body",fn:function(){return[t.loading?e("p",{staticClass:"beehive-loading-text"},[e("span",{staticClass:"sui-icon-loader sui-loading",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$i18n.label.fetching_data)+" ")]):t._e(),e("p",[t._v(t._s(t.$i18n.desc.statistics_box))]),t.isConnected||t.canGetStats?t.isEmpty?e("sui-notice",{attrs:{type:"info"}},[e("p",[t._v(t._s(t.$i18n.notice.no_data))])]):t._e():e("fragment",[t.isNetwork()?e("sui-notice",{attrs:{type:"info"}},[e("p",[t._v(t._s(t.$i18n.notice.auth_required_network))])]):e("sui-notice",{attrs:{type:"info"}},[e("p",[t._v(t._s(t.$i18n.notice.auth_required))])]),e("a",{staticClass:"sui-button sui-button-blue",attrs:{role:"button",href:t.$vars.urls.accounts}},[e("i",{staticClass:"sui-icon-wrench-tool",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$i18n.label.configure_account)+" ")]),e("a",{staticClass:"sui-button sui-button-ghost",attrs:{role:"button",href:t.$vars.urls.ga_account}},[t._v(" "+t._s(t.$i18n.label.add_tracking_id)+" ")])],1)]},proxy:!0},{key:"outside",fn:function(){return[t.canGetStats&&!t.isEmpty?e("stats-list",{attrs:{stats:t.stats}}):t._e()]},proxy:!0}])})},G=[],I=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("table",{staticClass:"beehive-table"},[e("tbody",t._l(t.stats,(function(s,a){return e("fragment",{key:a},[t.canShow(a)?e("tr",[e("td",{staticClass:"beehive-stats-title"},[t._v(t._s(t.getTitle(a)))]),s.trend<0&&"bounce_rates"===a?e("td",{staticClass:"beehive-stats-trend beehive-green"},[e("i",{staticClass:"sui-icon-arrow-down sui-sm",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(Math.abs(s.trend))+"% ")]):s.trend<0?e("td",{staticClass:"beehive-stats-trend beehive-red"},[e("i",{staticClass:"sui-icon-arrow-down sui-sm",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(Math.abs(s.trend))+"% ")]):s.trend>0&&"bounce_rates"===a?e("td",{staticClass:"beehive-stats-trend beehive-red"},[e("i",{staticClass:"sui-icon-arrow-up sui-sm",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(s.trend)+"% ")]):s.trend>0?e("td",{staticClass:"beehive-stats-trend beehive-green"},[e("i",{staticClass:"sui-icon-arrow-up sui-sm",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(s.trend)+"% ")]):e("td",{staticClass:"beehive-stats-trend"},[t._v("0%")]),e("td",{staticClass:"beehive-stats-value"},"bounce_rates"===a?[t._v(" "+t._s(s.value)+"% ")]:[t._v(t._s(s.value))])]):t._e()])})),1),e("tfoot",[e("tr",[e("td",{attrs:{colspan:"5"}},[e("a",{staticClass:"sui-button sui-button-ghost",attrs:{href:t.$vars.urls.statistics}},[e("i",{staticClass:"sui-icon-eye",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$i18n.label.view_full_report)+" ")])])])])])},L=[],B=e("3f08"),q={name:"StatsList",props:["stats"],components:{Fragment:B["a"]},data:function(){return{titles:{sessions:this.$i18n.label.sessions,users:this.$i18n.label.users,pageviews:this.$i18n.label.pageviews,page_sessions:this.$i18n.label.page_sessions,average_sessions:this.$i18n.label.average_sessions,bounce_rates:this.$i18n.label.bounce_rates}}},computed:{isEmpty:function(){return Object.keys(this.stats).length<=0}},methods:{canShow:function(t){return this.titles.hasOwnProperty(t)},getTitle:function(t){return this.titles[t]}}},D=q,F=Object(g["a"])(D,I,L,!1,null,null,null),H=F.exports,J={name:"StatisticsWidget",props:["stats","loading"],components:{SuiBox:l["a"],SuiNotice:b["a"],StatsList:H},computed:{isConnected:function(){return this.$store.state.helpers.google.logged_in},canGetStats:function(){return this.$moduleVars.can_get_stats||this.isConnected},isEmpty:function(){return Object.keys(this.stats).length<=0}},methods:{}},R=J,z=Object(g["a"])(R,N,G,!1,null,null,null),K=z.exports,Q=e("d5c7"),X=e("e94b"),Y={name:"App",components:{GtmWidget:k,SuiHeader:T["a"],SuiFooter:E["a"],Onboarding:j["a"],WelcomeModal:X["a"],SummaryWidget:V,StatisticsWidget:K,SuiCalendarRange:Q["a"]},data:function(){return{loading:!1,periods:[],dateStart:this.$vars.dates.start_date,dateEnd:this.$vars.dates.end_date,stats:{summary:{pageviews:{},page:{},searchEngine:{},medium:{},newUsers:{}},list:{}}}},mounted:function(){this.getSummary()},created:function(){var t=this;this.$root.$on("googleLoginUpdate",(function(s){t.setOption("google_auth_redirect_success","misc",0),t.$store.dispatch("helpers/updateGoogleLogin",{reInit:!0,status:s})})),this.$root.$on("onboardingComplete",(function(s){""!==t.getOption("account_id","google","")&&s&&t.$root.$emit("showTopNotice",{dismiss:!0,message:t.sprintf(t.$i18n.notice.account_setup,t.$vars.urls.statistics)}),t.getSummary()})),this.$root.$on("googleConnectProcessed",(function(s){s.success&&t.$store.dispatch("helpers/updateGoogleProfiles",{reInit:!0})}))},computed:{canGetStats:function(){return this.$moduleVars.can_get_stats},isConnected:function(){return this.$store.state.helpers.google.logged_in},showOnboarding:function(){return!this.getOption("onboarding_done","misc")},showWelcome:function(){return!this.showOnboarding&&(this.isMultisite()&&this.isNetworkWide()&&this.isNetwork()?this.getOption("show_welcome","misc",0,!0)>0:(!this.isMultisite()||!this.isNetworkWide())&&this.getOption("show_welcome","misc")>0)}},methods:{getSummary:function(){var t=this;(this.canGetStats||this.isConnected)&&(this.loading=!0,Object(r["a"])({path:"stats/summary",params:{from:this.dateStart,to:this.dateEnd,network:this.isNetwork()?1:0}}).then((function(s){s.success&&s.data&&s.data.stats&&s.data.stats.summary&&(t.stats.list=s.data.stats.summary,t.setupSummary(s.data.stats)),t.loading=!1})))},setupSummary:function(t){this.stats.summary={pageviews:t.summary.pageviews,page:t.page,searchEngine:t.search_engine,medium:t.medium,newUsers:t.summary.new_users}},changePeriod:function(t){this.dateStart=t.startDate,this.dateEnd=t.endDate,this.getSummary()}}},Z=Y,tt=(e("6c4d"),Object(g["a"])(Z,i,n,!1,null,null,null)),st=tt.exports,et=e("9d51"),at=e("e19f"),it=e("5b5e");a["a"].config.productionTip=!1,a["a"].mixin({methods:{sprintf:at["sprintf"],getOption:it["b"],setOption:it["l"],saveOptions:it["k"],isNetwork:it["f"],isMultisite:it["e"],isSubsite:it["h"],isNetworkWide:it["g"]}}),a["a"].prototype.$i18n=window.beehiveI18n,a["a"].prototype.$vars=window.beehiveVars,a["a"].prototype.$moduleVars=window.beehiveModuleVars,a["a"].use(B["b"].Plugin),new a["a"]({render:function(t){return t(st)},store:et["a"]}).$mount("#beehive-dashboard-app")}});