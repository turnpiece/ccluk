!function(e){var i={};function t(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var o in e)t.d(n,o,function(i){return e[i]}.bind(null,o));return n},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},t.p="",t(t.s=19)}([function(e,i){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={};!function(e){"use strict";n={vars:window.beehive_vars,addNotice:function(e,i,t){t.length>0&&t.html(this.notice(e,i))},removeNotice:function(e){e.length>0&&e.html("")},notice:function(e,i){var t='<div class="sui-notice sui-notice-'+e+'"><p>';return t+=i,t+="</p>"},redirect:function(e){e?window.location.href=e:window.location.reload()},nonce:function(){if(void 0!==window.beehive_vars&&void 0!==window.beehive_vars.nonce)return window.beehive_vars.nonce;if(void 0!==window.beehive_notice_vars&&void 0!==window.beehive_notice_vars.nonce)return window.beehive_notice_vars.nonce;var i=e("#beehive_admin_nonce");return i.length>0?i.val():""},isNetwork:function(){if(void 0!==window.beehive_vars)return window.beehive_vars.network;if(void 0!==window.beehive_notice_vars)return window.beehive_notice_vars.network;var i=e("#beehive_admin_type");return i.length>0&&i.val>0},formData:function(e){return e.length>0?e.serialize()+"&beehive_nonce="+this.nonce()+"&network="+this.isNetwork():[]},setupFormData:function(e){return"object"===t(e)&&(e.beehive_nonce=this.nonce(),e.network=1==this.isNetwork()?1:0),e},checkedValue:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.is(":checked")?e.val():i},isEmpty:function(e){return!e||0===e.length},setError:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.vars.required;e.length>0&&e.closest(".sui-form-field").addClass("sui-form-field-error").find(".sui-error-message").html(i)},unsetErrors:function(){e(".sui-form-field").removeClass("sui-form-field-error"),e(".sui-error-message").html("")}}}(jQuery),window.BeehiveHelper=n},,,,,,,,,,,,,,,,,,,function(e,i,t){var n=n||{};window.BeehiveAdmin=n,t(0),t(20),t(27)},function(e,i,t){window.BeehiveAdmin.Settings=BeehiveAdmin.Settings||{},t(21),t(22),t(23),t(24)},function(e,i){!function(e){"use strict";BeehiveAdmin.Settings.Reports={selector:e("#beehive-reports-role"),children:e(".beehive-reports-children"),init:function(){this.bindChange()},bindChange:function(){var i=this;i.selector.on("change",(function(){i.showItem(e(this).val())}))},showItem:function(i){this.children.addClass("sui-hidden"),e("#beehive-reports-settings-"+i).removeClass("sui-hidden")}},window.addEventListener("load",(function(){return BeehiveAdmin.Settings.Reports.init()}))}(jQuery)},function(e,i){!function(e){"use strict";BeehiveAdmin.Settings.Tracking={submit:e("#beehive-settings-submit"),input:e("#beehive-settings-tracking-code-manual"),auto:e("#beehive-tracking-code-auto"),manual:e("#beehive-tracking-code-manual"),notice:e("#beehive-tracking-code-notice"),init:function(){var e=this;this.input.length&&this.submit.on("click",(function(i){e.validateGA(i)})),this.auto.length&&this.auto.find(".sui-label-link").on("click",(function(){e.auto.addClass("sui-hidden"),e.manual.removeClass("sui-hidden")})),this.manual.length&&this.manual.find(".sui-label-link").on("click",(function(){e.auto.removeClass("sui-hidden"),e.manual.addClass("sui-hidden")}))},validateGA:function(e){BeehiveHelper.unsetErrors(),/^ua-\d{4,9}-\d{1,4}$/i.test(this.input.val().toString())||""===this.input.val()?this.notice.html(""):(e.preventDefault(),BeehiveHelper.setError(this.input,""),this.setErrorMessage())},setErrorMessage:function(){this.notice.html('<div class="sui-notice sui-notice-error"><p>'+beehive_vars.invalid_tracking_code+"</p></div>")}},window.addEventListener("load",(function(){return BeehiveAdmin.Settings.Tracking.init()}))}(jQuery)},function(e,i){!function(e){"use strict";BeehiveAdmin.Settings.General={anonymization:e("#beehive-settings-anonymize"),forceContainer:e("#beehive-settings-force-anonymize-wrapper"),init:function(){var e=this;this.anonymization.length&&this.forceContainer.length&&this.anonymization.on("change",(function(){e.toggleForce()}))},toggleForce:function(){this.anonymization.is(":checked")?this.forceContainer.show():this.forceContainer.hide()}},window.addEventListener("load",(function(){return BeehiveAdmin.Settings.General.init()}))}(jQuery)},function(e,i,t){window.BeehiveAdmin.Settings.Google=BeehiveAdmin.Settings.Google||{},t(25),t(26)},function(e,i){!function(e){"use strict";BeehiveAdmin.Settings.Google.Setup={isModal:!1,valid:!0,init:function(){var i=this;e("#beehive-authorize-google, #beehive-modal-authorize-google").on("click",(function(){i.setupVars("beehive-modal-authorize-google"===e(this).attr("id")),i.bindAuth()})),e("#beehive-connect-google, #beehive-modal-connect-google").on("click",(function(){i.setupVars("beehive-modal-connect-google"===e(this).attr("id")),i.bindConnect()}))},setupVars:function(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isModal=i,this.noticeContainer=e(i?"#beehive-modal-google-setup-notice":"#beehive-google-setup-notice"),this.authButton=e(i?"#beehive-modal-authorize-google":"#beehive-authorize-google"),this.connectButton=e(i?"#beehive-modal-connect-google":"#beehive-connect-google"),this.clientId=e(i?"#google-modal-client-id":"#google-client-id"),this.clientSecret=e(i?"#google-modal-client-secret":"#google-client-secret"),this.accessCode=e(i?"#google-modal-access-code":"#google-access-code")},bindAuth:function(){this.validateAuthForm(),this.valid&&(this.authButton.addClass("sui-button-onload"),this.setupAuth())},bindConnect:function(){this.validateConnectForm(),this.valid&&(this.connectButton.addClass("sui-button-onload"),this.connectGoogle())},validateAuthForm:function(){this.valid=!0,BeehiveHelper.isEmpty(this.clientId.val())&&(BeehiveHelper.setError(this.clientId,beehive_vars.required_client_id),this.valid=!1),BeehiveHelper.isEmpty(this.clientSecret.val())&&(BeehiveHelper.setError(this.clientSecret,beehive_vars.required_client_secret),this.valid=!1),this.valid&&BeehiveHelper.unsetErrors()},validateConnectForm:function(){this.valid=!0,BeehiveHelper.isEmpty(this.accessCode.val())&&(BeehiveHelper.setError(this.accessCode,beehive_vars.required_access_code),this.valid=!1),this.valid&&BeehiveHelper.unsetErrors()},setupAuth:function(){var i=this,t=BeehiveHelper.setupFormData({action:"beehive_google_auth_url",client_id:this.clientId.val(),client_secret:this.clientSecret.val(),is_modal:i.isModal?1:0});BeehiveHelper.removeNotice(i.noticeContainer),e.post(ajaxurl,t).done((function(e){i.processAuthResponse(e)}))},connectGoogle:function(){var i=this,t=BeehiveHelper.setupFormData({action:"beehive_google_exchange_code",access_code:this.accessCode.val()});BeehiveHelper.removeNotice(i.noticeContainer),e.post(ajaxurl,t).done((function(e){i.processConnectResponse(e)}))},processAuthResponse:function(e){!0===e.success?BeehiveHelper.redirect(e.data.url):(this.authButton.removeClass("sui-button-onload"),BeehiveHelper.addNotice("error",e.data.error,this.noticeContainer))},processConnectResponse:function(e){!0===e.success?BeehiveHelper.redirect():(this.connectButton.removeClass("sui-button-onload"),BeehiveHelper.setError(this.accessCode,""),BeehiveHelper.addNotice("error",e.data.error,this.noticeContainer))}},window.addEventListener("load",(function(){return BeehiveAdmin.Settings.Google.Setup.init()}))}(jQuery)},function(e,i){!function(e){"use strict";BeehiveAdmin.Settings.Google.Account={actionButton:e(".beehive-google-account-action-submit"),init:function(){this.bindActions()},bindActions:function(){var i=this;this.actionButton.on("click",(function(){e(this).addClass("sui-button-onload"),i.processAccountAction(e(this).attr("data-action"))}))},processAccountAction:function(i){var t=BeehiveHelper.setupFormData({action:"beehive_google_account_action",account_action:i});e.post(ajaxurl,t).done((function(){BeehiveHelper.redirect(!1)}))}},window.addEventListener("load",(function(){return BeehiveAdmin.Settings.Google.Account.init()}))}(jQuery)},function(e,i){!function(e){"use strict";BeehiveAdmin.OnBoarding={modalSetup:e("#beehive-onboarding-setup"),skipLink:e(".beehive-onboarding-skip"),finishButton:e("#beehive-onboarding-finish"),trackingCode:e("#beehive-onboarding-tracking-code"),trackingSave:e("#beehive-onboarding-save-tracking"),init:function(){beehive_vars.onboarding_done||this.showSetup()},showSetup:function(){var e=this;this.modalSetup.length>0&&(SUI.dialogs["beehive-onboarding-setup"].show(),this.skipLink.length>0&&this.skipLink.on("click",this.skipSetup),this.trackingCode.length>0&&(this.showHideTrackingSave(),this.processTracking()),this.finishButton.length>0&&this.finishButton.on("click",(function(){e.finishSetup()})))},skipSetup:function(){var i=BeehiveHelper.setupFormData({action:"beehive_skip_onboarding"});e.post(ajaxurl,i)},showHideTrackingSave:function(){var e=this;""!==this.trackingCode.val()&&this.trackingSave.css("visibility","visible"),this.trackingCode.keyup((function(){BeehiveHelper.unsetErrors(),""===e.trackingCode.val()?e.trackingSave.css("visibility","hidden"):e.trackingSave.css("visibility","visible")}))},processTracking:function(){var e=this;this.trackingSave.on("click",(function(){BeehiveHelper.unsetErrors(),/^ua-\d{4,9}-\d{1,4}$/i.test(e.trackingCode.val().toString())?(SUI.sliderNext(e.modalSetup),0===e.finishButton.length&&e.finishSetup()):BeehiveHelper.setError(e.trackingCode,beehive_vars.invalid_code)}))},finishSetup:function(){var i=[],t=[],n=[];this.finishButton.addClass("sui-button-onload"),e(".google-modal-roles:checked").each((function(){i.push(this.value)})),e(".onboarding-ps-settings-level:checked").each((function(){t.push(this.value)})),e(".onboarding-ps-analytics-level:checked").each((function(){n.push(this.value)}));var o=BeehiveHelper.setupFormData({action:"beehive_finish_onboarding",google_account:e("#google-modal-account-id").val(),auto_track:BeehiveHelper.checkedValue(e("#google-modal-auto-track")),track_admin:BeehiveHelper.checkedValue(e("#beehive-onboarding-admin-tracking")),roles_overwrite:BeehiveHelper.checkedValue(e("#beehive-onboarding-roles-overwrite")),tracking:this.trackingCode.val(),roles:i,ps_settings:t,ps_analytics:n});e.post(ajaxurl,o).done((function(i){if(!1===i.success){var t=e("#beehive-onboarding-finish-notice");t.length&&(t.removeClass("sui-hidden"),t.find(".onboarding-notice-content").html(i.data.error))}else window.setTimeout((function(){BeehiveHelper.redirect(beehive_vars.settings_url)}),2e3)}))}},window.addEventListener("load",(function(){return BeehiveAdmin.OnBoarding.init()}))}(jQuery)}]);
//# sourceMappingURL=admin.min.js.map