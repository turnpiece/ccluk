"use strict";window.tsfGBC=function(a){function b(a){return k.getEditedPostAttribute(a)}function c(){m.set("title",b("title")).set("link",k.getPermalink()).set("slug",b("slug")).set("parent",b("parent")).set("date",b("date")).set("author",b("author")).set("content",b("content")).set("excerpt",b("excerpt")).set("visibility",k.getEditedPostVisibility())}function d(){const a=new Map(m);c(),m.forEach((b,c)=>{b!==a.get(c)&&i(c)})}function e(){n?k.didPostSaveRequestSucceed()?(q(),p().cancel(),f()):p():k.isSavingPost()&&(k.isPreviewingPost()?(n=!0,o="preview"):k.isAutosavingPost()?(n=!0,o="autosave"):(n=!0,o="save"))}function f(){n=!1}function g(){if(k.isPostSavingLocked())3>++r?q():(q().cancel(),r=0);else{r=0;let a=!k.hasChangedContent();"preview"===o?document.dispatchEvent(new CustomEvent("tsf-gutenberg-onpreview")):"autosave"===o?document.dispatchEvent(new CustomEvent("tsf-gutenberg-onautosave")):"save"===o?a=!0:void 0;a&&document.dispatchEvent(new CustomEvent("tsf-gutenberg-onsave"))&&document.dispatchEvent(new CustomEvent("tsf-gutenberg-onsave-completed")),document.dispatchEvent(new CustomEvent("tsf-gutenberg-saved-document",{detail:{savedType:o}})),o=""}}function h(){l.isEditorSidebarOpened()?!s.opened&&(s.opened=!0,document.dispatchEvent(new CustomEvent("tsf-gutenberg-sidebar-opened"))):s.opened&&(s.opened=!1,document.dispatchEvent(new CustomEvent("tsf-gutenberg-sidebar-closed")))}function i(b){const c=m.get(b);document.dispatchEvent(new CustomEvent(`tsf-updated-block-editor`,{detail:{type:b,value:c,postData:m}})),document.dispatchEvent(new CustomEvent(`tsf-updated-block-editor-${b}`,{detail:{type:b,value:c}})),a._data(document,"events")?.[`tsf-updated-gutenberg-${b}`]&&tsf.deprecatedFunc("jQuery event \"tsf-updated-gutenberg\"","5.0.7",`JS Event "tsf-updated-block-editor" or "tsf-updated-block-editor-${b}"`),a(document).trigger(`tsf-updated-gutenberg-${b}`,[c])}function j(){const{subscribe:a}=wp.data;a(tsfUtils.debounce(h,500)),a(tsfUtils.debounce(d,300)),a(e),document.dispatchEvent(new CustomEvent("tsf-subscribed-to-gutenberg"))}const k=wp.data.select("core/editor"),l=wp.data.select("core/edit-post"),m=new Map;let n=!1,o="";const p=tsfUtils.debounce(f,7e3),q=tsfUtils.debounce(g,500);let r=0;const s={opened:!1};return Object.assign({load:()=>{document.body.addEventListener("tsf-onload",j)}},{triggerUpdate:i})}(jQuery),window.tsfGBC.load();
