"use strict";window.tsfC=function(){function a(){return i}function b(a){let b=a.e,c=tsf.decodeEntities(a.text),d=h.guidelines[a.field][a.type].chars,e=tsf.getStringLength(c),f="",g="";const k={bad:"tsf-count-bad",okay:"tsf-count-okay",good:"tsf-count-good",unknown:"tsf-count-unknown"};switch(e?e<d.lower?(f=k.bad,g=h.i18n.guidelines.short.farTooShort):e<d.goodLower?(f=k.okay,g=h.i18n.guidelines.short.tooShort):e>d.upper?(f=k.bad,g=h.i18n.guidelines.short.farTooLong):e>d.goodUpper?(f=k.okay,g=h.i18n.guidelines.short.tooLong):(f=k.good,g=h.i18n.guidelines.short.good):(f=k.unknown,g=h.i18n.guidelines.short.empty),i){case 3:g=`${e} &ndash; ${g}`;break;case 2:break;case 1:default:g=e}b.innerHTML=g,b.classList.remove(...Object.values(k),...Object.values(j)),b.classList.add(f,j[i])}function c(){window.dispatchEvent(new CustomEvent("tsf-counter-updated"))}function d(a){a&&++i,3<i&&(i=0),c()}function e(){d(!0);const a=".tsf-counter-wrap .tsf-ajax";tsf.resetAjaxLoader(a),tsf.setAjaxLoader(a),wp.ajax.post("tsf_update_counter",{nonce:tsf.l10n.nonces.edit_posts,val:i}).done(()=>{tsf.unsetAjaxLoader(a,!0)}).fail(()=>{tsf.unsetAjaxLoader(a,!1)})}function f(){return document.querySelectorAll(".tsf-counter").forEach(a=>a.addEventListener("click",e))}function g(){f()}const h=tsfCL10n;let i=+(h.counterType||0);const j={0:"tsf-counter-zero",1:"tsf-counter-one",2:"tsf-counter-two",3:"tsf-counter-three"};return Object.assign({load:()=>{document.body.addEventListener("tsf-onload",g)}},{updatePixelCounter:function b(a){const c=a.e.parentElement;if(!c)return;const d=c.querySelector(".tsf-pixel-counter-bar"),e=c.querySelector(".tsf-pixel-counter-shadow");if(!d||!e)return;e.innerHTML=tsf.escapeString(tsf.decodeEntities(a.text));let f=e.offsetWidth,g="",i="",j="";const k=h.guidelines[a.field][a.type].pixels,l={bad:"tsf-pixel-counter-bad",okay:"tsf-pixel-counter-okay",good:"tsf-pixel-counter-good",unknown:"tsf-pixel-counter-unknown"};i=100*(f/k.goodUpper)+"%",f?f<k.lower?(g=l.bad,j=h.i18n.guidelines.long.farTooShort):f<k.goodLower?(g=l.okay,j=h.i18n.guidelines.long.tooShort):f>k.upper?(i=100*(k.upper/(f+2*(f-k.upper)/3))+"%",g=l.bad,j=h.i18n.guidelines.long.farTooLong):f>k.goodUpper?(g=l.okay,j=h.i18n.guidelines.long.tooLong,i="100%"):(g=l.good,j=h.i18n.guidelines.long.good):(g=l.unknown,i="100%",j=h.i18n.guidelines.long.empty);let m=h.i18n.pixelsUsed.replace(/%1\$d/g,f).replace(/%2\$d/g,k.goodUpper);m+=`<br>${j}`,d.classList.remove(...Object.values(l)),d.classList.add(g),d.querySelector(".tsf-pixel-counter-fluid").style.width=i,d.dataset.desc=m,d.setAttribute("aria-label",tsf.escapeString(m.replace(/(<([^>]+)?>?)/ig," "))),tsfTT.triggerUpdate(d)},updateCharacterCounter:b,triggerCounterUpdate:c,resetCounterListener:f,getCounterType:a},{counterClasses:j,l10n:h})}(),window.tsfC.load();
