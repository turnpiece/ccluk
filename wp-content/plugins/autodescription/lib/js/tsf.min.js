'use strict';window.tsf={nonces:tsfL10n.nonces,i18n:tsfL10n.i18n,states:tsfL10n.states,params:tsfL10n.params,settingsChanged:!1,counterType:0,hasInput:!1,browseUnhappy:!!navigator.userAgent.match(/Trident\/7\./),counterClasses:{0:'tsf-counter-zero',1:'tsf-counter-one',2:'tsf-counter-two',3:'tsf-counter-three'},confirm:function(t){return confirm(t)},stripTags:function(t){return t.replace(/(<([^>]+)?>?)/ig,'')},escapeString:function(t){if(!t.length)return'';let s={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#039;','\\\\':'&#92;','\\':''};return t.replace(/[&<>"']|\\\\|\\/g,function(n){return s[n]})},unescapeString:function(t){if(!t.length)return'';let s={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#039;','\\':'&#92;'},n={};n=tsf.browseUnhappy?Object.keys(s).map(function(o){return s[o]}):Object.values(s);let a=new RegExp(n.map(function(o){return o.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,'\\$&')}).join('|'),'g');return tsf.browseUnhappy?t.replace(a,function(o){for(let r in s)if(s[r]===o)return r;return o}):t.replace(a,function(o){return Object.keys(s).find(function(r){return s[r]===o})})},sDoubleSpace:function(t){return t.replace(/\s\s+/g,' ')},getStringLength:function(t){let s,n=0;return t.length&&(s=document.createElement('span'),s.innerHTML=tsf.escapeString(t).trim(),'undefined'!=typeof s.childNodes[0]&&(n=s.childNodes[0].nodeValue.length)),+n},convertJSONResponse:function(t){let s=t&&t.json||void 0,n=1===s;if(!n){let a=t;try{t=JSON.parse(t),n=!0}catch(o){n=!1}n||(t=a)}return t},updateCharacterCounter:function(t){let s=t.e,n=t.text,a=t.guidelines,o=tsf.getStringLength(n),r='',l='',c={bad:'tsf-count-bad',okay:'tsf-count-okay',good:'tsf-count-good',unknown:'tsf-count-unknown'};switch(o?o<a.lower?(r=c.bad,l=tsf.i18n.inputGuidelines.short.farTooShort):o<a.goodLower?(r=c.okay,l=tsf.i18n.inputGuidelines.short.tooShort):o>a.upper?(r=c.bad,l=tsf.i18n.inputGuidelines.short.farTooLong):o>a.goodUpper?(r=c.okay,l=tsf.i18n.inputGuidelines.short.tooLong):(r=c.good,l=tsf.i18n.inputGuidelines.short.good):(r=c.unknown,l=tsf.i18n.inputGuidelines.short.empty),tsf.counterType){case 3:l=o.toString()+' - '+l;break;case 2:break;case 1:default:l=o.toString();}for(let g in s.innerHTML=l,c)s.classList.remove(c[g]);for(let g in tsf.counterClasses)s.classList.remove(tsf.counterClasses[g]);s.classList.add(r),s.classList.add(tsf.counterClasses[tsf.counterType])},updatePixelCounter:function(t){let s=t.e,n=t.text,a=t.guidelines,o=s.parentElement;if(o){let r=o.querySelector('.tsf-pixel-counter-bar'),l=o.querySelector('.tsf-pixel-counter-shadow');if(r&&l){l.innerHTML=tsf.escapeString(n);let c=l.offsetWidth,g='',d='',u='',f={bad:'tsf-pixel-counter-bad',okay:'tsf-pixel-counter-okay',good:'tsf-pixel-counter-good',unknown:'tsf-pixel-counter-unknown'};d=100*(c/a.goodUpper)+'%',c?c<a.lower?(g=f.bad,u=tsf.i18n.inputGuidelines.long.farTooShort):c<a.goodLower?(g=f.okay,u=tsf.i18n.inputGuidelines.long.tooShort):c>a.upper?(d=100*(a.upper/(c+2*(c-a.upper)/3))+'%',g=f.bad,u=tsf.i18n.inputGuidelines.long.farTooLong):c>a.goodUpper?(g=f.okay,u=tsf.i18n.inputGuidelines.long.tooLong,d='100%'):(g=f.good,u=tsf.i18n.inputGuidelines.long.good):(g=f.unknown,d='100%',u=tsf.i18n.inputGuidelines.long.empty);let b,h=r.querySelector('.tsf-pixel-counter-fluid');for(let x in b=tsf.i18n.pixelsUsed.replace(/%1\$d/g,c),b=b.replace(/%2\$d/g,a.goodUpper),b=b+'<br>'+u,f)r.classList.remove(f[x]);r.classList.add(g),h.style.width=d,r.dataset.desc=b,r.setAttribute('aria-label',b),tsfTT.triggerUpdate(r)}}},_initTitleInputs:function(){if(tsf.hasInput){let t=jQuery(['#autodescription_title','#autodescription-meta\\[doctitle\\]','#autodescription-site-settings\\[homepage_title\\]'].join(', '));if(t.length){let n,a,o,l,s=!1,r='',c='',g=tsf.params.titleSeparator,d=tsf.params.defaultTitle,u=tsf.states.useTagline,f=tsf.states.isRTL,h=tsf.states.isPrivate,b=tsf.states.isPasswordProtected,x=tsf.states.stripTitleTags;n=f?'after':'before';const y=function(){let Q='before';tsf.states.isSettingsPage?f?'right'===jQuery('#tsf-home-title-location input:checked').val()&&(Q='after'):'left'===jQuery('#tsf-home-title-location input:checked').val()&&(Q='after'):tsf.states.isHome?f?'right'===tsf.params.titleLocation&&(Q='after'):'left'===tsf.params.titleLocation&&(Q='after'):f?'left'===tsf.params.titleLocation&&(Q='after'):'right'===tsf.params.titleLocation&&(Q='after'),a=Q};y();const _=function(){let Q='';if(!tsf.states.isSettingsPage)tsf.states.isHome?u&&(Q=tsf.params.titleAdditions):u&&(Q=tsf.params.titleAdditions);else if(u){let K=document.getElementById('autodescription-site-settings[homepage_title_tagline]'),X=K&&K.value||'';X=tsf.sDoubleSpace(X.trim()),Q=X.length?X:tsf.params.blogDescription}Q.length&&(Q=tsf.escapeString(tsf.sDoubleSpace(Q.trim())),'before'===a?Q=Q+' '+g+' ':'after'===a?Q=' '+g+' '+Q:void 0),c=Q.length?Q:'',l=document.getElementById('tsf-title-placeholder'),c.length&&l&&(l.innerHTML=c)};_();const L=function(){let Q='';h?Q=tsf.i18n.privateTitle:b&&(Q=tsf.i18n.protectedTitle),Q.length&&(Q=tsf.escapeString(Q),'before'===n?Q+=' ':'after'===n?Q=' '+Q:void 0),r=Q.length?Q:'',r.length&&o&&(o.innerHTML=r),o=document.getElementById('tsf-title-placeholder-prefix'),r.length&&o&&(o.innerHTML=r)};L();const T=function(Q){if(l||o){let K=jQuery(Q.target),X=K.val(),Y=!!c.length,Z=!!r.length;if(!Y&&l&&(l.style.display='none'),!Z&&o&&(o.style.display='none'),!Y&&!Z)return void K.css('text-indent','initial');if(!X.length)return K.css('text-indent','initial'),l&&(l.style.display='none'),void(o&&(o.style.display='none'));let ee=K.outerWidth(!0),te=(K.outerHeight(!0)-K.height())/2,se=(ee-K.innerWidth())/2,ie=f?'right':'left',ne=(K.outerWidth(!0)-K.width())/2,ae={display:K.css('display'),lineHeight:K.css('lineHeight'),fontFamily:K.css('fontFamily'),fontWeight:K.css('fontWeight'),fontSize:K.css('fontSize'),letterSpacing:K.css('letterSpacing'),paddingTop:te+'px',paddingBottom:te+'px'},oe=jQuery(o),re=jQuery(l),le=0,pe=0,ce=0,ge=0,de=0,ue=0;if(Z&&(oe.css(ae),oe.css({maxWidth:'initial'}),de=oe[0].getBoundingClientRect().width,de<ue&&(de=0)),Y){let he=0;switch(function(){let me=jQuery('#tsf-title-offset');me.text(X),me.css({fontFamily:ae.fontFamily,fontWeight:ae.fontWeight,letterSpacing:ae.letterSpacing,fontSize:ae.fontSize}),he=me[0].getBoundingClientRect().width}(),le=K[0].getBoundingClientRect().width-se-ne-he-de,le<ue&&(de+=le,le=0),re.css(ae),re.css({maxWidth:'initial'}),a){case'before':let me=re[0].getBoundingClientRect().width;me=le<me?le:me,me<ue&&(me=0),le=me,ge+=le,ce+=le,pe+=ne;break;case'after':pe+=ne+he+de;}}ce+=ne,de=0>de?0:de,ge+=de;let fe;Z&&(fe={},fe[ie]=ce+'px',fe.maxWidth=de+'px',oe.css(fe)),Y&&(fe={},fe[ie]=pe+'px',fe.maxWidth=le+'px',re.css(fe)),fe={},fe['text-indent']=ge+'px',K.css(fe)}},C=function(){let K='',X=!!c.length,Y=!!r.length,Z=c,ee=r;tsf.states.isTermEdit&&tsf.params.termName&&(ee=f?' :'+tsf.params.termName:tsf.params.termName+': ',Y=tsf.states.useTermPrefix),K=d,Y&&('before'===n?K=ee+K:'after'===n?K+=ee:void 0),X&&('before'===a?K=Z+K:'after'===a?K+=Z:void 0),tsf.browseUnhappy&&(s=!0);let te=document.createElement('span');te.innerHTML=tsf.escapeString(tsf.sDoubleSpace(K)),t.prop('placeholder',tsf.unescapeString(te.textContent)),tsf.browseUnhappy&&setTimeout(function(){s=!1},0)},w=function(Q){let K=document.getElementById('tsf-title-reference'),X=Q.target.value;K&&(X=X.trim(),1>X.length||tsf.states.homeLocks.refTitleLock?X=Q.target.placeholder:(r.length&&('before'===n?X=r+X:'after'===n?X+=r:void 0),c.length&&('before'===a?X=c+X:'after'===a?X+=c:void 0)),K.innerHTML=tsf.escapeString(tsf.sDoubleSpace(X)),setTimeout(function(){jQuery(K).change()},0))},S=function(Q){let K=document.getElementById(Q.target.id+'_chars'),X=document.getElementById('tsf-title-reference');if(K&&X){let Y={e:K,text:tsf.unescapeString(X.innerHTML),guidelines:tsf.params.inputGuidelines.title.search.chars};tsf.updateCharacterCounter(Y)}},I=function(Q){let K=document.getElementById(Q.target.id+'_pixels'),X=document.getElementById('tsf-title-reference');if(K&&X){let Y={e:K,text:tsf.unescapeString(X.innerHTML),guidelines:tsf.params.inputGuidelines.title.search.pixels};tsf.updatePixelCounter(Y)}};t.on('input.tsfUpdateTitles',function(Q){return!s&&void(T(Q),C(),w(Q),S(Q),I(Q))});t.on('tsf-update-title-counter',function(Q){w(Q),S(Q),I(Q)});const U=function(){t.trigger('tsf-update-title-counter')},P=function(){_(),E()};jQuery('#autodescription-site-settings\\[homepage_title_tagline\\]').on('input',P),jQuery('#autodescription-site-settings\\[homepage_tagline\\]').on('change',P);jQuery('#tsf-title-tagline-toggle :input').on('click',function(Q){let K=u;jQuery(Q.target).is(':checked')?(jQuery('.tsf-custom-blogname-js').css('display','inline'),u=!0):(jQuery('.tsf-custom-blogname-js').css('display','none'),u=!1),K^u&&(_(),B())});jQuery('#visibility .save-post-visibility').on('click',function(){let K=jQuery('#visibility').find('input:radio:checked').val();switch(h=!1,b=!1,K){case'password':let X=jQuery('#visibility').find('#post_password').val();b=!!X&&!!X.length;break;case'private':h=!0;break;default:case'public':}L(),B()});jQuery('#tsf-title-separator :input').on('click',function(Q){let K=jQuery(Q.target).val(),X='';X='pipe'===K?'|':'dash'===K?'-':jQuery('<div/>').html('&'+K+';').text(),g=X,jQuery('.tsf-sep-js').text(' '+g+' '),_(),B()});const E=function(){t.trigger('input.tsfUpdateTitles')};let z=0;const B=function(){clearTimeout(z),z=setTimeout(E,10)};jQuery(window).on('tsf-counter-updated',B);const O=function(){let Q=tsf.settingsChanged;E(),tsf.settingsChanged=Q};let G=0;const A=function(){clearTimeout(G),G=setTimeout(O,10)};jQuery(window).on('tsf-flex-resize',A),jQuery('#homepage-tab-general').on('tsf-tab-toggled',A),jQuery('#tsf-flex-inpost-tab-general').on('tsf-flex-tab-toggled',A),A();let M=['autodescription-homepage-settings','tsf-inpost-box'];jQuery(document).on('postbox-toggled',function(Q,K){if(0<=M.indexOf(K.id)){let X=K.querySelector('.inside');0<X.offsetHeight&&0<X.offsetWidth&&O()}});jQuery('#tsf-home-title-location :input').on('click',function(){y(),_(),B()});tsf.states.isHome||jQuery('#edittag #name, #titlewrap #title').on('input',function(Q){let K=Q.target.value;K=K.trim(),d=K.length?tsf.escapeString(x?tsf.stripTags(K):K):tsf.params.untitledTitle,C(),U()});tsf.states.isHome||(jQuery('#autodescription_title_no_blogname').on('change',function(Q){if(!tsf.states.taglineLocked){let K=u;u=!jQuery(Q.target).is(':checked'),K^u&&(_(),B())}}),jQuery('#autodescription_title_no_blogname').trigger('change'));(function(){let Q=0,K=window.innerWidth;window.addEventListener('resize',function(){clearTimeout(Q),Q=setTimeout(function(){let X=window.innerWidth;K<X?782>=K&&782<=X&&O():782<=K&&782>=X&&O(),K=X},50)})})()}}},_initUnboundTitleSettings:function(){if(tsf.hasInput){let t=jQuery(['#autodescription_title','#autodescription-meta\\[doctitle\\]','#autodescription-site-settings\\[homepage_title\\]'].join(', '));jQuery('#tsf-title-placeholder, #tsf-title-placeholder-prefix').on('click',function(c){let g=jQuery(c.target).siblings(t)[0];if('function'==typeof g.setSelectionRange){g.focus();let d=2*g.value.length;g.setSelectionRange(d,d)}else{let d=g.value;g.value='',g.focus(),g.value=d}});jQuery('#autodescription-site-settings\\[title_rem_additions\\]').on('click',function(c){jQuery(c.target).is(':checked')?jQuery('.tsf-title-additions-js').css('display','none'):jQuery('.tsf-title-additions-js').css('display','inline')});jQuery('#tsf-title-location input').on('click',function(c){let g=jQuery('.tsf-title-additions-example-left'),d=jQuery('.tsf-title-additions-example-right');'right'===jQuery(c.target).val()?(g.css('display','none'),d.css('display','inline')):(g.css('display','inline'),d.css('display','none'))});jQuery('#autodescription-site-settings\\[homepage_title\\]').on('input',function(c){let g=c.target.value||'',d=jQuery('.tsf-custom-title-js');0===g.length?d.text(tsf.params.defaultTitle):d.text(g)});jQuery('#autodescription-site-settings\\[homepage_title_tagline\\]').on('input.tsfInputTagline',function(c){let g=c.target.value||'',d=jQuery('.tsf-custom-tagline-js');g=tsf.escapeString(tsf.sDoubleSpace(g.trim())),g.length?(d.html(g),jQuery('#tsf-home-title-location .tsf-sep-js').show()):(d.text(tsf.params.blogDescription),0===tsf.params.blogDescription.length?jQuery('#tsf-home-title-location .tsf-sep-js').hide():jQuery('#tsf-home-title-location .tsf-sep-js').show())}),jQuery('#autodescription-site-settings\\[homepage_title_tagline\\]').trigger('input.tsfInputTagline');jQuery('#title-prefixes-toggle :input').on('click',function(c){let g=jQuery(c.target),d=jQuery('.tsf-title-prefix-example');g.is(':checked')?d.css('display','none'):d.css('display','inline')})}},_initDescInputs:function(){if(tsf.hasInput){let t=jQuery('#autodescription_description, #autodescription-meta\\[description\\], #autodescription-site-settings\\[homepage_description\\]');if(t.length){let s=tsf.params.descriptionSeparator;jQuery('#tsf-description-separator input').on('click',function(y){let _=jQuery(y.target).val(),L='';L='pipe'===_?'|':'dash'===_?'-':jQuery('<div/>').html('&'+_+';').text(),s=L,jQuery('#autodescription-descsep-js').text(' '+s+' '),d()});const a=function(y){let _=document.getElementById(y.target.id+'_chars'),L=document.getElementById('tsf-description-reference');if(_&&L){let T={e:_,text:tsf.unescapeString(L.innerHTML),guidelines:tsf.params.inputGuidelines.description.search.chars};tsf.updateCharacterCounter(T)}},o=function(y){let _=document.getElementById('tsf-description-reference'),L=y.target.value;_&&(L=L.trim(),(1>L.length||tsf.states.homeLocks.refDescriptionLock)&&(L=y.target.placeholder),_.innerHTML=tsf.escapeString(tsf.sDoubleSpace(L)),setTimeout(function(){jQuery(_).change()},0))},r=function(y){let _=document.getElementById(y.target.id+'_pixels'),L=document.getElementById('tsf-description-reference');if(_&&L){let T={e:_,text:tsf.unescapeString(L.innerHTML),guidelines:tsf.params.inputGuidelines.description.search.pixels};tsf.updatePixelCounter(T)}};t.on('input.tsfUpdateDescriptions',function(y){o(y),a(y),r(y)});const c=function(){t.trigger('input.tsfUpdateDescriptions')};let g=0;const d=function(){clearTimeout(g),g=setTimeout(c,10)};jQuery(window).on('tsf-counter-updated',d);const u=function(){let y=tsf.settingsChanged;c(),tsf.settingsChanged=y};let f=0;const h=function(){clearTimeout(f),f=setTimeout(u,10)};jQuery('#homepage-tab-general').on('tsf-tab-toggled',h),jQuery('#tsf-flex-inpost-tab-general').on('tsf-flex-tab-toggled',h),h();let b=['autodescription-homepage-settings','tsf-inpost-box'];jQuery(document).on('postbox-toggled',function(y,_){if(0<=b.indexOf(_.id)){let L=_.querySelector('.inside');0<L.offsetHeight&&0<L.offsetWidth&&d()}})}}},_initSocialTitleInputs:function(){if(tsf.hasInput){let t=jQuery('#autodescription_og_title, #autodescription-site-settings\\[homepage_og_title\\]'),s=jQuery('#autodescription_twitter_title, #autodescription-site-settings\\[homepage_twitter_title\\]'),n=jQuery('#tsf-title-reference');if(t.length&&s.length&&n.length){let a=!1,o=tsf.states.homeLocks.ogTitleLock,r=tsf.states.homeLocks.ogTitlePHLock,l=tsf.states.homeLocks.twTitleLock,c=tsf.states.homeLocks.twTitlePHLock,g=o?t.prop('placeholder'):t.val(),d=l?s.prop('placeholder'):s.val(),u=n.text();const f=function(T){let C='';switchActive:switch(T){case'twitter':if(C=d,l||c){C=C.length?C:s.prop('placeholder');break switchActive}case'og':if(C=C.length?C:g,o||r){C=C.length?C:t.prop('placeholder');break switchActive}case'reference':C=C.length?C:u;}return C},h=function(){tsf.browseUnhappy&&(a=!0),o||r||t.prop('placeholder',f('reference')),l||c||s.prop('placeholder',f('og')),tsf.browseUnhappy&&setTimeout(function(){a=!1},0)},b=function(T,C,w){let S=document.getElementById(T.id+'_chars');if(S){let I={e:S,text:tsf.unescapeString(C),guidelines:tsf.params.inputGuidelines.title[w].chars};tsf.updateCharacterCounter(I)}};let x=0;const y=function(){clearTimeout(x),x=setTimeout(function(){t.each(function(T,C){return b(C,f('og'),'opengraph')}),s.each(function(T,C){return b(C,f('twitter'),'twitter')})},10)};n.on('change',function(){u=n.text(),h(),y()});t.on('input.tsfUpdateOgTitle',function(T){if(!a){if(!o){let C=T.target.value.trim();g=C.length?tsf.sDoubleSpace(C):''}h(),y()}}),s.on('input.tsfUpdateTwTitle',function(T){if(!a){if(!l){let C=T.target.value.trim();d=C.length?tsf.sDoubleSpace(C):''}h(),y()}})}}},_initSocialDescInputs:function(){if(tsf.hasInput){let t=jQuery('#autodescription_og_description, #autodescription-site-settings\\[homepage_og_description\\]'),s=jQuery('#autodescription_twitter_description, #autodescription-site-settings\\[homepage_twitter_description\\]'),n=jQuery('#tsf-description-reference');if(t.length&&s.length&&n.length){let a=!1,o=tsf.states.homeLocks.ogDescriptionLock,r=tsf.states.homeLocks.ogDescriptionPHLock,l=tsf.states.homeLocks.twDescriptionLock,c=tsf.states.homeLocks.twDescriptionPHLock,g=o?t.prop('placeholder'):t.val(),d=l?s.prop('placeholder'):s.val(),u=n.text(),f=jQuery(['#autodescription_description','#autodescription-meta\\[description\\]','#autodescription-site-settings\\[homepage_description\\]'].join(', '));const h=function(C,w){let S='';switchActive:switch(C){case'twitter':if(S=d,l||c){S=S.length?S:s.prop('placeholder');break switchActive}case'og':if(S=S.length?S:g,o||r){S=S.length?S:t.prop('placeholder');break switchActive}case'reference':S.length||(f.val().length?S=u:'twitter'===w?S=tsf.params.socialPlaceholders.twDesc:'og'==w&&(S=tsf.params.socialPlaceholders.ogDesc));}return S},b=function(){tsf.browseUnhappy&&(a=!0),o||r||t.attr('placeholder',h('reference','og')),l||c||s.attr('placeholder',h('og','twitter')),tsf.browseUnhappy&&setTimeout(function(){a=!1},0)},x=function(C,w,S){let I=document.getElementById(C.id+'_chars');if(I){let j={e:I,text:tsf.unescapeString(w),guidelines:tsf.params.inputGuidelines.description[S].chars};tsf.updateCharacterCounter(j)}};let y=0;const _=function(){clearTimeout(y),y=setTimeout(function(){t.each(function(C,w){return x(w,h('og','og'),'opengraph')}),s.each(function(C,w){return x(w,h('twitter','twitter'),'twitter')})},10)};n.on('change',function(){u=n.text(),b(),_()});t.on('input.tsfUpdateOgDesc',function(C){if(!a){if(!o){let w=C.target.value.trim();g=w.length?tsf.sDoubleSpace(w):''}b(),_()}}),s.on('input.tsfUpdateOgDesc',function(C){if(!a){if(!l){let w=C.target.value.trim();d=w.length?tsf.sDoubleSpace(w):''}b(),_()}})}}},_initWebmastersInput:function(){if(tsf.states.isSettingsPage){let t=jQuery(['#autodescription-site-settings\\[google_verification\\]','#autodescription-site-settings\\[bing_verification\\]','#autodescription-site-settings\\[yandex_verification\\]','#autodescription-site-settings\\[pint_verification\\]'].join(', '));t.length&&t.on('paste',function(s){let n=s.originalEvent.clipboardData&&s.originalEvent.clipboardData.getData('text')||void 0;if(n){let a=/<meta[^>]+content=(\"|\')?([^\"\'>\s]+)\1?.*?>/i.exec(n);a&&2 in a&&'string'==typeof a[2]&&a[2].length&&(s.stopPropagation(),s.preventDefault(),s.target.value=a[2])}})}},_initCounters:function(){if(tsf.hasInput){jQuery('.tsf-counter').on('click',function(){++tsf.counterType,3<tsf.counterType&&(tsf.counterType=0),s();let r='.tsf-counter-wrap .tsf-ajax',l=0;tsf.resetAjaxLoader(r),tsf.setAjaxLoader(r);let c={method:'POST',url:ajaxurl,datatype:'json',data:{action:'the_seo_framework_update_counter',nonce:tsf.nonces.edit_posts,val:tsf.counterType},async:!0,success:function(g){switch(g=tsf.convertJSONResponse(g),'success'===g.type&&(l=1),l){case 0:tsf.unsetAjaxLoader(r,!1);break;case 1:tsf.unsetAjaxLoader(r,!0);break;default:tsf.resetAjaxLoader(r);}}};jQuery.ajax(c)});const s=function(){tsf.counterType=+tsf.counterType,3<tsf.counterType&&(tsf.counterType=0),tsf._triggerCounterUpdate()};jQuery('#autodescription-site-settings\\[display_character_counter\\]').on('click',function(o){jQuery(o.target).is(':checked')?jQuery('.tsf-counter-wrap').show():jQuery('.tsf-counter-wrap').hide()});jQuery('#autodescription-site-settings\\[display_pixel_counter\\]').on('click',function(o){jQuery(o.target).is(':checked')?(jQuery('.tsf-pixel-counter-wrap').show(),tsf._triggerCounterUpdate()):jQuery('.tsf-pixel-counter-wrap').hide()})}},tabToggle:function(t,s){let n=jQuery(t.target);if(n.is(':checked')){s='boolean'==typeof s&&s;let a=t.target.id,o=t.target.name,r='tsf-active-tab-content',l='tsf-tab-active',c=jQuery('.'+r),g=n.closest('.tsf-nav-tab-wrapper').find('.'+l),d=c.find('input:invalid, select:invalid, textarea:invalid');if(d.length){try{d[0].reportValidity()}catch(f){let h=jQuery(t.target.form).find('input[type=submit]').not('.autodescription-site-settings\\[tsf-settings-reset\\]');h.length&&h[0].click()}return g.prop('checked',!0),n.prop('checked',!1),t.stopPropagation(),t.preventDefault(),!1}let u=jQuery('#'+a+'-content');if(g.removeClass(l),g.siblings('label').removeClass('tsf-no-focus-ring'),n.addClass(l),s){let f=jQuery('.'+o+'-content');f.removeClass(r).hide(),u.addClass(r).show(),jQuery('#'+a).trigger('tsf-tab-toggled')}else if(u.length&&!u.is(c)){let f=jQuery('.'+o+'-content');f.fadeOut(150,function(){jQuery(this).removeClass(r)}),setTimeout(function(){u.addClass(r).fadeIn(250)},150),setTimeout(function(){jQuery('#'+a).trigger('tsf-tab-toggled')},175)}}},flexTabToggle:function(t,s){let n=jQuery(t.target);if(n.is(':checked')){s='boolean'==typeof s&&s;let a=t.target.id,o=t.target.name,r='tsf-flex-tab-content-active',l='tsf-flex-tab-active',c=jQuery('.'+r),g=n.closest('.tsf-flex-nav-tab-wrapper').find('.'+l),d=c.find('input:invalid, select:invalid, textarea:invalid');if(d.length){try{d[0].reportValidity()}catch(f){let h=jQuery(t.target.form).find('#publishing-action input[type="submit"], #save-action input[type="submit"]');h.length&&h[0].click()}return g.prop('checked',!0),n.prop('checked',!1),t.stopPropagation(),t.preventDefault(),!1}let u=jQuery('#'+a+'-content');if(g.removeClass(l),g.siblings('label').removeClass('tsf-no-focus-ring'),n.addClass(l),s){let f=jQuery('.'+o+'-content');f.removeClass(r).hide(),u.addClass(r).show(),jQuery('#'+a).trigger('tsf-flex-tab-toggled')}else if(u.length&&!u.is(c)){let f=jQuery('.'+o+'-content');f.fadeOut(150,function(){jQuery(this).removeClass(r)}),setTimeout(function(){u.addClass(r).fadeIn(250)},150),setTimeout(function(){jQuery('#'+a).trigger('tsf-flex-tab-toggled')},175)}}},addNoFocusClass:function(){this.classList.add('tsf-no-focus-ring')},setTabsOnload:function(){tsf.hasInput&&(tsf.states.isPostEdit&&jQuery('.tsf-flex-nav-tab-radio:checked').trigger('change',[!0]),tsf.states.isSettingsPage&&jQuery('.tsf-tabs-radio:checked').each(function(t,s){jQuery(s).trigger('change',[!0])}))},_initPostboxToggle:function(){let t;if(tsf.states.isSettingsPage?t=jQuery('.postbox[id^="autodescription-"]').find('.hndle, .handlediv'):tsf.states.isPostEdit&&(t=jQuery('.postbox#tsf-inpost-box').find('.hndle, .handlediv')),t&&t.length){let s;const n=function(){try{s[0].reportValidity()}catch(o){let r=jQuery(s[0].form).find('input[type=submit]').not('.autodescription-site-settings\\[tsf-settings-reset\\]');r.length&&r[0].click()}};t.on('click.tsfPostboxes',function(o){let r=jQuery(o.target).closest('.postbox');r[0].classList.contains('closed')&&(s=r.find('input:invalid, select:invalid, textarea:invalid'),s.length&&(jQuery(document).one('postbox-toggled',n),jQuery(o.target).trigger('click')))})}},taglineToggleDesc:function(t){let s=jQuery(t.target),n=jQuery('#tsf-on-blogname-js');s.is(':checked')?n.css('display','inline'):n.css('display','none')},additionsToggleDesc:function(t){let s=jQuery(t.target),n=jQuery('#tsf-description-additions-js');s.is(':checked')?n.css('display','inline'):n.css('display','none')},taglineToggleOnload:function(){if(tsf.hasInput){let t=jQuery('#tsf-title-tagline-toggle :input'),s=jQuery('.tsf-custom-blogname-js'),n=jQuery('#tsf-description-additions-toggle :input'),a=jQuery('#tsf-description-additions-js'),o=jQuery('#tsf-description-onblogname-toggle :input'),r=jQuery('#tsf-on-blogname-js'),l=jQuery('#tsf-title-additions-toggle :input'),c=jQuery('.tsf-title-additions-js');t.is(':checked')?s.css('display','inline'):s.css('display','none'),n.is(':checked')?a.css('display','inline'):a.css('display','none'),o.is(':checked')?r.css('display','inline'):r.css('display','none'),l.is(':checked')?c.css('display','none'):c.css('display','inline')}},attachUnsavedChangesListener:function(){if(tsf.hasInput){const t=function(o){jQuery(o.data._input).not(o.data._except).off(o.type,s)},s=function(o){tsf.registerChange(),t(o)};let n,a='.tsf-input-not-saved';n=['.tsf-metaboxes :input','#tsf-inpost-box .inside :input'].join(', '),jQuery(n).not(a).off('change.tsfChangeListener').on('change.tsfChangeListener',{_input:n,_except:a},s),n=['.tsf-metaboxes input[type=text]','.tsf-metaboxes textarea','#tsf-inpost-box .inside input[type=text]','#tsf-inpost-box .inside textarea'].join(', '),jQuery(n).not(a).off('input.tsfChangeListener').on('input.tsfChangeListener',{_input:n,_except:a},s),jQuery(window).off('beforeunload.tsfChangeListener').on('beforeunload.tsfChangeListener',function(){if(tsf.settingsChanged)return tsf.i18n.saveAlert}),jQuery(['.tsf-metaboxes input[type="submit"]','#publishing-action input[type="submit"]','#save-action input[type="submit"]','a.submitdelete'].join(', ')).off('click.tsfChangeListener').on('click.tsfChangeListener',function(){tsf.settingsChanged=!1})}},registerChange:function(){tsf.settingsChanged=!0},confirmedReset:function(){return confirm(tsf.i18n.confirmReset)},onLoadUnregisterChange:function(){tsf.settingsChanged=!1},dismissNotice:function(t){jQuery(t.target).parents('.tsf-notice').slideUp(200,function(){this.remove()})},setAjaxLoader:function(t){jQuery(t).toggleClass('tsf-loading')},unsetAjaxLoader:function(t,s){let n='tsf-success',a=2500;s||(n='tsf-error',a=5e3),jQuery(t).removeClass('tsf-loading').addClass(n).fadeOut(a)},resetAjaxLoader:function(t){jQuery(t).stop().empty().prop('class','tsf-ajax').css('opacity','1').removeProp('style')},setColorOnload:function(){let t=jQuery('.tsf-color-picker');t.length&&jQuery.each(t,function(s,n){let a=jQuery(n),o='',r=a.data('tsf-default-color');a.wpColorPicker({defaultColor:r,width:238,change:function(){o=a.wpColorPicker('color'),''==o&&(o=r),a.val(o),tsf.registerChange()},clear:function(){a.parent().siblings('.wp-color-result').css('backgroundColor',r),tsf.registerChange()},palettes:!1})})},_doFlexResizeListener:function(){if(jQuery('.tsf-flex').length){tsf._setResizeListeners();let t=0,s={},n=0,a=jQuery('.tsf-flex-nav-tab-wrapper'),o=jQuery(window);o.on('tsf-flex-resize',function(){clearTimeout(t);let r=0;t=setTimeout(function(){if(a.length){let l=jQuery('.tsf-flex-nav-tab-inner'),c=a.width(),g=l.width(),d=jQuery('.tsf-flex-nav-name');s.tabWrapper||(s.tabWrapper={},s.tabWrapper.outer=0,s.tabWrapper.inner=0,s.tabWrapper.shown=1),!s.tabWrapper.shown&&s.tabWrapper.outer<c&&(d.fadeIn(250),setTimeout(function(){g=l.width()},r)),setTimeout(function(){g>c?(d.hide(),s.tabWrapper.shown=0):s.tabWrapper.outer<c&&(d.fadeIn(250),s.tabWrapper.shown=1)},2*r),setTimeout(function(){s.tabWrapper.outer=c,s.tabWrapper.inner=g},3*r)}},n),r=10,n=75}),o.trigger('tsf-flex-resize')}},_setResizeListeners:function(){jQuery(window).on('resize orientationchange',tsf._triggerResize),jQuery('#collapse-menu').click(tsf._triggerResize),jQuery('.columns-prefs :input[type=radio]').change(tsf._triggerResize),jQuery('.meta-box-sortables').on('sortupdate',tsf._triggerResize)},_triggerResize:function(){jQuery(window).trigger('tsf-flex-resize')},_triggerCounterUpdate:function(){jQuery(window).trigger('tsf-counter-updated')},_triggerReady:function(){jQuery(document.body).trigger('tsf-ready')},_triggerOnLoad:function(){jQuery(document.body).trigger('tsf-onload')},_doReady:function(){tsf._triggerOnLoad(),tsf._initCounters(),tsf._initTitleInputs(),tsf._initUnboundTitleSettings(),tsf._initSocialTitleInputs(),tsf._initDescInputs(),tsf._initSocialDescInputs(),tsf._initWebmastersInput(),tsf.setTabsOnload(),tsf._initPostboxToggle(),tsf.taglineToggleOnload(),tsf.setColorOnload(),tsf.attachUnsavedChangesListener(),tsf.onLoadUnregisterChange(),tsf._doFlexResizeListener(),tsf._triggerReady()},setupVars:function(){tsf.counterType=parseInt(tsf.states.counterType),tsf.hasInput=tsf.states.hasInput},ready:function(t){t('.updated, .error, .notice-error, .notice-warning').insertAfter('.tsf-top-wrap'),tsf.setupVars(),t('.tsf-js-confirm-reset').on('click',tsf.confirmedReset),t('.tsf-tabs-radio').on('change',tsf.tabToggle),t('.tsf-tab').on('click','.tsf-nav-tab',tsf.addNoFocusClass),t('.tsf-flex-nav-tab-radio').on('change',tsf.flexTabToggle),t('.tsf-flex-nav-tab').on('click','.tsf-flex-nav-tab-label',tsf.addNoFocusClass),t('#tsf-description-onblogname-toggle :input').on('click',tsf.taglineToggleDesc),t('#tsf-description-additions-toggle :input').on('click',tsf.additionsToggleDesc),t('.tsf-dismiss').on('click',tsf.dismissNotice),t(document.body).ready(tsf._doReady)}},jQuery(tsf.ready);
