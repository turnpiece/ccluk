"use strict";window.tsfPTGB=function(){function a(a,b){return f[a]?.i18n[b]||""}function b(a,b){document.dispatchEvent(new CustomEvent("tsf-updated-primary-term",{detail:{id:a,taxonomy:b}}))}function c(a){const c=()=>document.getElementById(`autodescription[_primary_term_${a}]`),d=()=>+c().value,e=(d,e)=>(d=+d,c().value=d,b(d||+e,a),d);return{get:d,set:e,revalidate:a=>{const b=d();return a.includes(b)?b:e(a?.[0]||0)},registerPostField:()=>{const b=document.getElementById("tsf-gutenberg-data-holder");b?(b.insertAdjacentHTML("beforeend",wp.template("tsf-primary-term-selector")({taxonomy:f[a]})),p.set(a,!0)):p.set(a,!1)},isPostFieldRegistered:()=>!!p.get(a)}}function d(){function b(b){const{taxonomySlug:d}=b,e=c(d),[f,h]=j(e.get()),{selectedTerms:i,loading:p,availableTerms:q}=m(a=>{const{getTaxonomy:b,getEntityRecords:c,isResolving:e}=a("core"),{getEditedPostAttribute:f}=a("core/editor"),g=b(d),h=["taxonomy",d,o];return{selectedTerms:f(g?.rest_base)||n,loading:e("getEntityRecords",h),availableTerms:c(...h)||n}},[d]);if(k(()=>{i.includes(+f)&&e.get()===+f||(e.revalidate(i),h(e.get()))},[i]),2>i?.length)return e.set(0,i?.[0]||q?.[0]?.id||0),null;return g(l,{label:a(d,"selectPrimary"),value:f,className:"tsf-pt-gb-selector",onChange:a=>{i.includes(+a)&&(e.set(a),h(e.get()),tsfAys.registerChange())},options:(()=>q.map(a=>i.includes(a?.id)&&{value:a.id,label:tsf.decodeEntities(a?.name)}).filter(Boolean)||"")(),disabled:(()=>!(i.length&&q.length&&!p))(),__nextHasNoMarginBottom:!0})}if(Object.keys(f).length){for(let a in f)c(a).registerPostField();wp.hooks.addFilter("editor.PostTaxonomyType","tsf/pt",a=>class extends i{render(){return c(this.props?.slug).isPostFieldRegistered()?g(h,null,g(a,{...this.props}),g(b,{taxonomySlug:this.props?.slug})):g(a,{...this.props})}})}}const e=tsfPTL10n,f=e.taxonomies,{createElement:g,Fragment:h,Component:i,useState:j,useEffect:k}=wp.element,{SelectControl:l}=wp.components,{useSelect:m}=wp.data,n=[],o={per_page:-1,orderby:"id",order:"asc",_fields:"id,name"},p=new Map;return Object.assign({load:()=>{document.body.addEventListener("tsf-ready",d)}},{l10n:e})}(),window.tsfPTGB.load();
