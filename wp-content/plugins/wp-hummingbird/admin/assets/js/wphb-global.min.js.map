{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/@wpmudev/shared-ui/dist/js/_src/modals.js","webpack:///./node_modules/@wpmudev/shared-ui/js/a11y-dialog.js","webpack:///./_src/js/performance/reports.js","webpack:///./_src/js/global.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","g","this","Function","e","window","A11yDialog","$","SUI","document","addEventListener","mainEl","dialogs","each","id","jQuery","global","__WEBPACK_AMD_DEFINE_RESULT__","focusedBeforeDialog","FOCUSABLE_ELEMENTS","node","targets","_show","show","_hide","hide","_bindKeypress","_listeners","toArray","collection","Array","slice","$$","selector","context","querySelectorAll","setFocusToFirstItem","focusableChildren","getFocusableChildren","length","focus","join","filter","child","offsetWidth","offsetHeight","getClientRects","siblings","_targets","target","NodeList","isPrototypeOf","Element","collect","parentNode","childNodes","nodeType","splice","indexOf","setAttribute","shown","_openers","forEach","opener","_closers","concat","closer","_fire","event","classList","add","remove","getElementsByClassName","className","removeAttribute","original","getAttribute","activeElement","getElementsByTagName","timeout_node","setTimeout","removeEventListener","destroy","on","type","handler","push","off","index","listener","which","preventDefault","focusedItemIndex","shiftKey","trapTabKey","_maintainFocus","contains","undefined","apply","require","WPHBReports","modal","getElementById","contentContainer","timer","progress","nonce","settings","scanning","finished","email","init","renderTemplate","content","template","innerHTML","mapActions","form","querySelector","self","runTest","updateProgressBar","xhr","XMLHttpRequest","open","ajaxurl","setRequestHeader","onload","JSON","parse","response","send","location","href","_this","setInterval","progressStatus","wphbGlobal","scanRunning","clearInterval","scanAnalyzing","scanWaiting","style","width","progressIcon","scanComplete","_","memoize","compiled","options","evaluate","interpolate","escape","variable","data","templateSettings","WPHBGlobal","menuButton","noticeButton","reportButton","post","url","action","status","reload","console","log"],"mappings":"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","file":"wphb-global.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 79);\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","( function( $ ) {\n\n\t// Enable strict mode.\n\t'use strict';\n\n\t// Define global SUI object if it doesn't exist.\n\tif ( 'object' !== typeof window.SUI ) {\n\t\twindow.SUI = {};\n\t}\n\n\tdocument.addEventListener( 'DOMContentLoaded', function() {\n\t\tvar mainEl = $( '.sui-wrap' );\n\t\tSUI.dialogs = {};\n\n\t\t// Init the dialog elements.\n\t\t$( '.sui-dialog' ).each( function() {\n\t\t\tSUI.dialogs[this.id] = new A11yDialog( this, mainEl );\n\t\t});\n\n\t});\n\n}( jQuery ) );\n","/* global NodeList, Element, define */\n\n(function (global) {\n    'use strict';\n\n    var FOCUSABLE_ELEMENTS = ['a[href]', 'area[href]', 'input:not([disabled])', 'select:not([disabled])', 'textarea:not([disabled])', 'button:not([disabled])', 'iframe', 'object', 'embed', '[contenteditable]', '[tabindex]:not([tabindex^=\"-\"])'];\n    var TAB_KEY = 9;\n    var ESCAPE_KEY = 27;\n    var focusedBeforeDialog;\n\n    /**\n     * Define the constructor to instantiate a dialog\n     *\n     * @constructor\n     * @param {Element} node\n     * @param {(NodeList | Element | string)} targets\n     */\n    function A11yDialog(node, targets) {\n        // Prebind the functions that will be bound in addEventListener and\n        // removeEventListener to avoid losing references\n        this._show = this.show.bind(this);\n        this._hide = this.hide.bind(this);\n        // this._maintainFocus = this._maintainFocus.bind(this);\n        this._bindKeypress = this._bindKeypress.bind(this);\n\n        // Keep a reference of the node on the instance\n        this.node = node;\n\n        // Keep an object of listener types mapped to callback functions\n        this._listeners = {};\n\n        // Initialise everything needed for the dialog to work properly\n        this.create(targets);\n    }\n\n    /**\n     * Set up everything necessary for the dialog to be functioning\n     *\n     * @param {(NodeList | Element | string)} targets\n     * @return {this}\n     */\n    A11yDialog.prototype.create = function (targets) {\n        // Keep a collection of nodes to disable/enable when toggling the dialog\n        this._targets = this._targets || collect(targets) || getSiblings(this.node);\n\n        // Make sure the dialog element is disabled on load, and that the `shown`\n        // property is synced with its value\n        this.node.setAttribute('aria-hidden', true);\n        this.shown = false;\n\n        // Keep a collection of dialog openers, each of which will be bound a click\n        // event listener to open the dialog\n        this._openers = $$('[data-a11y-dialog-show=\"' + this.node.id + '\"]');\n        this._openers.forEach(function (opener) {\n            opener.addEventListener('click', this._show);\n        }.bind(this));\n\n        // Keep a collection of dialog closers, each of which will be bound a click\n        // event listener to close the dialog\n        this._closers = $$('[data-a11y-dialog-hide]', this.node)\n            .concat($$('[data-a11y-dialog-hide=\"' + this.node.id + '\"]'));\n        this._closers.forEach(function (closer) {\n            closer.addEventListener('click', this._hide);\n        }.bind(this));\n\n        // Execute all callbacks registered for the `create` event\n        this._fire('create');\n\n        return this;\n    };\n\n    /**\n     * Show the dialog element, disable all the targets (siblings), trap the\n     * current focus within it, listen for some specific key presses and fire all\n     * registered callbacks for `show` event\n     *\n     * @param {Event} event\n     * @return {this}\n     */\n    A11yDialog.prototype.show = function (event) {\n        // If the dialog is already open, abort\n        if (this.shown) {\n            return this;\n        }\n\n        this.node.classList.add('sui-fade-in');\n        this.node.classList.remove('sui-fade-out');\n        var content = this.node.getElementsByClassName('sui-dialog-content');\n        content[0].className = 'sui-dialog-content sui-bounce-in';\n\n        // Execute all callbacks registered for the `show` event\n        this._fire('show', event);\n\n        this.shown = true;\n        this.node.removeAttribute('aria-hidden');\n\n        // Iterate over the targets to disable them by setting their `aria-hidden`\n        // attribute to `true`; in case they already have this attribute, keep a\n        // reference of their original value to be able to restore it later\n        this._targets.forEach(function (target) {\n            var original = target.getAttribute('aria-hidden');\n\n            if (original) {\n                target.setAttribute('data-a11y-dialog-original', original);\n            }\n\n            target.setAttribute('aria-hidden', 'true');\n        });\n\n        // Keep a reference to the currently focused element to be able to restore\n        // it later, then set the focus to the first focusable child of the dialog\n        // element\n        focusedBeforeDialog = document.activeElement;\n        setFocusToFirstItem(this.node);\n\n        // Bind a focus event listener to the body element to make sure the focus\n        // stays trapped inside the dialog while open, and start listening for some\n        // specific key presses (TAB and ESC)\n        // document.body.addEventListener('focus', this._maintainFocus, true);\n        document.addEventListener('keydown', this._bindKeypress);\n\n        // Add overlay class to document body.\n        document.getElementsByTagName('html')[0].classList.add('sui-has-overlay');\n\n\n        return this;\n    };\n\n    /**\n     * Hide the dialog element, enable all the targets (siblings), restore the\n     * focus to the previously active element, stop listening for some specific\n     * key presses and fire all registered callbacks for `hide` event\n     *\n     * @param {Event} event\n     * @return {this}\n     */\n    A11yDialog.prototype.hide = function (event) {\n        // If the dialog is already closed, abort\n        if (!this.shown) {\n            return this;\n        }\n\n\n        var content = this.node.getElementsByClassName('sui-dialog-content');\n\n        content[0].className = 'sui-dialog-content sui-bounce-out';\n        this.node.classList.add('sui-fade-out');\n        this.node.classList.remove('sui-fade-in');\n\n        // Execute all callbacks registered for the `hide` event\n        this._fire('hide', event);\n\n        this.shown = false;\n        // This has been set so there is enough time for the animation to show\n        var timeout_node = this.node;\n        setTimeout(function () {\n            timeout_node.setAttribute('aria-hidden', 'true');\n        }, 300);\n\n        // Iterate over the targets to enable them by remove their `aria-hidden`\n        // attribute or resetting them to their initial value\n        this._targets.forEach(function (target) {\n            var original = target.getAttribute('data-a11y-dialog-original');\n\n\n            if (original) {\n                target.setAttribute('aria-hidden', original);\n                target.removeAttribute('data-a11y-dialog-original');\n            } else {\n                target.removeAttribute('aria-hidden');\n            }\n        });\n\n        // If their was a focused element before the dialog was opened, restore the\n        // focus back to it\n        if (focusedBeforeDialog) {\n            focusedBeforeDialog.focus();\n        }\n\n        // Remove the focus event listener to the body element and stop listening\n        // for specific key presses\n        // document.body.removeEventListener('focus', this._maintainFocus, true);\n        document.removeEventListener('keydown', this._bindKeypress);\n\n        // Remove overlay class to document body.\n        document.getElementsByTagName('html')[0].classList.remove('sui-has-overlay');\n\n\n        return this;\n    };\n\n    /**\n     * Destroy the current instance (after making sure the dialog has been hidden)\n     * and remove all associated listeners from dialog openers and closers\n     *\n     * @return {this}\n     */\n    A11yDialog.prototype.destroy = function () {\n        // Hide the dialog to avoid destroying an open instance\n        this.hide();\n\n        // Remove the click event listener from all dialog openers\n        this._openers.forEach(function (opener) {\n            opener.removeEventListener('click', this._show);\n        }.bind(this));\n\n        // Remove the click event listener from all dialog closers\n        this._closers.forEach(function (closer) {\n            closer.removeEventListener('click', this._hide);\n        }.bind(this));\n\n        // Execute all callbacks registered for the `destroy` event\n        this._fire('destroy');\n\n        // Keep an object of listener types mapped to callback functions\n        this._listeners = {};\n\n        return this;\n    };\n\n    /**\n     * Register a new callback for the given event type\n     *\n     * @param {string} type\n     * @param {Function} handler\n     */\n    A11yDialog.prototype.on = function (type, handler) {\n        if (typeof this._listeners[type] === 'undefined') {\n            this._listeners[type] = [];\n        }\n\n        this._listeners[type].push(handler);\n\n        return this;\n    };\n\n    /**\n     * Unregister an existing callback for the given event type\n     *\n     * @param {string} type\n     * @param {Function} handler\n     */\n    A11yDialog.prototype.off = function (type, handler) {\n        var index = this._listeners[type].indexOf(handler);\n\n        if (index > -1) {\n            this._listeners[type].splice(index, 1);\n        }\n\n        return this;\n    };\n\n    /**\n     * Iterate over all registered handlers for given type and call them all with\n     * the dialog element as first argument, event as second argument (if any).\n     *\n     * @access private\n     * @param {string} type\n     * @param {Event} event\n     */\n    A11yDialog.prototype._fire = function (type, event) {\n        var listeners = this._listeners[type] || [];\n\n        listeners.forEach(function (listener) {\n            listener(this.node, event);\n        }.bind(this));\n    };\n\n    /**\n     * Private event handler used when listening to some specific key presses\n     * (namely ESCAPE and TAB)\n     *\n     * @access private\n     * @param {Event} event\n     */\n    A11yDialog.prototype._bindKeypress = function (event) {\n        // If the dialog is shown and the ESCAPE key is being pressed, prevent any\n        // further effects from the ESCAPE key and hide the dialog\n        if (this.shown && event.which === ESCAPE_KEY) {\n            event.preventDefault();\n            this.hide();\n        }\n\n        // If the dialog is shown and the TAB key is being pressed, make sure the\n        // focus stays trapped within the dialog element\n        if (this.shown && event.which === TAB_KEY) {\n            trapTabKey(this.node, event);\n        }\n    };\n\n    /**\n     * Private event handler used when making sure the focus stays within the\n     * currently open dialog\n     *\n     * @access private\n     * @param {Event} event\n     */\n    A11yDialog.prototype._maintainFocus = function (event) {\n        // If the dialog is shown and the focus is not within the dialog element,\n        // move it back to its first focusable child\n        if (this.shown && !this.node.contains(event.target)) {\n            setFocusToFirstItem(this.node);\n        }\n    };\n\n    /**\n     * Convert a NodeList into an array\n     *\n     * @param {NodeList} collection\n     * @return {Array<Element>}\n     */\n    function toArray(collection) {\n        return Array.prototype.slice.call(collection);\n    }\n\n    /**\n     * Query the DOM for nodes matching the given selector, scoped to context (or\n     * the whole document)\n     *\n     * @param {String} selector\n     * @param {Element} [context = document]\n     * @return {Array<Element>}\n     */\n    function $$(selector, context) {\n        return toArray((context || document).querySelectorAll(selector));\n    }\n\n    /**\n     * Return an array of Element based on given argument (NodeList, Element or\n     * string representing a selector)\n     *\n     * @param {(NodeList | Element | string)} target\n     * @return {Array<Element>}\n     */\n    function collect(target) {\n        if (NodeList.prototype.isPrototypeOf(target)) {\n            return toArray(target);\n        }\n\n        if (Element.prototype.isPrototypeOf(target)) {\n            return [target];\n        }\n\n        if (typeof target === 'string') {\n            return $$(target);\n        }\n    }\n\n    /**\n     * Set the focus to the first focusable child of the given element\n     *\n     * @param {Element} node\n     */\n    function setFocusToFirstItem(node) {\n        var focusableChildren = getFocusableChildren(node);\n\n        if (focusableChildren.length) {\n            focusableChildren[0].focus();\n        }\n    }\n\n    /**\n     * Get the focusable children of the given element\n     *\n     * @param {Element} node\n     * @return {Array<Element>}\n     */\n    function getFocusableChildren(node) {\n        return $$(FOCUSABLE_ELEMENTS.join(','), node).filter(function (child) {\n            return !!(child.offsetWidth || child.offsetHeight || child.getClientRects().length);\n        });\n    }\n\n    /**\n     * Trap the focus inside the given element\n     *\n     * @param {Element} node\n     * @param {Event} event\n     */\n    function trapTabKey(node, event) {\n        var focusableChildren = getFocusableChildren(node);\n        var focusedItemIndex = focusableChildren.indexOf(document.activeElement);\n\n        // If the SHIFT key is being pressed while tabbing (moving backwards) and\n        // the currently focused item is the first one, move the focus to the last\n        // focusable item from the dialog element\n        if (event.shiftKey && focusedItemIndex === 0) {\n            focusableChildren[focusableChildren.length - 1].focus();\n            event.preventDefault();\n            // If the SHIFT key is not being pressed (moving forwards) and the currently\n            // focused item is the last one, move the focus to the first focusable item\n            // from the dialog element\n        } else if (!event.shiftKey && focusedItemIndex === focusableChildren.length - 1) {\n            focusableChildren[0].focus();\n            event.preventDefault();\n        }\n    }\n\n    /**\n     * Retrieve siblings from given element\n     *\n     * @param {Element} node\n     * @return {Array<Element>}\n     */\n    function getSiblings(node) {\n        var nodes = toArray(node.parentNode.childNodes);\n        var siblings = nodes.filter(function (node) {\n            return node.nodeType === 1;\n        });\n\n        siblings.splice(siblings.indexOf(node), 1);\n\n        return siblings;\n    }\n\n    if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\n        module.exports = A11yDialog;\n    } else if (typeof define === 'function' && define.amd) {\n        define('A11yDialog', [], function () {\n            return A11yDialog;\n        });\n    } else if (typeof global === 'object') {\n        global.A11yDialog = A11yDialog;\n    }\n}(typeof global !== 'undefined' ? global : window));\n","require('@wpmudev/shared-ui/dist/js/_src/modals');\n\nconst WPHBReports = {\n  modal: document.getElementById('wphb-performance-dialog'),\n  contentContainer: document.getElementById('wphb-performance-content'),\n  timer: false,\n  progress: 0,\n  name: '',\n  nonce: '',\n  settings: {\n    scanning: false,\n    finished: false,\n    email: '',\n  },\n\n  /**\n   * Initialize the module.\n   */\n  init: function() {\n    if ( ! this.modal ) {\n      return;\n    }\n\n    this.renderTemplate();\n  },\n\n  /**\n   * Update the template, register new listeners.\n   */\n  renderTemplate: function() {\n    const template = WPHBReports.template('wphb-performance');\n    const content = template(this.settings);\n\n    if ( content ) {\n      this.contentContainer.innerHTML = content;\n      this.contentContainer.classList.add('loaded');\n    }\n\n    this.mapActions();\n  },\n\n  /**\n   * Map the \"Run Test\" actions.\n   */\n  mapActions: function() {\n    const form = this.modal.querySelector('form');\n    const self = this;\n\n    if ( form ) {\n      form.addEventListener('submit', function(e) {\n        e.preventDefault();\n\n        self.name = self.modal.querySelector('input[id=\"name\"]').value;\n        self.email = self.modal.querySelector('input[id=\"email\"]').value;\n        self.nonce = document.getElementById('_wpnonce').value;\n\n        self.settings.scanning = true;\n        self.renderTemplate();\n        self.runTest();\n      });\n    }\n  },\n\n  /**\n   * Run performance test.\n   */\n  runTest: function() {\n    if ( ! this.name || ! this.email || ! this.nonce ) {\n      return;\n    }\n\n    const self = this;\n\n    // Update progress bar.\n    this.updateProgressBar();\n\n    const xhr = new XMLHttpRequest();\n    xhr.open('POST', ajaxurl+'?action=wphb_performance_run_test', true);\n    xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n    xhr.onload = () => {\n      const response = JSON.parse(xhr.response);\n\n      if ( ! response['data']['finished'] ) {\n        // Try again 3 seconds later\n        window.setTimeout(() => self.runTest(), 3000);\n      } else {\n        self.progress = 100;\n        self.updateProgressBar();\n        self.settings.finished = true;\n        self.settings.email = self.email;\n        self.renderTemplate();\n      }\n    };\n\n    xhr.send('user='+this.name+'&email='+this.email+'&url='+window.location.href+'&_ajax_nonce='+this.nonce);\n  },\n\n  updateProgressBar: function() {\n    // Test has been initialized.\n    if ( 0 === this.progress ) {\n      this.progress = 2;\n\n      this.timer = window.setInterval(() => {\n        this.progress += 1;\n        this.updateProgressBar();\n      }, 100 );\n    }\n\n    const progressStatus = this.modal.querySelector('.sui-progress-state-text');\n\n    if ( 3 === this.progress ) {\n      progressStatus.innerHTML = wphbGlobal.scanRunning;\n    }\n\n    if ( 73 === this.progress ) {\n      clearInterval( this.timer );\n      this.timer = false;\n\n      this.timer = window.setInterval(() => {\n        this.progress += 1;\n        this.updateProgressBar();\n      }, 1000 );\n\n      progressStatus.innerHTML = wphbGlobal.scanAnalyzing;\n    }\n\n    if ( 99 === this.progress ) {\n      progressStatus.innerHTML = wphbGlobal.scanWaiting;\n      clearInterval( this.timer );\n      this.timer = false;\n    }\n\n    this.modal.querySelector('.sui-progress-text span')\n        .innerHTML = this.progress + '%';\n    this.modal.querySelector('.sui-progress-bar span')\n        .style.width = this.progress + '%';\n\n    if ( 100 === this.progress ) {\n      const progressIcon = this.modal.querySelector('i.sui-icon-loader');\n      progressIcon.classList.remove('sui-icon-loader', 'sui-loading');\n      progressIcon.classList.add('sui-icon-check');\n      progressStatus.innerHTML = wphbGlobal.scanComplete;\n      clearInterval( this.timer );\n      this.timer = false;\n    }\n  },\n};\n\n/**\n * Template function (underscores based).\n *\n * @type {Function}\n */\nWPHBReports.template = _.memoize((id) => {\n  let compiled;\n  const options = {\n    evaluate: /<#([\\s\\S]+?)#>/g,\n    interpolate: /{{{([\\s\\S]+?)}}}/g,\n    escape: /{{([^}]+?)}}(?!})/g,\n    variable: 'data',\n  };\n\n  return (data) => {\n    _.templateSettings = options;\n    compiled = compiled || _.template(document.getElementById(id).innerHTML);\n    return compiled(data);\n  };\n});\n\nexport default WPHBReports;\n","import WPHBReports from './performance/reports';\n\n( function() {\n  'use strict';\n\n  const WPHBGlobal = {\n    menuButton: document.querySelector('#wp-admin-bar-wphb-clear-cache > a'),\n    noticeButton: document.getElementById('wp-admin-notice-wphb-clear-cache'),\n    reportButton: document\n        .getElementById('wp-admin-bar-wphb-performance-report'),\n    ajaxurl: null,\n\n    init: function() {\n      /** @var {array} wphbGlobal */\n      if ( wphbGlobal ) {\n        this.ajaxurl = wphbGlobal.ajaxurl;\n      } else {\n        this.ajaxurl = ajaxurl;\n      }\n\n      WPHBReports.init();\n\n      if ( this.menuButton ) {\n        this.menuButton.addEventListener(\n            'click',\n            () => this.post(WPHBGlobal.ajaxurl, 'wphb_front_clear_cache')\n        );\n      }\n\n      if ( this.noticeButton ) {\n        this.noticeButton.addEventListener(\n            'click',\n            () => this.post(WPHBGlobal.ajaxurl,'wphb_global_clear_cache')\n        );\n      }\n\n      if ( this.reportButton ) {\n        this.reportButton.addEventListener(\n            'click',\n            () => SUI.dialogs['wphb-performance-dialog'].show()\n        );\n      }\n    },\n\n    post: (url, action) => {\n      const xhr = new XMLHttpRequest();\n      xhr.open( 'POST', url+'?action='+action );\n      xhr.onload = function() {\n        if (xhr.status === 200) {\n          location.reload();\n        } else {\n          console.log( 'Request failed.  Returned status of ' + xhr.status );\n        }\n      };\n      xhr.send();\n    },\n  };\n\n  document.addEventListener('DOMContentLoaded', function() {\n    WPHBGlobal.init();\n  } );\n}());\n"],"sourceRoot":""}