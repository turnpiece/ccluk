var NestedPages=NestedPages||{};NestedPages.SettingsReset=function(){var e=this,t=jQuery;return e.selectors={resetButton:"data-nestedpages-reset-settings",resetForm:".nestedpages-reset-settings",formComplete:".nestedpages-reset-settings-complete"},e.bindEvents=function(){t(document).on("click","["+e.selectors.resetButton+"]",function(t){t.preventDefault(),e.resetSettings()})},e.resetSettings=function(){e.loading(!0),t.ajax({url:NestedPages.jsData.ajaxurl,type:"post",datatype:"json",data:{action:NestedPages.formActions.resetSettings,nonce:NestedPages.jsData.nonce},success:function(s){e.loading(!1),t(e.selectors.resetForm).hide(),t(e.selectors.formComplete).show(),"success"!==s.status&&console.log("There was an error saving toggled pages.")}})},e.loading=function(s){s?t("["+e.selectors.resetButton+"]").attr("disabled",!0):t("["+e.selectors.resetButton+"]").removeAttr("disabled")},e.bindEvents()},new NestedPages.SettingsReset,(NestedPages=NestedPages||{}).Settings=function(){var e=this,t=jQuery;return e.selectors={postTypeToggle:"[data-toggle-nestedpages-pt-settings]",postTypeCheckbox:"[data-nestedpages-settings-row-checkbox]",customFieldsCheckbox:"[data-toggle-nestedpages-cf-settings]",standardFieldsCheckbox:"[data-toggle-nestedpages-sf-settings]",taxonomiesFieldCheckbox:"[data-hide-taxonomies]",thumbnailsCheckbox:"[data-enable-thumbnails]",menuEnabledOption:"[data-menu-enabled-option]",disableMenuCheckbox:"[data-disable-menu-checkbox]",disableAutoCheckbox:"[data-menu-disable-auto-checkbox]",assignPostTypeCheckbox:"[data-nestedpages-assign-post-type]",assignPostTypeId:"[data-nested-pages-assign-post-type-id]",assignPostTypeTitle:"[data-nested-pages-assign-post-type-title]",assignPostTypeOption:"[data-assignment-page-id]",assignPostTypeRemove:"[data-nestedpages-page-pt-assignment-remove]",assignPostTypeSelection:"[data-nestedpages-page-pt-assignment-selection]"},e.bindEvents=function(){t(document).ready(function(){e.toggleAllSettingsButtons(),e.toogleAllFieldSettings(".custom-fields"),e.toogleAllFieldSettings(".standard-fields"),e.toggleMenuCheckboxes(),e.toggleHideCheckbox(),e.toggleAssignPostType()}),t(document).on("click",e.selectors.postTypeToggle,function(s){s.preventDefault(),e.toggleRow(t(this))}),t(document).on("change",e.selectors.postTypeCheckbox,function(){e.toggleSettingsButton(t(this))}),t(document).on("change",e.selectors.customFieldsCheckbox,function(){e.toogleFieldSettings(t(this),".custom-fields")}),t(document).on("change",e.selectors.standardFieldsCheckbox,function(){e.toogleFieldSettings(t(this),".standard-fields")}),t(document).on("change",e.selectors.taxonomiesFieldCheckbox,function(){e.toggleTaxonomyCheckboxes(t(this))}),t(document).on("change",e.selectors.thumbnailsCheckbox,function(){e.toggleThumbnailSettings(t(this))}),t(document).on("change",e.selectors.disableMenuCheckbox,function(){e.toggleMenuCheckboxes()}),t(document).on("change",e.selectors.disableAutoCheckbox,function(){e.toggleHideCheckbox()}),t(document).on("change",e.selectors.assignPostTypeCheckbox,function(){e.toggleAssignPostType()}),t(document).on("click",e.selectors.assignPostTypeOption,function(s){s.preventDefault(),e.chooseAssignPostType(t(this))}),t(document).on("click",e.selectors.assignPostTypeRemove,function(s){s.preventDefault(),e.removeAssignPostType(t(this))})},e.toggleRow=function(e){t(e).parent(".head").siblings(".body").toggle(),t(e).parents(".row-container").toggleClass("active")},e.toggleSettingsButton=function(s){var n=t(s).parents(".head").find(e.selectors.postTypeToggle);if(t(s).is(":checked"))return t(n).show(),void t(n).parents(".head").siblings(".body").find('input[type="hidden"]').attr("disabled",!1);t(n).hide(),t(n).parents(".head").siblings(".body").hide(),t(n).parents(".row-container").removeClass("active"),t(n).parents(".head").siblings(".body").find('input[type="checkbox"]').attr("checked",!1),t(n).parents(".head").siblings(".body").find('input[type="hidden"]').attr("disabled",!0),t(n).parents(".head").siblings(".body").find("select").val(!1)},e.toggleAllSettingsButtons=function(){var s=t(e.selectors.postTypeCheckbox);t.each(s,function(){e.toggleSettingsButton(t(this))})},e.toogleFieldSettings=function(e,s){var n=t(e).parents(".body").find(s);t(e).is(":checked")?t(n).show():t(n).hide()},e.toogleAllFieldSettings=function(s){n=t(e.selectors.customFieldsCheckbox);if(".standard-fields"==s)var n=t(e.selectors.standardFieldsCheckbox);t.each(n,function(){e.toogleFieldSettings(t(this),s)})},e.toggleTaxonomyCheckboxes=function(e){var s=t(e).parents("ul").find(t("*[data-taxonomy-single]"));t(e).is(":checked")?t(s).hide():t(s).show()},e.toggleThumbnailSettings=function(e){var s=t(e).parents(".field").find(t("*[data-thumbnail-options]"));t(e).is(":checked")?t(s).show():t(s).hide()},e.toggleMenuCheckboxes=function(){var s=t(e.selectors.disableMenuCheckbox),n=t(e.selectors.menuEnabledOption);t(s).is(":checked")?t(n).hide():t(n).show()},e.toggleHideCheckbox=function(){var s=t(e.selectors.disableAutoCheckbox),n=t("[data-menu-hide-checkbox]");t(s).is(":checked")?t(n).hide():t(n).show()},e.toggleAssignPostType=function(){var s=t(e.selectors.assignPostTypeCheckbox);t.each(s,function(){var e=t(this),s=t(this).parents(".field").find(".nestedpages-assignment-display");t(e).is(":checked")?t(s).show():t(s).hide()})},e.chooseAssignPostType=function(s){var n=t(s).attr("data-assignment-page-id"),o=t(s).attr("data-assignment-page-title"),i=t(s).parents(".field"),a=nestedpages.currently_assigned_to+" "+o+' <a href="#" data-nestedpages-page-pt-assignment-remove>('+nestedpages.remove+")</a>";t(i).find(e.selectors.assignPostTypeId).val(n),t(i).find(e.selectors.assignPostTypeTitle).val(o),t(i).find(e.selectors.assignPostTypeSelection).html(a).show(),t(i).find("[data-nestedpages-post-search-form]").hide()},e.removeAssignPostType=function(s){var n=t(s).parents(".field");t(n).find(e.selectors.assignPostTypeSelection).hide(),t(n).find("[data-nestedpages-post-search-form]").show(),t(n).find(e.selectors.assignPostTypeId).val(""),t(n).find(e.selectors.assignPostTypeTitle).val("")},e.init=function(){e.bindEvents()},e.init()},new NestedPages.Settings;