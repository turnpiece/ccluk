var NestedPages;(NestedPages=NestedPages||{}).SettingsReset=function(){var t=this,s=jQuery;return t.selectors={resetButton:"data-nestedpages-reset-settings",resetForm:".nestedpages-reset-settings",formComplete:".nestedpages-reset-settings-complete"},t.bindEvents=function(){s(document).on("click","["+t.selectors.resetButton+"]",function(e){e.preventDefault(),t.resetSettings()})},t.resetSettings=function(){t.loading(!0),s.ajax({url:NestedPages.jsData.ajaxurl,type:"post",datatype:"json",data:{action:NestedPages.formActions.resetSettings,nonce:NestedPages.jsData.nonce},success:function(e){t.loading(!1),s(t.selectors.resetForm).hide(),s(t.selectors.formComplete).show(),"success"!==e.status&&console.log("There was an error saving toggled pages.")}})},t.loading=function(e){e?s("["+t.selectors.resetButton+"]").attr("disabled",!0):s("["+t.selectors.resetButton+"]").removeAttr("disabled")},t.bindEvents()},new NestedPages.SettingsReset,(NestedPages=NestedPages||{}).Settings=function(){var i=this,a=jQuery;return i.selectors={postTypeToggle:"[data-toggle-nestedpages-pt-settings]",postTypeCheckbox:"[data-nestedpages-settings-row-checkbox]",customFieldsCheckbox:"[data-toggle-nestedpages-cf-settings]",standardFieldsCheckbox:"[data-toggle-nestedpages-sf-settings]",taxonomiesFieldCheckbox:"[data-hide-taxonomies]",thumbnailsCheckbox:"[data-enable-thumbnails]",menuEnabledOption:"[data-menu-enabled-option]",disableMenuCheckbox:"[data-disable-menu-checkbox]",disableAutoCheckbox:"[data-menu-disable-auto-checkbox]",assignPostTypeCheckbox:"[data-nestedpages-assign-post-type]",assignPostTypeId:"[data-nested-pages-assign-post-type-id]",assignPostTypeTitle:"[data-nested-pages-assign-post-type-title]",assignPostTypeOption:"[data-assignment-page-id]",assignPostTypeRemove:"[data-nestedpages-page-pt-assignment-remove]",assignPostTypeSelection:"[data-nestedpages-page-pt-assignment-selection]",sortOptionCheckbox:"[data-nestedpages-sort-option-checkbox]",defaultSortOptions:"[data-nestedpages-sort-option-default]"},i.bindEvents=function(){a(document).ready(function(){i.toggleAllSettingsButtons(),i.toogleAllFieldSettings(".custom-fields"),i.toogleAllFieldSettings(".standard-fields"),i.toggleMenuCheckboxes(),i.toggleHideCheckbox(),i.toggleAssignPostType(),i.toggleAllDefaultSortOptions()}),a(document).on("click",i.selectors.postTypeToggle,function(e){e.preventDefault(),i.toggleRow(a(this))}),a(document).on("change",i.selectors.postTypeCheckbox,function(){i.toggleSettingsButton(a(this))}),a(document).on("change",i.selectors.customFieldsCheckbox,function(){i.toogleFieldSettings(a(this),".custom-fields")}),a(document).on("change",i.selectors.standardFieldsCheckbox,function(){i.toogleFieldSettings(a(this),".standard-fields")}),a(document).on("change",i.selectors.taxonomiesFieldCheckbox,function(){i.toggleTaxonomyCheckboxes(a(this))}),a(document).on("change",i.selectors.thumbnailsCheckbox,function(){i.toggleThumbnailSettings(a(this))}),a(document).on("change",i.selectors.disableMenuCheckbox,function(){i.toggleMenuCheckboxes()}),a(document).on("change",i.selectors.disableAutoCheckbox,function(){i.toggleHideCheckbox()}),a(document).on("change",i.selectors.assignPostTypeCheckbox,function(){i.toggleAssignPostType()}),a(document).on("click",i.selectors.assignPostTypeOption,function(e){e.preventDefault(),i.chooseAssignPostType(a(this))}),a(document).on("click",i.selectors.assignPostTypeRemove,function(e){e.preventDefault(),i.removeAssignPostType(a(this))}),a(document).on("change",i.selectors.sortOptionCheckbox,function(){i.toggleDefaultSortOptions(a(this))})},i.toggleRow=function(e){a(e).parent(".head").siblings(".body").toggle(),a(e).parents(".row-container").toggleClass("active")},i.toggleSettingsButton=function(e){var t=a(e).parents(".head").find(i.selectors.postTypeToggle);if(a(e).is(":checked"))return a(t).show(),void a(t).parents(".head").siblings(".body").find('input[type="hidden"]').attr("disabled",!1);a(t).hide(),a(t).parents(".head").siblings(".body").hide(),a(t).parents(".row-container").removeClass("active"),a(t).parents(".head").siblings(".body").find('input[type="checkbox"]').attr("checked",!1),a(t).parents(".head").siblings(".body").find('input[type="hidden"]').attr("disabled",!0),a(t).parents(".head").siblings(".body").find("select").val(!1)},i.toggleAllSettingsButtons=function(){var e=a(i.selectors.postTypeCheckbox);a.each(e,function(){i.toggleSettingsButton(a(this))})},i.toogleFieldSettings=function(e,t){var s=a(e).parents(".body").find(t);a(e).is(":checked")?a(s).show():a(s).hide()},i.toogleAllFieldSettings=function(e){var t=a(i.selectors.customFieldsCheckbox);if(".standard-fields"==e)t=a(i.selectors.standardFieldsCheckbox);a.each(t,function(){i.toogleFieldSettings(a(this),e)})},i.toggleTaxonomyCheckboxes=function(e){var t=a(e).parents("ul").find(a("*[data-taxonomy-single]"));a(e).is(":checked")?a(t).hide():a(t).show()},i.toggleThumbnailSettings=function(e){var t=a(e).parents(".field").find(a("*[data-thumbnail-options]"));a(e).is(":checked")?a(t).show():a(t).hide()},i.toggleMenuCheckboxes=function(){var e=a(i.selectors.disableMenuCheckbox),t=a(i.selectors.menuEnabledOption);a(e).is(":checked")?a(t).hide():a(t).show()},i.toggleHideCheckbox=function(){var e=a(i.selectors.disableAutoCheckbox),t=a("[data-menu-hide-checkbox]");a(e).is(":checked")?a(t).hide():a(t).show()},i.toggleAssignPostType=function(){var e=a(i.selectors.assignPostTypeCheckbox);a.each(e,function(){var e=a(this),t=a(this).parents(".field").find(".nestedpages-assignment-display");a(e).is(":checked")?a(t).show():a(t).hide()})},i.chooseAssignPostType=function(e){var t=a(e).attr("data-assignment-page-id"),s=a(e).attr("data-assignment-page-title"),o=a(e).parents(".field"),n=nestedpages.currently_assigned_to+" "+s+' <a href="#" data-nestedpages-page-pt-assignment-remove>('+nestedpages.remove+")</a>";a(o).find(i.selectors.assignPostTypeId).val(t),a(o).find(i.selectors.assignPostTypeTitle).val(s),a(o).find(i.selectors.assignPostTypeSelection).html(n).show(),a(o).find("[data-nestedpages-post-search-form]").hide()},i.removeAssignPostType=function(e){var t=a(e).parents(".field");a(t).find(i.selectors.assignPostTypeSelection).hide(),a(t).find("[data-nestedpages-post-search-form]").show(),a(t).find(i.selectors.assignPostTypeId).val(""),a(t).find(i.selectors.assignPostTypeTitle).val("")},i.toggleAllDefaultSortOptions=function(){var e=a(i.selectors.sortOptionCheckbox);a.each(e,function(){i.toggleDefaultSortOptions(a(this))})},i.toggleDefaultSortOptions=function(e){var t=!!a(e).is(":checked"),s=a(e).parent("label").next(i.selectors.defaultSortOptions);a(s).length<1||(t?a(s).show():a(s).hide())},i.bindEvents()},new NestedPages.Settings;