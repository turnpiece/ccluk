/*! Google Maps Pro - v2.9.5
 * http://premium.wpmudev.org/project/wordpress-google-maps-plugin
 * Copyright (c) 2018; * Licensed GPLv2+ */
jQuery(function(){function a(){B.size(740,jQuery(window).height()-100)}function b(){var b=function(){jQuery(document).trigger("agm_map_editor_open"),jQuery(window).on("resize",a)},c=function(){jQuery(window).off("resize",a),jQuery(document).trigger("agm_map_editor_close"),C=null,B=null};return null===B?(B=wpmUi.popup(),B&&!B.close&&B.hide&&(B.close=B.hide)):B.close(),B.title(l10nEditor.google_maps).set_class("agm-editor").modal(!0).content(jQuery("#map_container_src")).onclose(c).show(),C=B.$(),wpmUi.upgrade_tooltips(),b(),!1}function c(){var a={action:"agm_list_maps"};jQuery.post(window.ajaxurl,a,d)}function d(a){if(null!==C){var b,c,e,f=a.maps?a.maps.length:0,g=a.total?parseInt(a.total,10):0,h=jQuery(".agm-paging_bar",C),i=jQuery(".maps_existing_result",C),j=h.length?parseInt(h.attr("data-increment"),10):0,k=j+1,l=j-1;if(g){b=jQuery("<ul></ul>");for(var m=0;m<a.maps.length;m+=1){var n=a.maps[m];b.append('<li class="existing_map_item"><div class="map_item_title"><a href="#" class="edit_map_item" title="'+l10nEditor.preview_or_edit+'">'+n.title+'</a></div><a href="#" title="'+l10nEditor.use_this_map+'"><code class="map-shortcode add_map_item">['+_agmConfig.shortcode+' id="<strong>'+n.id+'</strong>"]</code></a><input type="hidden" value="'+n.id+'" /><div class="map_item_actions"><a href="#" class="edit_map_item">'+l10nEditor.preview_or_edit+'</a>&nbsp;|&nbsp;<a href="#" class="add_map_item">'+l10nEditor.use_this_map+'</a><a href="#" class="delete_map_item"><i class="dashicons dashicons-trash"></i>'+l10nEditor.delete_map+"</a></div></li>")}}else b=jQuery('<div class="tc"></div>'),b.append(l10nEditor.no_maps);i.empty().append(b),g>f&&(h=jQuery('<div class="agm-paging_bar" data-increment="'+j+'" />'),h.appendTo(i),l>=0&&(e=jQuery('<a href="#" class="agm-load_prev_maps">'+l10nEditor.load_prev_maps+"</a>"),e.appendTo(h).bind("click",function(){return h.attr("data-increment",l),jQuery.post(window.ajaxurl,{action:"agm_list_maps",increment:l},d),!1})),f&&(c=jQuery('<a href="#" class="agm-load_next_maps">'+l10nEditor.load_next_maps+"</a>"),c.appendTo(h).bind("click",function(){return h.attr("data-increment",k),jQuery.post(window.ajaxurl,{action:"agm_list_maps",increment:k},d),!1}))),f||g||y(),jQuery(window).trigger("resize")}}function e(){if(null!==C){var a=jQuery(this),b=a.parents("li").find("input:hidden").val();B.confirm({message:l10nEditor.delete_confirmation,buttons:[l10nEditor.confirm_delete,l10nEditor.confirm_cancel],callback:function(a){0===a&&f(b)}})}}function f(a){jQuery.post(window.ajaxurl,{action:"agm_delete_map",id:a},function(a){c()})}function g(a,b){return null===C?"":a?b&&b.length?" ["+_agmConfig.shortcode+' id="'+a+'"]'+b+"[/"+_agmConfig.shortcode+"] ":" ["+_agmConfig.shortcode+' id="'+a+'"] ':""}function h(){if(null!==C){var a=jQuery(this),b=a.parents("li").find("input:hidden").val(),c=g(b,j());return i(c),B.close(),!1}}function i(a){if(null!==C){if(a=wpmUi.apply_filters("agm-insert-marker",a)||"",!a.length)return!1;var b;return(wp||{}).blocks?(jQuery(document).trigger("agm-map-inserted",a),!1):void(window.tinyMCE&&!jQuery("#content").is(":visible")?(b=window.tinyMCE.activeEditor.selection.getContent(),window.tinyMCE.execCommand("mceInsertContent",!0,a)):k(jQuery("#content").get(0),a))}}function j(){if(null!==C){var a,b,c,d,e="";if(window.tinyMCE&&!jQuery("#content").is(":visible")){var f=(window.tinyMCE.activeEditor||{}).selection;e=f&&f.getContent()?f.getContent():""}else a=jQuery("#content").get(0),void 0!==document.selection?(a.focus(),b=document.selection.createRange(),e=b.text):void 0!==a.selectionStart&&(c=a.selectionStart,d=a.selectionEnd,e=a.value.substring(c,d));return e}}function k(a,b){if(null!==C){var c,d,e;document.selection&&!window.opera?(a.focus(),c=window.opener.document.selection.createRange(),c.text=b):void 0===a.selectionStart||isNaN(a.selectionStart)?a.value+=b:(d=a.selectionStart,e=a.selectionEnd,a.value=a.value.substring(0,d)+b+a.value.substring(e,a.value.length))}}function l(a){if(null!==C){void 0!==a.title&&a.title.length?B.title(l10nEditor.edit_map):B.title(l10nEditor.new_map);var b=jQuery(".map_preview_container",C);A&&A.destroy(),A=new window.AgmMapHandler(b,a)}}function m(){if(null!==C){var a=jQuery(this),b=a.parents("li").find("input").val();jQuery.post(window.ajaxurl,{action:"agm_load_map",id:b},l),jQuery(".maps_new_switch_container",C).hide(),jQuery(".maps_advanced_container",C).hide(),jQuery(".maps_existing",C).hide()}}function n(){null!==C&&(jQuery.post(window.ajaxurl,{action:"agm_new_map"},l),jQuery(".maps_new_switch_container",C).hide(),jQuery(".maps_advanced_container",C).hide(),jQuery(".maps_existing",C).hide())}function o(){null!==C&&(C.hasClass("advanced-mode")?r():p())}function p(){null!==C&&(C.addClass("advanced-mode"),jQuery("li.existing_map_item").each(function(){var a=jQuery(this),b=a.find("input:hidden").val(),c=jQuery('<div class="map_advanced_checkbox_container"><input type="checkbox" class="map_advanced_checkbox" value="'+b+'" /><div style="clear:both"></div></div>');a.addClass("advanced-mode"),jQuery(".map_advanced_checkbox",c).click(function(){jQuery(this).prop("checked")?a.addClass("selected"):a.removeClass("selected"),q()}),a.prepend(c)}),jQuery(".advanced_mode_buttons",C).show(),jQuery(".maps_advanced_switch .text",C).text(l10nEditor.advanced_off),jQuery(".maps_merge_locations",C).click(s),jQuery(".maps_batch_delete",C).click(t),q())}function q(){var a=jQuery("li.existing_map_item .map_advanced_checkbox:checked"),b=0===a.length;jQuery(".maps_merge_locations",C).prop("disabled",b),jQuery(".maps_batch_delete",C).prop("disabled",b)}function r(){null!==C&&(C.removeClass("advanced-mode"),jQuery(".map_advanced_checkbox_container",C).remove(),jQuery(".advanced_mode_buttons",C).hide(),jQuery(".existing_map_item.selected",C).removeClass("selected"),jQuery(".existing_map_item.advanced-mode",C).removeClass("advanced-mode"),jQuery(".maps_merge_locations",C).unbind("click"),jQuery(".maps_batch_delete",C).unbind("click"),jQuery(".maps_advanced_mode_help_container",C).html(l10nEditor.advanced_mode_activate_help),jQuery(".maps_advanced_switch .text",C).text(l10nEditor.advanced))}function s(){var a=jQuery("li.existing_map_item .map_advanced_checkbox:checked"),b=[];a.each(function(){b.push(jQuery(this).val())}),jQuery.post(window.ajaxurl,{action:"agm_merge_maps",ids:b},function(a){var b=jQuery(".map_preview_container",C);r(),w(),A&&A.destroy(),A=new window.AgmMapHandler(b,a),jQuery(".maps_existing",C).hide()})}function t(){if(null!==C){var a=jQuery("li.existing_map_item .map_advanced_checkbox:checked"),b=[];a.each(function(){b.push(jQuery(this).val())}),B.confirm({message:l10nEditor.batch_delete_confirmation,buttons:[l10nEditor.confirm_delete,l10nEditor.confirm_cancel],callback:function(a){0===a&&u(b)}})}}function u(a){jQuery.post(window.ajaxurl,{action:"agm_batch_delete",ids:a},function(a){r(),c()})}function v(){var a=jQuery(".map_preview_container",C),b=jQuery(".maps_existing",C),c=jQuery(".maps_new_switch_container",C),d=jQuery(".maps_advanced_container",C);A&&A.destroy(),b.show(),c.show(),d.show(),B.title(l10nEditor.existing_map),jQuery.browser.webkit&&a.css({height:0,width:0})}function w(){var a=jQuery(".map_preview_container",C),b=jQuery(".maps_existing",C),c=jQuery(".maps_new_switch_container",C),d=jQuery(".maps_advanced_container",C);A&&A.destroy(),b.hide(),c.hide(),d.hide(),jQuery.browser.webkit&&a.css({height:0,width:0})}function x(){null!==C&&(v(),c())}function y(){null!==C&&(w(),n())}function z(a,b){if(null!==C){var c=g(b);return i(c),B.close(),!1}}var A=!1,B=null,C=null,D=jQuery("#wp-content-media-buttons");(D.length||(wp||{}).element)&&(D.append('<a title="'+l10nEditor.google_maps+'" class="button add_map" href="#"><img alt="'+l10nEditor.google_maps+'" src="'+_agm.root_url+'/img/system/globe-button.gif"></a>'),jQuery("body").append('<div id="map_container_src" style="display:none"><div id="map_container">'+(_agm.is_multisite?"":'<p class="agm_less_important">For more detailed instructions on how to use refer to <a target="_blank" href="http://premium.wpmudev.org/project/wordpress-google-maps-plugin/#usage">WPMU DEV Maps Installation and Use instructions</a>.</p>')+'<div class="agm_container maps_existing"><div class="maps_existing_result"><div class="tc"><img src="'+_agm.root_url+'/img/system/loading.gif" /></div><div class="tc">'+l10nEditor.loading+'</div></div></div><div class="map_preview_container"><div class="map_preview"></div></div><div class="buttons"><span class="maps_advanced_container"><button type="button" class="button-secondary action maps_advanced_switch"data-tooltip="'+l10nEditor.advanced_mode_activate_help+'" data-width="500"><i class="dashicons dashicons-admin-tools"></i> <span class="text">'+l10nEditor.advanced+'</span></button><span class="advanced_mode_buttons" style="display:none"><button type="button" class="button-secondary action maps_merge_locations" data-tooltip="'+l10nEditor.advanced_mode_help+'" data-width="500">'+l10nEditor.merge_locations+'</button><button type="button" class="button-secondary action maps_batch_delete">'+l10nEditor.batch_delete+'</button></span></span><span class="maps_new_switch_container"><button type="button" class="button-secondary action maps_new_switch" data-tooltip="'+l10nEditor.new_map_intro+'" data-width="500"><i class="dashicons dashicons-plus"></i> '+l10nEditor.new_map+"</button></span></div></div></div>"),jQuery(document).on("click",".add_map",b),jQuery(document).on("click",".agm-editor .maps_new_switch",y),jQuery(document).on("agm_map_editor_open",x),jQuery(document).on("agm_map_close",".agm-editor .map_preview_container",x),jQuery(document).on("click","li.existing_map_item .add_map_item",h).on("click","li.existing_map_item .edit_map_item",m).on("click","li.existing_map_item .delete_map_item",e),jQuery(document).on("agm_map_insert",".agm-editor .map_preview_container",z),jQuery(document).on("click",".agm-editor .maps_advanced_switch",o),jQuery("body").on("mouseover","li.existing_map_item",function(){jQuery(this).addClass("agm_active_item")}).on("mouseout","li.existing_map_item",function(){jQuery(this).removeClass("agm_active_item")}))});