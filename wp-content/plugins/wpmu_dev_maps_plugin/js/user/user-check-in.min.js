/*! Google Maps - v2.9.3
 * http://premium.wpmudev.org/project/wordpress-google-maps-plugin
 * Copyright (c) 2017; * Licensed GPLv2+ */
jQuery(function(){var a=jQuery(document),b="",c=!0,d=null,e=function(a,b,d){c=!!d.automatic&&c;var e=jQuery(b.getDiv()).closest(".agm_google_maps");if(d.show_button&&e.length){var f=jQuery("#agm_mh_footer",e),g=jQuery('<span class="agm-checkin-action"></span>');g.prependTo(f),l()}};a.bind("agm_google_maps-user-map_initialized",e);var f=function o(){return"object"!=typeof _agm||_agm.initialized?!!navigator.geolocation&&(!!_agmUci.do_checkin&&(!!c&&void("on"===_agmUci.allow_checkin?i():"ask"===_agmUci.allow_checkin&&h()))):(window.setTimeout(o,100),!1)},g=function(a){return a.stopPropagation(),i(),!1},h=function(){var a=_agmUci.lang;d=jQuery('<div class="agm-confirm"></div>');var b=jQuery('<div class="agm-confirm-title">'+a.title+"</div>"),c=jQuery('<div class="agm-confirm-msg">'+a.ask_checkin+"</div>"),e=jQuery('<button type="button" class="agm-confirm-yes">'+a.yes+"</button>"),f=jQuery('<button type="button" class="agm-confirm-no">'+a.no+"</button>"),g=jQuery('<input type="checkbox" id="agm-confirm-ask" />'),h=jQuery('<label for="agm-confirm-ask" class="agm-confirm-ask">'+a.remember+"</label>"),k=jQuery('<span class="agm-confirm-close">&times;</span>'),l=jQuery('<div class="agm-confirm-buttons"></div>'),m=jQuery('<div class="agm-modal"></div>'),n=jQuery(".agm-map-uci-confirm").first(),o=jQuery("body").first();_agmUci.guest||(g.prependTo(h),h.appendTo(l)),f.appendTo(l),e.appendTo(l),k.appendTo(d),b.appendTo(d),c.appendTo(d),l.appendTo(d);var p=function(a){a.stopPropagation(),d.remove(),m.remove(),!_agmUci.guest&&g.is(":checked")&&j("off")},q=function(a){a.stopPropagation(),d.remove(),m.remove(),i(),!_agmUci.guest&&g.is(":checked")&&j("on")};k.click(p),f.click(p),e.click(q),d.on("agm:close_confirm",p),n.length||(n=o),n.show(),m.prependTo(n),d.prependTo(n)},i=function(){try{var a=function(a){var b={action:"agm_uci_checkin",lat:a.coords.latitude,lng:a.coords.longitude};jQuery.post(_agmUci.ajax_url,b,k)};navigator.geolocation.getCurrentPosition(a),b="send",l(),d.trigger("agm:close_confirm")}catch(c){}},j=function(a){if(jQuery.inArray(a,["on","off","ask"])===-1)return!1;var b={action:"agm_uci_permission",state:a};jQuery.post(_agmUci.ajax_url,b)},k=function(a){var c={};b="done",l();try{c=jQuery.parseJSON(a)}catch(d){}"OK"===c.status&&m(c.data)},l=function(){var a=jQuery("#agm_mh_footer .agm-checkin-action"),c=_agmUci.lang;switch(b){case"done":a.html('<span class="agm-checkin-done">'+c.status_saved+"</span>");break;case"send":a.html('<span class="agm-checkin-done">'+c.status_sending+"</span>");break;default:var d=jQuery('<a href="#" class="agm-checkin-add">'+c.status_submit+"</a>");d.click(g),a.empty().append(d)}},m=function(a){var b;for(var c in _agmMaps)b=_agmMaps[c],b.data["uci-automatic_checkin"]&&jQuery(b.selector).trigger("agm:update_marker",[a.marker.identifier,a.marker])},n=function(a){a.preventDefault(),a.stopPropagation();var b=jQuery(this),c=b.parents(".agm_google_maps").first(),d=(jQuery("."+b.data("identifier"),c),jQuery(".agm_mh_footer",c)),e=b.data("id");if(b.hasClass("loading"))return!1;b.addClass("loading");var f=function(a){var b,d,e={};try{e=jQuery.parseJSON(a)}catch(f){}switch(e.status){case"OK":b=e.data.marker,d=b.identifier,c.trigger("agm:update_marker",[d,b]);break;case"DEL":b=e.data.marker,d=b.identifier,c.trigger("agm:remove_marker",[d])}},g=function(a){jQuery(".agm-form",d).remove()},h=function(a){var b=jQuery(".agm-form",d),c=b.data("id"),e={action:"agm_uci_checkin_save",id:c};jQuery(".title",b).length&&(e.title=jQuery(".title",b).val()),jQuery(".desc",b).length&&(e.description=jQuery(".desc",b).val()),jQuery(".share",b).length&&(e.share=jQuery(".share",b).val()),b.addClass("loading"),jQuery.post(_agmUci.ajax_url,e,f).always(g)},i=function(a){var b=jQuery(".agm-form",d),c=b.data("id"),e={action:"agm_uci_checkin_remove",id:c};b.addClass("loading"),jQuery.post(_agmUci.ajax_url,e,f).always(g)},j=function(a){var c=jQuery(a);g(),d.prepend(c),c.on("click",".agm-form-close, .agm-form-cancel",g),c.on("click",".agm-form-save",h),c.on("click",".agm-form-delete",i),b.removeClass("loading")},k={action:"agm_uci_checkin_editor",id:e};return g(),jQuery.post(_agmUci.ajax_url,k,j),!1};a.on("click",".agm_google_maps .edit-marker",n),f()});