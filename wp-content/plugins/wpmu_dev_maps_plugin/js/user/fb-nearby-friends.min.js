/*! Google Maps Pro - v2.9.5
 * http://premium.wpmudev.org/project/wordpress-google-maps-plugin
 * Copyright (c) 2018; * Licensed GPLv2+ */
jQuery(function(){function a(){window.FB.init({appId:_agmFbnf.fb_app_id,status:!0,cookie:!0,xfbml:!0})}function b(a,b){var c=a.getPosition(),d=c.lat(),e=c.lng(),f=new Date,g=new Date(f.getFullYear(),f.getMonth()-parseInt(_agmFbnf.months),f.getDate()),h="SELECT author_uid, coords FROM location_post WHERE author_uid IN (SELECT uid2 FROM friend WHERE uid1=me()) AND timestamp > "+Math.round(g.getTime()/1e3)+" AND distance(latitude, longitude, '"+d+"', '"+e+"') < "+parseInt(_agmFbnf.radius),i="SELECT id, name, url, pic_square FROM profile WHERE id IN (SELECT author_uid FROM #fql_places)";window.FB.api({method:"fql.multiquery",queries:{fql_places:h,fql_people:i}},function(a){var c=a[0],d=a[1],e=[];jQuery.each(c.fql_result_set,function(){var a=!1,c=this;if(e.indexOf(c.author_uid)>-1)return!0;if(jQuery.each(d.fql_result_set,function(){return this.id!==c.author_uid||(a=this,!1)}),a){e.push(a.id);var f=new window.google.maps.Marker({title:a.name,map:b,icon:a.pic_square,draggable:!1,clickable:!0,position:new window.google.maps.LatLng(c.coords.latitude,c.coords.longitude)}),g=new window.google.maps.InfoWindow({content:'<a href="'+a.url+'" target="_blank">'+a.name+"</a>"});window.google.maps.event.addListener(f,"click",function(){g.open(b,f)})}})})}var c=[];Array.prototype.indexOf||(Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b+=1)if(this[b]===a)return b;return-1}),jQuery(document).bind("agm_google_maps-user-adding_marker",function(a,d,e,f){var g=jQuery("<a href='#nearby-friends'>Nearby friends</a>"),h="agm_google_maps-nearby_friends-"+e+"-body",i=d._agmInfo.getContent();i+=jQuery("<div />").append(g.addClass(h)).html(),d._agmInfo.setContent(i);var j="#"+jQuery(f.getDiv()).attr("id")+" ."+h;return c.indexOf(j)>-1||(c.push(j),void jQuery("body").on("click",j,function(){return window.FB.login(function(a){a.authResponse&&b(d,f)},{scope:"user_photos,user_status,friends_photos,friends_status"}),!1}))}),void 0===window.FB&&(window.fbAsyncInit=a,function(a){var b,c="facebook-jssdk",d=a.getElementsByTagName("script")[0];a.getElementById(c)||(b=a.createElement("script"),b.id=c,b.async=!0,b.src="//connect.facebook.net/en_US/all.js",d.parentNode.insertBefore(b,d))}(document))});