{"version":3,"sources":["cleantalk-admin-settings-page.js"],"names":["apbct_get_elems","elems","tmp","i","len","split","length","jQuery","apbct_get_elems__native","out","forEach","elem","arr","document","getElementById","getElementsByClassName","key","push","apbct_show_hide_elem","each","label","next","prev","is","hide","show","apbctSettingsDependencies","ids","enable","do_disable","console","log","setAttribute","do_enable","removeAttribute","getAttribute","apbct_settings__showDescription","setting_id","remove_desc_func","e","target","parent","hasClass","remove","off","after","obj","append","css","top","position","left","apbct_sendAJAX","action","spinner","children","callback","result","data","params","empty","title","desc","on","ready","val","attr","this","fadeOut","d","Date","getTimezoneOffset","dialog","modal","my","at","of","window","width","height","draggable","resizable","closeText","self"],"mappings":"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","file":"cleantalk-admin-settings-page.min.js","sourcesContent":["jQuery(document).ready(function(){\r\n\r\n    // Show/Hide access key\r\n    jQuery('#apbct_showApiKey').on('click', function(){\r\n        jQuery('.apbct_setting---apikey').val(jQuery('.apbct_setting---apikey').attr('key'));\r\n        jQuery('.apbct_setting---apikey+div').show();\r\n        jQuery(this).fadeOut(300);\r\n    });\r\n\r\n\tvar d = new Date();\r\n\tjQuery('#ct_admin_timezone').val(d.getTimezoneOffset()/60*(-1));\r\n\t\r\n\t// GDPR modal window\r\n\tjQuery('#apbct_gdpr_open_modal').on('click', function(){\r\n\t\tjQuery('#gdpr_dialog').dialog({\r\n\t\t\tmodal:true, \r\n\t\t\tshow: true,\r\n\t\t\tposition: { my: \"center\", at: \"center\", of: window },\r\n\t\t\twidth: +(jQuery('#wpbody').width() / 100 * 70), // 70% of #wpbody\r\n\t\t\theight: 'auto',\r\n\t\t\ttitle: 'GDPR compliance',\r\n\t\t\tdraggable: false,\r\n\t\t\tresizable: false,\r\n\t\t\tcloseText: \"Close\",\r\n\t\t});\r\n\t});\r\n\r\n\tjQuery(document).on('click', '.apbct_settings-long_description---show', function(){\r\n\t\tself = jQuery(this);\r\n\t\tapbct_settings__showDescription(self, self.attr('setting'));\r\n\t});\r\n\r\n});\r\n\r\n/**\r\n * Select elems like #{selector} or .{selector}\r\n * Selector passed in string separated by ,\r\n *\r\n * @param elems\r\n * @returns {*}\r\n */\r\nfunction apbct_get_elems(elems){\r\n    elems = elems.split(',');\r\n    for( var i=0, len = elems.length, tmp; i < len; i++){\r\n        tmp = jQuery('#'+elems[i]);\r\n        elems[i] = tmp.length === 0 ? jQuery('.'+elems[i]) : tmp;\r\n    }\r\n    return elems;\r\n}\r\n\r\n/**\r\n * Select elems like #{selector} or .{selector}\r\n * Selector could be passed in a string ( separated by comma ) or in array ( [ elem1, elem2, ... ] )\r\n *\r\n * @param elems string|array\r\n * @returns array\r\n */\r\nfunction apbct_get_elems__native(elems){\r\n\r\n\t// Make array from a string\r\n\tif(typeof elems === 'string')\r\n\t\telems = elems.split(',');\r\n\r\n\tvar out = [];\r\n\r\n\telems.forEach(function(elem, i, arr) {\r\n\r\n\t\t// try to get elements with such IDs\r\n\t\tvar tmp = document.getElementById(elem);\r\n\t\tif (tmp !== null){\r\n\t\t\tout.push( tmp[key] );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// try to get elements with such class name\r\n\t\t// write each elem from collection to new element of outpur array\r\n\t\ttmp = document.getElementsByClassName(elem);\r\n\t\tif (tmp !== null && tmp.length !==0 ){\r\n\t\t\tfor(key in tmp){\r\n\t\t\t\tif( +key >= 0 ){\r\n\t\t\t\t\tout.push( tmp[key] );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\treturn out;\r\n}\r\n\r\nfunction apbct_show_hide_elem(elems){\r\n\telems = apbct_get_elems(elems);\r\n    for( var i=0, len = elems.length; i < len; i++){\r\n        elems[i].each(function (i, elem) {\r\n            elem = jQuery(elem);\r\n            var label = elem.next('label') || elem.prev('label') || null;\r\n            if (elem.is(\":visible\")) {\r\n                elem.hide();\r\n                if (label) label.hide();\r\n            } else {\r\n                elem.show();\r\n                if (label) label.show();\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * Settings dependences. Switch|toggle depended elements state (disabled|enabled)\r\n * Recieve list of selectors ( without class mark (.) or id mark (#) )\r\n *\r\n * @param ids string|array Selectors\r\n * @param enable\r\n */\r\nfunction apbctSettingsDependencies(ids, enable){\r\n\r\n\tenable = +enable || null;\r\n\r\n\t// Get elements\r\n\tvar elems = apbct_get_elems__native( ids );\r\n\r\n\telems.forEach(function(elem, i, arr){\r\n\r\n\t\tvar do_disable = function(){console.log( elem ); elem.setAttribute('disabled', 'disabled');},\r\n\t\t\tdo_enable  = function(){elem.removeAttribute('disabled');};\r\n\r\n\t\t// Set defined state\r\n\t\tif(enable !== null) // Set\r\n\t\t\tenable === 1 ? do_enable() : do_disable();\r\n\r\n\t\t// Toggle\r\n\t\telse{\r\n\t\t\telem.getAttribute('disabled') === null ? do_disable() : do_enable();\r\n\t\t}\r\n\r\n\t});\r\n}\r\n\r\nfunction apbct_settings__showDescription(label, setting_id){\r\n\r\n\tvar remove_desc_func = function(e){\r\n\t\tif(typeof e === 'undefined' || ((jQuery(e.target).parent('.apbct_long_desc').length == 0 || jQuery(e.target).hasClass('apbct_long_desc__cancel')) && !jQuery(e.target).hasClass('apbct_long_description__show'))){\r\n\t\t\tjQuery('.apbct_long_desc').remove();\r\n\t\t\tjQuery(document).off('click', remove_desc_func);\r\n\t\t}\r\n\t};\r\n\r\n\tremove_desc_func();\r\n\r\n\tlabel.after(\"<div id='apbct_long_desc__\"+setting_id+\"' class='apbct_long_desc'></div>\");\r\n\tvar obj = jQuery('#apbct_long_desc__'+setting_id);\r\n\tobj.append(\"<i class='icon-spin1 animate-spin'></i>\")\r\n\t\t.append(\"<div class='apbct_long_desc__angle'></div>\")\r\n\t\t.css({\r\n\t\t\ttop: label.position().top - 5,\r\n\t\t\tleft: label.position().left + 25\r\n\t\t});\r\n\r\n\r\n\tapbct_sendAJAX(\r\n\t\t{action: 'apbct_settings__get_description', setting_id: setting_id},\r\n\t\t{\r\n\t\t\tspinner: obj.children('img'),\r\n\t\t\tcallback: function(result, data, params, obj){\r\n\r\n\t\t\t\tobj.empty()\r\n\t\t\t\t\t.append(\"<div class='apbct_long_desc__angle'></div>\")\r\n\t\t\t\t\t.append(\"<i class='apbct_long_desc__cancel icon-cancel'></i>\")\r\n\t\t\t\t\t.append(\"<h3 class='apbct_long_desc__title'>\"+result.title+\"</h3>\")\r\n\t\t\t\t\t.append(\"<p>\"+result.desc+\"</p>\");\r\n\r\n\t\t\t\tjQuery(document).on('click', remove_desc_func);\r\n\t\t\t}\r\n\t\t},\r\n\t\tobj\r\n\t);\r\n}"]}