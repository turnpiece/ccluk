{"version":3,"sources":["cleantalk-admin-settings-page.js"],"names":["apbct_get_elems","elems","tmp","i","len","split","length","jQuery","apbct_show_hide_elem","each","elem","label","next","prev","is","hide","show","apbctSettingsDependencies","apbct_toggleAtrribute","attribute","value","attr","removeAttr","apbct_settings__showDescription","setting_id","remove_desc_func","e","target","parent","hasClass","remove","document","off","after","obj","append","css","top","position","left","apbct_sendAJAX","action","spinner","children","callback","result","data","params","empty","title","desc","on","ready","val","this","fadeOut","d","Date","getTimezoneOffset","dialog","modal","my","at","of","window","width","height","draggable","resizable","closeText","self"],"mappings":"AAkCA,SAASA,gBAAgBC,GAErB,IAAK,IAA6BC,EAAzBC,EAAE,EAAGC,GADdH,EAAQA,EAAMI,MAAM,MACMC,OAAaH,EAAIC,EAAKD,IAC5CD,EAAMK,OAAO,IAAIN,EAAME,IACvBF,EAAME,GAAoB,IAAfD,EAAII,OAAeC,OAAO,IAAIN,EAAME,IAAMD,EAEzD,OAAOD,EAIX,SAASO,qBAAqBP,GAE1B,IAAK,IAAIE,EAAE,EAAGC,GADjBH,EAAQD,gBAAgBC,IACKK,OAAQH,EAAIC,EAAKD,IACvCF,EAAME,GAAGM,KAAK,SAAUN,EAAGO,GAEvB,IAAIC,GADJD,EAAOH,OAAOG,IACGE,KAAK,UAAYF,EAAKG,KAAK,UAAY,KACpDH,EAAKI,GAAG,aACRJ,EAAKK,OACDJ,GAAOA,EAAMI,SAEjBL,EAAKM,OACDL,GAAOA,EAAMK,UAWjC,SAASC,0BAA0BhB,GAE/B,IAAK,IAAIE,EAAE,EAAGC,GADdH,EAAQD,gBAAgBC,IACEK,OAAQH,EAAIC,EAAKD,IACvCF,EAAME,GAAGM,KAAK,SAAUN,EAAGO,GACvBQ,sBAAsBX,OAAOG,GAAO,cAYhD,SAASQ,sBAAsBR,EAAMS,EAAWC,GAC5CA,EAAQA,GAASD,OACkB,IAAzBT,EAAKW,KAAKF,GAChBT,EAAKW,KAAKF,EAAWC,GAErBV,EAAKY,WAAWH,GAGxB,SAASI,gCAAgCZ,EAAOa,GAE/C,IAAIC,EAAmB,SAASC,QACf,IAANA,IAA6E,GAAtDnB,OAAOmB,EAAEC,QAAQC,OAAO,oBAAoBtB,SAAeC,OAAOmB,EAAEC,QAAQE,SAAS,4BAAgCtB,OAAOmB,EAAEC,QAAQE,SAAS,mCAC/KtB,OAAO,oBAAoBuB,SAC3BvB,OAAOwB,UAAUC,IAAI,QAASP,KAIhCA,IAEAd,EAAMsB,MAAM,6BAA6BT,EAAW,oCACpD,IAAIU,EAAM3B,OAAO,qBAAqBiB,GACtCU,EAAIC,OAAO,2CACTA,OAAO,8CACPC,IAAI,CACJC,IAAK1B,EAAM2B,WAAWD,IAAM,EAC5BE,KAAM5B,EAAM2B,WAAWC,KAAO,KAIhCC,eACC,CAACC,OAAQ,kCAAmCjB,WAAYA,GACxD,CACCkB,QAASR,EAAIS,SAAS,OACtBC,SAAU,SAASC,EAAQC,EAAMC,EAAQb,GAExCA,EAAIc,QACFb,OAAO,8CACPA,OAAO,uDACPA,OAAO,sCAAsCU,EAAOI,MAAM,SAC1Dd,OAAO,MAAMU,EAAOK,KAAK,QAE3B3C,OAAOwB,UAAUoB,GAAG,QAAS1B,KAG/BS,GA9HF3B,OAAOwB,UAAUqB,MAAM,WAGnB7C,OAAO,qBAAqB4C,GAAG,QAAS,WACpC5C,OAAO,2BAA2B8C,IAAI9C,OAAO,2BAA2Bc,KAAK,QAC7Ed,OAAO,+BAA+BS,OACtCT,OAAO+C,MAAMC,QAAQ,OAG5B,IAAIC,EAAI,IAAIC,KACZlD,OAAO,sBAAsB8C,IAAIG,EAAEE,oBAAoB,IAAK,GAG5DnD,OAAO,0BAA0B4C,GAAG,QAAS,WAC5C5C,OAAO,gBAAgBoD,OAAO,CAC7BC,OAAM,EACN5C,MAAM,EACNsB,SAAU,CAAEuB,GAAI,SAAUC,GAAI,SAAUC,GAAIC,QAC5CC,OAAS1D,OAAO,WAAW0D,QAAU,IAAM,GAC3CC,OAAQ,OACRjB,MAAO,kBACPkB,WAAW,EACXC,WAAW,EACXC,UAAW,YAIb9D,OAAOwB,UAAUoB,GAAG,QAAS,0CAA2C,WACvEmB,KAAO/D,OAAO+C,MACd/B,gCAAgC+C,KAAMA,KAAKjD,KAAK","file":"cleantalk-admin-settings-page.min.js","sourcesContent":["jQuery(document).ready(function(){\r\n\r\n    // Show/Hide access key\r\n    jQuery('#apbct_showApiKey').on('click', function(){\r\n        jQuery('.apbct_setting---apikey').val(jQuery('.apbct_setting---apikey').attr('key'));\r\n        jQuery('.apbct_setting---apikey+div').show();\r\n        jQuery(this).fadeOut(300);\r\n    });\r\n\r\n\tvar d = new Date();\r\n\tjQuery('#ct_admin_timezone').val(d.getTimezoneOffset()/60*(-1));\r\n\t\r\n\t// GDPR modal window\r\n\tjQuery('#apbct_gdpr_open_modal').on('click', function(){\r\n\t\tjQuery('#gdpr_dialog').dialog({\r\n\t\t\tmodal:true, \r\n\t\t\tshow: true,\r\n\t\t\tposition: { my: \"center\", at: \"center\", of: window },\r\n\t\t\twidth: +(jQuery('#wpbody').width() / 100 * 70), // 70% of #wpbody\r\n\t\t\theight: 'auto',\r\n\t\t\ttitle: 'GDPR compliance',\r\n\t\t\tdraggable: false,\r\n\t\t\tresizable: false,\r\n\t\t\tcloseText: \"Close\",\r\n\t\t});\r\n\t});\r\n\r\n\tjQuery(document).on('click', '.apbct_settings-long_description---show', function(){\r\n\t\tself = jQuery(this);\r\n\t\tapbct_settings__showDescription(self, self.attr('setting'));\r\n\t});\r\n\r\n});\r\n\r\nfunction apbct_get_elems(elems){\r\n    elems = elems.split(',');\r\n    for( var i=0, len = elems.length, tmp; i < len; i++){\r\n        tmp = jQuery('#'+elems[i]);\r\n        elems[i] = tmp.length === 0 ? jQuery('.'+elems[i]) : tmp;\r\n    }\r\n    return elems;\r\n\r\n}\r\n\r\nfunction apbct_show_hide_elem(elems){\r\n\telems = apbct_get_elems(elems);\r\n    for( var i=0, len = elems.length; i < len; i++){\r\n        elems[i].each(function (i, elem) {\r\n            elem = jQuery(elem);\r\n            var label = elem.next('label') || elem.prev('label') || null;\r\n            if (elem.is(\":visible\")) {\r\n                elem.hide();\r\n                if (label) label.hide();\r\n            } else {\r\n                elem.show();\r\n                if (label) label.show();\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * Settings dependences\r\n *\r\n * @param elems CSS selector\r\n */\r\nfunction apbctSettingsDependencies(elems){\r\n    elems = apbct_get_elems(elems);\r\n    for( var i=0, len = elems.length; i < len; i++){\r\n        elems[i].each(function (i, elem) {\r\n            apbct_toggleAtrribute(jQuery(elem), 'disabled');\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * Toggle attribute 'disabled' for elements\r\n *\r\n * @param elem\r\n * @param attribute\r\n * @param value\r\n */\r\nfunction apbct_toggleAtrribute(elem, attribute, value){\r\n    value = value || attribute;\r\n    if(typeof elem.attr(attribute) === 'undefined')\r\n        elem.attr(attribute, value);\r\n    else\r\n        elem.removeAttr(attribute);\r\n}\r\n\r\nfunction apbct_settings__showDescription(label, setting_id){\r\n\r\n\tvar remove_desc_func = function(e){\r\n\t\tif(typeof e === 'undefined' || ((jQuery(e.target).parent('.apbct_long_desc').length == 0 || jQuery(e.target).hasClass('apbct_long_desc__cancel')) && !jQuery(e.target).hasClass('apbct_long_description__show'))){\r\n\t\t\tjQuery('.apbct_long_desc').remove();\r\n\t\t\tjQuery(document).off('click', remove_desc_func);\r\n\t\t}\r\n\t};\r\n\r\n\tremove_desc_func();\r\n\r\n\tlabel.after(\"<div id='apbct_long_desc__\"+setting_id+\"' class='apbct_long_desc'></div>\");\r\n\tvar obj = jQuery('#apbct_long_desc__'+setting_id);\r\n\tobj.append(\"<i class='icon-spin1 animate-spin'></i>\")\r\n\t\t.append(\"<div class='apbct_long_desc__angle'></div>\")\r\n\t\t.css({\r\n\t\t\ttop: label.position().top - 5,\r\n\t\t\tleft: label.position().left + 25\r\n\t\t});\r\n\r\n\r\n\tapbct_sendAJAX(\r\n\t\t{action: 'apbct_settings__get_description', setting_id: setting_id},\r\n\t\t{\r\n\t\t\tspinner: obj.children('img'),\r\n\t\t\tcallback: function(result, data, params, obj){\r\n\r\n\t\t\t\tobj.empty()\r\n\t\t\t\t\t.append(\"<div class='apbct_long_desc__angle'></div>\")\r\n\t\t\t\t\t.append(\"<i class='apbct_long_desc__cancel icon-cancel'></i>\")\r\n\t\t\t\t\t.append(\"<h3 class='apbct_long_desc__title'>\"+result.title+\"</h3>\")\r\n\t\t\t\t\t.append(\"<p>\"+result.desc+\"</p>\");\r\n\r\n\t\t\t\tjQuery(document).on('click', remove_desc_func);\r\n\t\t\t}\r\n\t\t},\r\n\t\tobj\r\n\t);\r\n}"]}