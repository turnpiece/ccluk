{"version":3,"sources":["apbct-fingerprint.js"],"names":["name","context","definition","module","exports","define","amd","this","Fingerprint","options","nativeForEach","nativeMap","Array","prototype","forEach","map","each","obj","iterator","length","i","l","call","key","hasOwnProperty","results","value","index","list","hasher","screen_resolution","screen_orientation","canvas","ie_activex","get","keys","push","navigator","userAgent","language","screen","colorDepth","resolution","getScreenResolution","join","Date","getTimezoneOffset","hasSessionStorage","hasLocalStorage","hasIndexDb","document","body","window","cpuClass","platform","doNotTrack","getPluginsString","isCanvasSupported","getCanvasFingerprint","murmurhash3_32_gc","seed","remainder","bytes","h1","h1b","c1","c2","k1","charCodeAt","localStorage","e","sessionStorage","indexedDB","elem","createElement","getContext","isIE","appName","test","getIEPluginsString","getRegularPluginsString","plugins","p","mimeTypes","mt","type","suffixes","description","ActiveXObject","height","width","ctx","txt","textBaseline","font","fillStyle","fillRect","fillText","toDataURL"],"mappings":"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","file":"apbct-fingerprint.min.js","sourcesContent":["/*\r\n* fingerprintJS 0.5.5 - Fast browser fingerprint library\r\n* https://github.com/Valve/fingerprintjs\r\n* Copyright (c) 2013 Valentin Vasilyev (valentin.vasilyev@outlook.com)\r\n* Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.\r\n*\r\n* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\r\n* AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n* IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n* ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY\r\n* DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n* (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n* LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n* ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n* (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\r\n* THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n*/\r\n\r\n;(function (name, context, definition) {\r\n  if (typeof module !== 'undefined' && module.exports) { module.exports = definition(); }\r\n  else if (typeof define === 'function' && define.amd) { define(definition); }\r\n  else { context[name] = definition(); }\r\n})('Fingerprint', this, function () {\r\n  'use strict';\r\n\r\n  var Fingerprint = function (options) {\r\n    var nativeForEach, nativeMap;\r\n    nativeForEach = Array.prototype.forEach;\r\n    nativeMap = Array.prototype.map;\r\n\r\n    this.each = function (obj, iterator, context) {\r\n      if (obj === null) {\r\n        return;\r\n      }\r\n      if (nativeForEach && obj.forEach === nativeForEach) {\r\n        obj.forEach(iterator, context);\r\n      } else if (obj.length === +obj.length) {\r\n        for (var i = 0, l = obj.length; i < l; i++) {\r\n          if (iterator.call(context, obj[i], i, obj) === {}) return;\r\n        }\r\n      } else {\r\n        for (var key in obj) {\r\n          if (obj.hasOwnProperty(key)) {\r\n            if (iterator.call(context, obj[key], key, obj) === {}) return;\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    this.map = function(obj, iterator, context) {\r\n      var results = [];\r\n      // Not using strict equality so that this acts as a\r\n      // shortcut to checking for `null` and `undefined`.\r\n      if (obj == null) return results;\r\n      if (nativeMap && obj.map === nativeMap) return obj.map(iterator, context);\r\n      this.each(obj, function(value, index, list) {\r\n        results[results.length] = iterator.call(context, value, index, list);\r\n      });\r\n      return results;\r\n    };\r\n\r\n    if (typeof options == 'object'){\r\n      this.hasher = options.hasher;\r\n      this.screen_resolution = options.screen_resolution;\r\n      this.screen_orientation = options.screen_orientation;\r\n      this.canvas = options.canvas;\r\n      this.ie_activex = options.ie_activex;\r\n    } else if(typeof options == 'function'){\r\n      this.hasher = options;\r\n    }\r\n  };\r\n\r\n  Fingerprint.prototype = {\r\n    get: function(){\r\n      var keys = [];\r\n      keys.push(navigator.userAgent);\r\n      keys.push(navigator.language);\r\n      keys.push(screen.colorDepth);\r\n      if (this.screen_resolution) {\r\n        var resolution = this.getScreenResolution();\r\n        if (typeof resolution !== 'undefined'){ // headless browsers, such as phantomjs\r\n          keys.push(resolution.join('x'));\r\n        }\r\n      }\r\n      keys.push(new Date().getTimezoneOffset());\r\n      keys.push(this.hasSessionStorage());\r\n      keys.push(this.hasLocalStorage());\r\n      keys.push(this.hasIndexDb());\r\n      //body might not be defined at this point or removed programmatically\r\n      if(document.body){\r\n        keys.push(typeof(document.body.addBehavior));\r\n      } else {\r\n        keys.push(typeof undefined);\r\n      }\r\n      keys.push(typeof(window.openDatabase));\r\n      keys.push(navigator.cpuClass);\r\n      keys.push(navigator.platform);\r\n      keys.push(navigator.doNotTrack);\r\n      keys.push(this.getPluginsString());\r\n      if(this.canvas && this.isCanvasSupported()){\r\n        keys.push(this.getCanvasFingerprint());\r\n      }\r\n      if(this.hasher){\r\n        return this.hasher(keys.join('###'), 31);\r\n      } else {\r\n        return this.murmurhash3_32_gc(keys.join('###'), 31);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * JS Implementation of MurmurHash3 (r136) (as of May 20, 2011)\r\n     *\r\n     * @author <a href=\"mailto:gary.court@gmail.com\">Gary Court</a>\r\n     * @see http://github.com/garycourt/murmurhash-js\r\n     * @author <a href=\"mailto:aappleby@gmail.com\">Austin Appleby</a>\r\n     * @see http://sites.google.com/site/murmurhash/\r\n     *\r\n     * @param {string} key ASCII only\r\n     * @param {number} seed Positive integer only\r\n     * @return {number} 32-bit positive integer hash\r\n     */\r\n\r\n    murmurhash3_32_gc: function(key, seed) {\r\n      var remainder, bytes, h1, h1b, c1, c2, k1, i;\r\n\r\n      remainder = key.length & 3; // key.length % 4\r\n      bytes = key.length - remainder;\r\n      h1 = seed;\r\n      c1 = 0xcc9e2d51;\r\n      c2 = 0x1b873593;\r\n      i = 0;\r\n\r\n      while (i < bytes) {\r\n          k1 =\r\n            ((key.charCodeAt(i) & 0xff)) |\r\n            ((key.charCodeAt(++i) & 0xff) << 8) |\r\n            ((key.charCodeAt(++i) & 0xff) << 16) |\r\n            ((key.charCodeAt(++i) & 0xff) << 24);\r\n        ++i;\r\n\r\n        k1 = ((((k1 & 0xffff) * c1) + ((((k1 >>> 16) * c1) & 0xffff) << 16))) & 0xffffffff;\r\n        k1 = (k1 << 15) | (k1 >>> 17);\r\n        k1 = ((((k1 & 0xffff) * c2) + ((((k1 >>> 16) * c2) & 0xffff) << 16))) & 0xffffffff;\r\n\r\n        h1 ^= k1;\r\n            h1 = (h1 << 13) | (h1 >>> 19);\r\n        h1b = ((((h1 & 0xffff) * 5) + ((((h1 >>> 16) * 5) & 0xffff) << 16))) & 0xffffffff;\r\n        h1 = (((h1b & 0xffff) + 0x6b64) + ((((h1b >>> 16) + 0xe654) & 0xffff) << 16));\r\n      }\r\n\r\n      k1 = 0;\r\n\r\n      switch (remainder) {\r\n        case 3: k1 ^= (key.charCodeAt(i + 2) & 0xff) << 16;\r\n        case 2: k1 ^= (key.charCodeAt(i + 1) & 0xff) << 8;\r\n        case 1: k1 ^= (key.charCodeAt(i) & 0xff);\r\n\r\n        k1 = (((k1 & 0xffff) * c1) + ((((k1 >>> 16) * c1) & 0xffff) << 16)) & 0xffffffff;\r\n        k1 = (k1 << 15) | (k1 >>> 17);\r\n        k1 = (((k1 & 0xffff) * c2) + ((((k1 >>> 16) * c2) & 0xffff) << 16)) & 0xffffffff;\r\n        h1 ^= k1;\r\n      }\r\n\r\n      h1 ^= key.length;\r\n\r\n      h1 ^= h1 >>> 16;\r\n      h1 = (((h1 & 0xffff) * 0x85ebca6b) + ((((h1 >>> 16) * 0x85ebca6b) & 0xffff) << 16)) & 0xffffffff;\r\n      h1 ^= h1 >>> 13;\r\n      h1 = ((((h1 & 0xffff) * 0xc2b2ae35) + ((((h1 >>> 16) * 0xc2b2ae35) & 0xffff) << 16))) & 0xffffffff;\r\n      h1 ^= h1 >>> 16;\r\n\r\n      return h1 >>> 0;\r\n    },\r\n\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=781447\r\n    hasLocalStorage: function () {\r\n      try{\r\n        return !!window.localStorage;\r\n      } catch(e) {\r\n        return true; // SecurityError when referencing it means it exists\r\n      }\r\n    },\r\n\r\n    hasSessionStorage: function () {\r\n      try{\r\n        return !!window.sessionStorage;\r\n      } catch(e) {\r\n        return true; // SecurityError when referencing it means it exists\r\n      }\r\n    },\r\n\r\n    hasIndexDb: function () {\r\n      try{\r\n        return !!window.indexedDB;\r\n      } catch(e) {\r\n        return true; // SecurityError when referencing it means it exists\r\n      }\r\n    },\r\n\r\n    isCanvasSupported: function () {\r\n      var elem = document.createElement('canvas');\r\n      return !!(elem.getContext && elem.getContext('2d'));\r\n    },\r\n\r\n    isIE: function () {\r\n      if(navigator.appName === 'Microsoft Internet Explorer') {\r\n        return true;\r\n      } else if(navigator.appName === 'Netscape' && /Trident/.test(navigator.userAgent)){// IE 11\r\n        return true;\r\n      }\r\n      return false;\r\n    },\r\n\r\n    getPluginsString: function () {\r\n      if(this.isIE() && this.ie_activex){\r\n        return this.getIEPluginsString();\r\n      } else {\r\n        return this.getRegularPluginsString();\r\n      }\r\n    },\r\n\r\n    getRegularPluginsString: function () {\r\n      return this.map(navigator.plugins, function (p) {\r\n        var mimeTypes = this.map(p, function(mt){\r\n          return [mt.type, mt.suffixes].join('~');\r\n        }).join(',');\r\n        return [p.name, p.description, mimeTypes].join('::');\r\n      }, this).join(';');\r\n    },\r\n\r\n    getIEPluginsString: function () {\r\n      if(window.ActiveXObject){\r\n        var names = ['ShockwaveFlash.ShockwaveFlash',//flash plugin\r\n          'AcroPDF.PDF', // Adobe PDF reader 7+\r\n          'PDF.PdfCtrl', // Adobe PDF reader 6 and earlier, brrr\r\n          'QuickTime.QuickTime', // QuickTime\r\n          // 5 versions of real players\r\n          'rmocx.RealPlayer G2 Control',\r\n          'rmocx.RealPlayer G2 Control.1',\r\n          'RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)',\r\n          'RealVideo.RealVideo(tm) ActiveX Control (32-bit)',\r\n          'RealPlayer',\r\n          'SWCtl.SWCtl', // ShockWave player\r\n          'WMPlayer.OCX', // Windows media player\r\n          'AgControl.AgControl', // Silverlight\r\n          'Skype.Detection'];\r\n\r\n        // starting to detect plugins in IE\r\n        return this.map(names, function(name){\r\n          try{\r\n            new ActiveXObject(name);\r\n            return name;\r\n          } catch(e){\r\n            return null;\r\n          }\r\n        }).join(';');\r\n      } else {\r\n        return \"\"; // behavior prior version 0.5.0, not breaking backwards compat.\r\n      }\r\n    },\r\n\r\n    getScreenResolution: function () {\r\n      var resolution;\r\n       if(this.screen_orientation){\r\n         resolution = (screen.height > screen.width) ? [screen.height, screen.width] : [screen.width, screen.height];\r\n       }else{\r\n         resolution = [screen.height, screen.width];\r\n       }\r\n       return resolution;\r\n    },\r\n\r\n    getCanvasFingerprint: function () {\r\n      var canvas = document.createElement('canvas');\r\n      var ctx = canvas.getContext('2d');\r\n      // https://www.browserleaks.com/canvas#how-does-it-work\r\n      var txt = 'http://valve.github.io';\r\n      ctx.textBaseline = \"top\";\r\n      ctx.font = \"14px 'Arial'\";\r\n      ctx.textBaseline = \"alphabetic\";\r\n      ctx.fillStyle = \"#f60\";\r\n      ctx.fillRect(125,1,62,20);\r\n      ctx.fillStyle = \"#069\";\r\n      ctx.fillText(txt, 2, 15);\r\n      ctx.fillStyle = \"rgba(102, 204, 0, 0.7)\";\r\n      ctx.fillText(txt, 4, 17);\r\n      return canvas.toDataURL();\r\n    }\r\n  };\r\n\r\n\r\n  return Fingerprint;\r\n\r\n});"]}