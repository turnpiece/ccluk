!function(e){formintorjs.define(["admin/settings/toggle-container","text!tpl/fields.html"],function(t,i){return t.extend({multiple:!1,events:{"click .fui-add-indicator":"add_answer","click .wpmudev-nav--action":"open_menu","click .fui-add-field-indicator":"add_field","click .fui-delete-field-indicator":"kill_field","click .fui-answer-delete":"kill_answer","change .wpmudev-answer-value":"update_value","change .wpmudev-answer-placeholder":"update_placeholder"},className:"sui-form-field fui-has-answers",init:function(){this.answers=this.model.get("answers")},render:function(){this.$el.html(""),this.$el.attr("id",this.get_field_id()),this.$el.append(this.get_label_html()),this.$el.append(this.get_field_html()),this.$el.removeClass("fui-has-answers"),this.answers.length>0&&(this.answers.get_max_element_id(),this.$el.addClass("fui-has-answers")),this.trigger("rendered",this.get_value()),this.on_render()},get_values_html:function(){var e=this;return this.answers.map(function(t,i){return e.get_value_html(t,i)}).join(" ")},get_value_html:function(t,n){this.get_saved_value();return Forminator.Utils.template(e(i).find("#settings-field-answer-list-row-tpl").html())({row:t.toJSON(),index:n})},get_field_html:function(){var t=this.get_values_html();return Forminator.Utils.template(e(i).find("#settings-field-answer-list-tpl").html())({childs:t})},open_menu:function(t){t.preventDefault(),t.stopPropagation(),e(t.target).closest(".fui-answer").find(".wpmudev-answer--nav").toggleClass("wpmudev-is_active")},add_field:function(t){t.preventDefault(),t.stopPropagation();var i=this.get_model(e(t.target));e(t.target).val();i.set("use_extra",!0),this.render()},kill_field:function(t){t.preventDefault(),t.stopPropagation();var i=this.get_model(e(t.target));e(t.target).val();i.set("use_extra",!1),i.set("extra",""),this.render()},add_answer:function(e){e.preventDefault();var t=this.answers.get_next_element_id(),i=new Forminator.Models.Answer({element_id:"answer-"+t});this.answers.add(i,{silent:!0}),this.render()},kill_answer:function(t){t.preventDefault();var i=e(t.target),n=this.get_model(i);this.answers.remove(n,{silent:!0}),this.render()},get_index:function(e){return e.closest(".fui-answer").data("index")},get_model:function(e){var t=this.get_index(e);return this.answers.get_by_index(t)},move_option:function(e,t){var i=this.get_model(e),n=this.answers.model_index(i);this.answers.move_to(t,n),this.render()},update_value:function(t){var i=this.get_model(e(t.target)),n=e(t.target).val();i.set("title",n)},update_placeholder:function(t){var i=this.get_model(e(t.target)),n=e(t.target).val();i.set("extra",n)},on_render:function(){var t=this;setTimeout(function(){var i=e(".fui-multi-answer li:last-child").find(".wpmudev-input"),n=i.val();_.isEmpty(n)&&i.focus(),e(".fui-multi-answer").sortable({handle:".fui-answer-move-indicator i",update:function(e,i){t.move_option(i.item,i.item.index())}})},100)}})})}(jQuery);