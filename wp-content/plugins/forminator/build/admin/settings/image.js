!function(e){formintorjs.define(["admin/settings/setting"],function(e){return e.extend({className:"sui-form-field",events:{"click .fui-open-media":"add_image","click .fui-browse-delete button":"clear_image"},get_field_html:function(){return'<div class="fui-browse-group"><span class="fui-browse-preview" aria-hidden="true"><span style="background-image: url('+this.get_saved_value()+');"></span></span><div class="fui-browse"><span class="fui-browse-cell"><input type="url" value="'+this.get_saved_value()+'" placeholder="'+Forminator.l10n.options.placeholder_image+'" size="1"></span><span class="fui-browse-cell-fit fui-browse-delete"><button class="sui-tooltip" data-tooltip="'+Forminator.l10n.options.remove_image+'" aria-label="'+Forminator.l10n.options.clear+'"><i class="sui-icon-cross-close" aria-hidden="true"></i></button></span><span class="fui-browse-cell-fit"><button class="sui-button fui-open-media" aria-hidden="true">'+Forminator.l10n.options.browse+"</button></span></div></div>"},add_image:function(e){e.preventDefault();var i=this,s=this.$el.find("input"),a=wp.media({title:this.options.popup_label,button:{text:this.options.popup_button_label},multiple:!1}).on("select",function(){var e,t=a.state().get("selection").first().toJSON();if(t&&t.url){var l=i.$el.find(".fui-browse"),n=i.$el.find(".fui-browse-preview span");l.addClass("fui-browse-has-image"),n.css("background-image","url({url})".replace("{url}",t.url)),e=_.isUndefined(i.options.imageSize)?t.url:"thumbnail"===i.options.imageSize?t.sizes.thumbnail.url:"medium"===i.options.imageSize?_.isUndefined(t.sizes.medium)?t.sizes.full.url:t.sizes.medium.url:"large"===i.options.imageSize?_.isUndefined(t.sizes.large)?t.sizes.full.url:t.sizes.large.url:t.sizes.full.url,s.val("{url}".replace("{url}",e)),i.save_value(e)}});a.open()},clear_image:function(e){e.preventDefault(),this.save_value(""),this.render()}})})}(jQuery);