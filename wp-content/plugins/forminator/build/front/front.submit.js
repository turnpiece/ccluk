!function(t,e,o,a){"use strict";function r(e,o){this.element=e,this.$el=t(this.element),this.forminatorFront=null,this.settings=t.extend({},i,o),this._defaults=i,this._name=n,this.init()}var n="forminatorFrontSubmit",i={form_type:"custom-form",forminatorFront:!1,forminator_selector:"",chart_design:"bar",chart_options:{}};t.extend(r.prototype,{init:function(){switch(this.forminatorFront=this.$el.data("forminatorFront"),this.settings.form_type){case"custom-form":this.settings.forminator_selector&&t(this.settings.forminator_selector).length||(this.settings.forminator_selector=".forminator-custom-form"),this.handle_submit_custom_form();break;case"quiz":this.settings.forminator_selector&&t(this.settings.forminator_selector).length||(this.settings.forminator_selector=".forminator-quiz"),this.handle_submit_quiz();break;case"poll":this.settings.forminator_selector&&t(this.settings.forminator_selector).length||(this.settings.forminator_selector=".forminator-poll"),this.handle_submit_poll()}},handle_submit_custom_form:function(){var o=this;t(this.element);o.$el.find(".forminator-cform-response-message").find(".forminator-label--success").not(":hidden").length&&o.focus_to_element(o.$el.find(".forminator-cform-response-message"),!0),t("body").on("submit.frontSubmit",this.settings.forminator_selector,function(a){var r=t(this),n=new FormData(this),i=r.find(".forminator-cform-response-message"),s=r.find(".forminator-g-recaptcha");if(s.length){s=t(s.get(0));var l=s.data("forminator-recapchta-widget"),f=s.data("size"),d=e.grecaptcha.getResponse(l);if("invisible"===f&&0===d.length)return e.grecaptcha.execute(l),!1;if(e.grecaptcha.reset(l),i.html(""),s.hasClass("error")&&s.removeClass("error"),0===d.length)return s.hasClass("error")||s.addClass("error"),i.html('<label class="forminator-label--error"><span>'+e.ForminatorFront.cform.captcha_error+"</span></label>"),o.focus_to_element(i),!1}return!o.$el.hasClass("forminator_ajax")||(i.html(""),i.html('<label class="forminator-label--info"><span>'+e.ForminatorFront.cform.processing+"</span></label>"),o.focus_to_element(i),a.preventDefault(),t.ajax({type:"POST",url:e.ForminatorFront.ajaxUrl,data:n,cache:!1,contentType:!1,processData:!1,beforeSend:function(){r.find("button").attr("disabled",!0)},success:function(a){r.find(".forminator-label--validation").remove(),r.find(".forminator-field").removeClass("forminator-has_error"),r.find("button").removeAttr("disabled"),i.html("");var n=a.success?"success":"error";void 0!==a.message?(i.html('<label class="forminator-label--'+n+'"><span>'+a.message+"</span></label>"),o.focus_to_element(i,"success"===n)):void 0!==a.data&&(n=a.data.success?"success":"error",i.html('<label class="forminator-label--'+n+'"><span>'+a.data.message+"</span></label>"),o.focus_to_element(i,"success"===n)),!a.data.success&&a.data.errors.length&&o.show_messages(a.data.errors),!0===a.success&&(r[0]&&(r[0].reset(),r.find(".forminator-upload--remove").hide(),r.find(".forminator-upload .forminator-input").val(""),r.find(".forminator-upload .forminator-label").html("No file chosen"),r.find(".forminator-select").each(function(){t(this).val(null).trigger("change")}),r.trigger("forminator.front.condition.restart")),void 0!==a.data.url&&(e.location.href=a.data.url))},error:function(){r.find("button").removeAttr("disabled"),i.html(""),i.html('<label class="forminator-label--notice"><span>'+e.ForminatorFront.cform.error+"</span></label>"),o.focus_to_element(i)}}),!1)})},handle_submit_quiz:function(){var o=this;t("body").on("submit.frontSubmit",this.settings.forminator_selector,function(a){var r=t(this),n=[];return a.preventDefault(),o.$el.find(".forminator-has-been-disabled").removeAttr("disabled"),n=r.serialize(),o.$el.find(".forminator-has-been-disabled").attr("disabled","disabled"),t.ajax({type:"POST",url:e.ForminatorFront.ajaxUrl,data:n,beforeSend:function(){o.$el.find("button").attr("disabled","disabled")},success:function(t){t.success?"nowrong"===t.data.type?o.$el.find(".quiz-form-button-holder").html(t.data.result):"knowledge"===t.data.type&&(o.$el.find(".quiz-form-button-holder").size()>0&&o.$el.find(".quiz-form-button-holder").html(t.data.finalText),Object.keys(t.data.result).forEach(function(e){var a=o.$el.find("#"+e);a.find(".forminator-question--result").text(t.data.result[e].message),a.find(".forminator-submit-rightaway").attr("disabled","disabled");var r,n=o.$el.find('[id|="'+t.data.result[e].answer+'"]'),i=n.closest(".forminator-answer");r=t.data.result[e].isCorrect?"forminator-is_correct":"forminator-is_incorrect",i.addClass(r)})):o.$el.find("button").removeAttr("disabled")}}),!1}),t("body").on("click",".forminator-result--header button",function(){location.reload()})},handle_submit_poll:function(){var o=this;o.$el.find(".forminator-poll-response-message").find(".forminator-label--success").not(":hidden").length&&o.focus_to_element(o.$el.find(".forminator-poll-response-message"),!0),t("body").on("submit.frontSubmit",this.settings.forminator_selector,function(a){var r=(t(this),o.$el.find(".forminator-poll-response-message"));return!o.$el.hasClass("forminator_ajax")||(r.html(""),r.html('<label class="forminator-label--info"><span>'+e.ForminatorFront.poll.processing+"</span></label>"),o.focus_to_element(r),a.preventDefault(),t.ajax({type:"POST",url:e.ForminatorFront.ajaxUrl,data:o.$el.serialize(),beforeSend:function(){o.$el.find("button").attr("disabled",!0)},success:function(t){o.$el.find("button").removeAttr("disabled"),r.html("");var a=t.success?"success":"error";!1===t.success?(r.html('<label class="forminator-label--'+a+'"><span>'+t.data.message+"</span></label>"),o.focus_to_element(r)):void 0!==t.data&&(a=t.data.success?"success":"error",r.html('<label class="forminator-label--'+a+'"><span>'+t.data.message+"</span></label>"),o.focus_to_element(r,"success"===a)),!0===t.success&&(void 0!==t.data.url?e.location.href=t.data.url:void 0!==t.data.chart_data&&t.data.chart_data.length>1&&"undefined"!=typeof google&&(void 0===google.visualization?(google.charts.load("current",{packages:["corechart","bar"]}),google.charts.setOnLoadCallback(function(){o.render_poll_chart(t.data.chart_data,t.data.back_button,o)})):o.render_poll_chart(t.data.chart_data,t.data.back_button,o)))},error:function(){o.$el.find("button").removeAttr("disabled"),r.html(""),r.html('<label class="forminator-label--notice"><span>'+e.ForminatorFront.poll.error+"</span></label>"),o.focus_to_element(r)}}),!1)})},render_poll_chart:function(e,a,r){r.$el.find(".forminator-poll--chart").remove();var n=r.$el.attr("id")+"-"+r.$el.data("forminatorRender"),i="forminator-chart-poll-"+n,s=t('<div id="'+i+'" class="forminator-poll--chart" style="width: 100%; height: 300px;"></div>'),l=google.visualization.arrayToDataTable(e),f=t(a),d=!1;t(s).insertBefore(r.$el.find(".forminator-poll--answers")),r.$el.find(".forminator-poll--answers").hide(),r.$el.find(".forminator-poll--actions").empty(),f.click(function(t){t.preventDefault(),location.reload()}),r.$el.find(".forminator-poll--actions").append(f),"bar"===r.settings.chart_design?d=new google.visualization.BarChart(o.getElementById(i)):"pie"===this.settings.chart_design&&(d=new google.visualization.PieChart(o.getElementById(i))),d&&d.draw(l,r.settings.chart_options)},focus_to_element:function(o,a){a=a||!1,o.show(),t("html,body").animate({scrollTop:o.offset().top-(t(e).height()-o.outerHeight(!0))/2},500,function(){o.attr("tabindex")||o.attr("tabindex",-1),o.focus(),a&&o.show().delay(5e3).fadeOut("slow")})},show_messages:function(e){var o=this,a=o.$el.data("forminatorFrontCondition");if(void 0!==a){this.$el.find(".forminator-label--validation").remove();var r=0;e.forEach(function(e){var n=Object.keys(e),i=Object.values(e),s=a.get_form_field(n);if(s.length){if(0===r&&(o.$el.trigger("forminator.front.pagination.focus.input",[s]),o.focus_to_element(s)),t(s).hasClass("forminator-input-time")){var l=t(s).closest(".forminator-field:not(.forminator-field--inner)"),f=l.children(".forminator-label--validation");0===f.length&&(l.append('<label class="forminator-label--validation"></label>'),f=l.children(".forminator-label--validation")),f.text(i)}var d=t(s).closest(".forminator-field--inner");0===d.length&&(d=t(s).closest(".forminator-field"),0===d.length&&(d=t(s).find(".forminator-field"),d.length>1&&(d=d.first())));var c=d.find(".forminator-label--validation");0===c.length&&(d.append('<label class="forminator-label--validation"></label>'),c=d.find(".forminator-label--validation")),t(s).attr("aria-invalid","true"),c.text(i),d.addClass("forminator-has_error"),r++}})}return this}}),t.fn[n]=function(e){return this.each(function(){t.data(this,n)||t.data(this,n,new r(this,e))})}}(jQuery,window,document);