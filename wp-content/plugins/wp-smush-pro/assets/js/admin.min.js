!function(s){var e={};function t(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return s[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=s,t.c=e,t.d=function(s,e,i){t.o(s,e)||Object.defineProperty(s,e,{enumerable:!0,get:i})},t.r=function(s){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},t.t=function(s,e){if(1&e&&(s=t(s)),8&e)return s;if(4&e&&"object"==typeof s&&s&&s.__esModule)return s;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:s}),2&e&&"string"!=typeof s)for(var a in s)t.d(i,a,function(e){return s[e]}.bind(null,a));return i},t.n=function(s){var e=s&&s.__esModule?function(){return s.default}:function(){return s};return t.d(e,"a",e),e},t.o=function(s,e){return Object.prototype.hasOwnProperty.call(s,e)},t.p="",t(t.s=8)}([,,,function(s,e,t){"use strict";jQuery(function(){var s=jQuery(".smush-notice"),e=s.find(".smush-notice-act"),t=s.find(".smush-notice-dismiss");function i(){s.fadeTo(100,0,function(){s.slideUp(100,function(){s.remove()})})}function a(e){s.attr("data-message",e),s.addClass("loading");jQuery.post(ajaxurl,{action:"dismiss_upgrade_notice"})}function n(s){var e={action:s};jQuery.post(ajaxurl,e)}s.fadeIn(500),e.click(function(s){i(),a(e.data("msg"))}),t.click(function(s){i(),a(e.data("msg"))}),jQuery(".wp-smush-update-info").on("click",".notice-dismiss",function(e){e.preventDefault(),s=jQuery(this),i(),n("dismiss_update_info")}),jQuery("div.wp-smush-s3support-alert").on("click",".icon-fi-close",function(e){s=jQuery(this),i(),n("dismiss_s3support_alert")})})},function(s,e,t){"use strict";!function(s){s("#smush-quick-setup-submit").on("click",function(){var e=s(this);s.ajax({type:"POST",url:ajaxurl,data:s("#smush-quick-setup-form").serialize(),beforeSend:function(){e.attr("disabled","disabled"),s('<span class="sui-icon-loader sui-loading"></span>').insertAfter(e)},success:function(s){e.removeAttr("disabled"),e.parent().find("span.spinner").remove(),location.reload()}})}),s(".smush-skip-setup").on("click",function(){var e=s("form#smush-quick-setup-form");s.ajax({type:"POST",url:ajaxurl,data:e.serialize(),beforeSend:function(){e.find(".button").attr("disabled","disabled")}})})}(jQuery)},function(s,e,t){"use strict";jQuery(function(s){s(".sui-wrap").on("click",".sui-notice-dismiss",function(e){e.preventDefault(),s(this).parent().stop().slideUp("slow")}),s(window).on("load",function(){s("#smush-quick-setup-dialog").length>0&&window.SUI.dialogs["smush-quick-setup-dialog"].show()})})},function(s,e,t){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(s){return typeof s}:function(s){return s&&"function"==typeof Symbol&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},a=a||{};if(wp_smush_msgs);var n=function(s,e,t){var i=s.parents().eq(1).find(".wp-smush-progress");"show"===t?i.html(e):i.html(wp_smush_msgs.all_done),i.toggleClass("visible")},u=function(s){var e=jQuery("#wp-smush-invalid-member");void 0!==s&&void 0!==s.show_warning&&e.length>0&&(s.show_warning?e.show():e.hide())},r=function(s,e){void 0===e&&(e=100),s.fadeTo(e,0,function(){s.slideUp(e,function(){s.remove()})})};jQuery(function(s){function e(e){if(0!==e){var t=s(".attachment-info .file-size");if(t.contents().filter(function(){return 3===this.nodeType}).text()!==" "+e){var i=t.contents().filter(function(){return 1===this.nodeType}).text();t.html("<strong>"+i+"</strong> "+e)}}}s("#smush-quick-setup").size()>0&&(WDP.showOverlay("#smush-quick-setup",{title:wp_smush_msgs.quick_setup_title,class:"no-close wp-smush-overlay wp-smush-quick-setup"}),s("dialog#smush-quick-setup").remove());var t=function(e,t){return s.isEmptyObject(t)||(e+=(e.indexOf("?")>=0?"&":"?")+s.param(t)),e};a.errors=[],a.timeout=wp_smushit_data.timeout,a.geturlparam=function(s){for(var e=window.location.search.substring(1).split("&"),t=0;t<e.length;t++){var i=e[t].split("=");if(i[0]==s)return i[1]}},a.Smush=function(r,o,d){var h=this,m=r.data("smush");return m="undefined"!=(void 0===m?"undefined":i(m))&&0!=m,this.init=function(){this.$button=s(r[0]),this.is_bulk=!(void 0!==o&&!i(o))&&o,this.url=ajaxurl,this.$log=s(".smush-final-log"),this.deferred=jQuery.Deferred(),this.deferred.errors=[];var e=wp_smushit_data.resmush.length>0&&!m?wp_smushit_data.unsmushed.length>0?wp_smushit_data.resmush.concat(wp_smushit_data.unsmushed):wp_smushit_data.resmush:wp_smushit_data.unsmushed;"object"==(void 0===e?"undefined":i(e))?this.ids=e.filter(function(s,e,t){return e==t.indexOf(s)}):this.ids=e,this.is_bulk_resmush=wp_smushit_data.resmush.length>0&&!m,this.$status=this.$button.parent().find(".smush-status"),this.smush_type=void 0!==d?d:"media",this.single_ajax_suffix="nextgen"==this.smush_type?"smush_manual_nextgen":"wp_smushit_manual",this.bulk_ajax_suffix="nextgen"==this.smush_type?"wp_smushit_nextgen_bulk":"wp_smushit_bulk",this.url=this.is_bulk?t(this.url,{action:this.bulk_ajax_suffix}):t(this.url,{action:this.single_ajax_suffix})},a.ajax=function(e,t,i,n,u){var r={is_bulk_resmush:e,attachment_id:t,get_next:n,_nonce:u};return r=jQuery.param(r),s.ajax({type:"GET",data:r,url:i,timeout:a.timeout,dataType:"json"})},this.start=function(){this.$button.attr("disabled","disabled"),this.$button.addClass("wp-smush-started"),this.bulk_start(),this.single_start()},this.bulk_start=function(){this.is_bulk&&(s(".wp-smush-bulk-wrapper").hide(),s(".bulk-smush-wrapper .wp-smush-bulk-progress-bar-wrapper").show(),s(".sui-notice-top").remove(),s("p.smush-error-message.limit_exceeded").remove(),s("div.smush-final-log p").length<=0&&s("div.smush-final-log").hide())},this.single_start=function(){this.is_bulk||(this.show_loader(),this.$status.removeClass("error"))},this.enable_button=function(){this.$button.prop("disabled",!1),s("button.wp-smush-all").removeAttr("disabled"),s("button.wp-smush-scan, a.wp-smush-lossy-enable, button.wp-smush-resize-enable, input#wp-smush-save-settings").removeAttr("disabled")},this.show_loader=function(){n(this.$button,wp_smush_msgs.smushing,"show")},this.hide_loader=function(){n(this.$button,wp_smush_msgs.smushing,"hide")},this.single_done=function(){this.is_bulk||(this.hide_loader(),this.request.done(function(s){if(void 0!==s.data){var t=h.$status.parent(),i=t.find(".smush-stats-wrapper");s.data.status&&(t.find(".smush-status-links").remove(),h.$status.replaceWith(s.data.status)),u(s.data),s.success&&"Not processed"!==s.data?(h.$status.removeClass("sui-hidden"),h.$button.parent().removeClass("unsmushed").addClass("smushed"),h.$button.remove()):(h.$status.addClass("error"),h.$status.html(s.data.error_msg),h.$status.show()),"undefined"!=i&&i.length?i.replaceWith(s.data.stats):t.append(s.data.stats),e(s.data.new_size)}h.enable_button()}).error(function(s){h.$status.html(s.data),h.$status.addClass("error"),h.enable_button()}))},this.sync_stats=function(){var e=s("div.wp-smush-bulk-progress-bar-wrapper div.wp-smush-count.tc"),t=e.html();e.html(wp_smush_msgs.sync_stats),s.ajax({type:"GET",url:ajaxurl,data:{action:"get_stats"},success:function(e){e&&void 0!==e&&(e=e.data,s.extend(wp_smushit_data,{count_images:e.count_images,count_smushed:e.count_smushed,count_total:e.count_total,count_resize:e.count_resize,count_supersmushed:e.count_supersmushed,savings_bytes:e.savings_bytes,savings_conversion:e.savings_conversion,savings_resize:e.savings_resize,size_before:e.size_before,size_after:e.size_after}),g(this.smush_type))}}).always(function(){e.html(t)})},this.bulk_done=function(){this.is_bulk&&(this.enable_button(),0==h.ids.length?(s(".bulk-smush-wrapper .wp-smush-all-done, .wp-smush-pagespeed-recommendation").show(),s(".wp-smush-bulk-wrapper").hide()):(s(".bulk-smush-wrapper .wp-smush-resmush-notice").length>0?s(".bulk-smush-wrapper .wp-smush-resmush-notice").show():s(".bulk-smush-wrapper .wp-smush-remaining").show(),s(".wp-smush-bulk-wrapper").show()),s(".wp-smush-bulk-progress-bar-wrapper").hide(),s(".wp-resmush.wp-smush-action, .wp-smush-scan").removeAttr("disabled"),0==h.ids.length?s(".sui-summary-smush .smush-stats-icon").addClass("sui-hidden"):s(".sui-summary-smush .smush-stats-icon").removeClass("sui-icon-loader sui-loading sui-hidden").addClass("sui-icon-info sui-warning"))},this.is_resolved=function(){return"resolved"===this.deferred.state()},this.free_exceeded=function(){s(".wp-smush-bulk-progress-bar-wrapper").hide(),h.ids.length>0?s(".wp-smush-bulk-wrapper ").show():s(".wp-smush-notice.wp-smush-all-done, .wp-smush-pagespeed-recommendation").show()},this.update_remaining_count=function(){this.is_bulk_resmush?s(".wp-smush-resmush-notice .wp-smush-remaining-count").length&&void 0!==h.ids&&s(".wp-smush-resmush-notice .wp-smush-remaining-count").html(h.ids.length):s(".bulk-smush-wrapper .wp-smush-remaining-count").length&&void 0!==h.ids&&s(".bulk-smush-wrapper .wp-smush-remaining-count").html(h.ids.length),s(".smush-sidenav .wp-smush-remaining-count").length&&void 0!==h.ids&&(h.ids.length>0?s(".smush-sidenav .wp-smush-remaining-count").html(h.ids.length):(s(".sui-summary-smush .smush-stats-icon").addClass("sui-hidden"),s(".smush-sidenav .wp-smush-remaining-count").removeClass("sui-tag sui-tag-warning").html("")))},this.update_progress=function(e){if(this.is_bulk_resmush||this.is_bulk){var t="";!e||void 0===e.data&&void 0===e.data.stats||f(e.data.stats,this.smush_type),this.is_bulk_resmush?(e.success&&(wp_smushit_data.resmush.length>0?s(".wp-smush-images-remaining").html(wp_smushit_data.resmush.length):0==wp_smushit_data.resmush.length&&0==this.ids.length&&(s(".bulk-resmush-wrapper .wp-smush-all-done, .wp-smush-pagespeed-recommendation").removeClass("sui-hidden"),s(".wp-smush-resmush-wrap, .wp-smush-bulk-progress-bar-wrapper").hide())),void 0!==h.ids&&void 0!==wp_smushit_data.count_total&&wp_smushit_data.count_total>0&&(t=wp_smushit_data.count_smushed/wp_smushit_data.count_total*100)):t=wp_smushit_data.count_smushed/wp_smushit_data.count_total*100,0==h.ids.length&&("nextgen"!=this.smush_type&&this.sync_stats(),s(".bulk-smush-wrapper .wp-smush-all-done, .wp-smush-pagespeed-recommendation").show(),s(".wp-smush-bulk-wrapper").hide()),h.update_remaining_count(),void 0!==e.data.stats&&this._update_progress(wp_smushit_data.count_smushed,t),g(this.smush_type)}},this._update_progress=function(s,e){if(this.is_bulk||this.is_bulk_resmush){var t=jQuery(".bulk-smush-wrapper .wp-smush-progress-inner");t.length<1||t.css("width",e+"%")}},this.continue=function(){var s=h.$button.attr("continue_smush");return"undefined"==(void 0===s?"undefined":i(s))&&(s=!0),"false"!=s&&s||(s=!1),s&&this.ids.length>0&&this.is_bulk},this.increment_errors=function(s){a.errors.push(s)},this.call_ajax=function(){var e="";this.current_id=this.is_bulk?this.ids.shift():this.$button.data("id"),this.update_smush_ids(this.current_id);var t=this.$button.parent().find("#_wp_smush_nonce");return t&&(e=t.val()),this.request=a.ajax(this.is_bulk_resmush,this.current_id,this.url,0,e).error(function(){h.increment_errors(h.current_id)}).done(function(e){if((void 0===e.success||void 0!==e.success&&void 0!==e.success.data&&!1===e.success&&"bulk_request_image_limit_exceeded"!==e.data.error)&&h.increment_errors(h.current_id),!(e&&e.success||void 0===e||void 0===e.data||void 0===e.data.error)){var t='<p class="'+(void 0!==e.data.error_class?"smush-error-message "+e.data.error_class:"smush-error-message")+'">'+e.data.error_message+"</p>";if(void 0!==e.data.error&&"bulk_request_image_limit_exceeded"==e.data.error){var i=s(".wp-smush-ajax-error");i.length>0?i.after(t):h.$log.prepend(t)}else if(void 0!==e.data.error_class&&""!=e.data.error_class&&s("div.smush-final-log ."+e.data.error_class).length>0){var a=s("p.smush-error-message."+e.data.error_class+" .image-error-count"),n=a.html();n=parseInt(n)+1,a.html(n)}else h.$log.append(t);h.$log.show()}u(e.data),void 0===e.data||"bulk_request_image_limit_exceeded"!=e.data.error||h.is_resolved()?h.is_bulk&&e.success?h.update_progress(e):0==h.ids.length&&h.sync_stats():(h.$button.attr("continue_smush",!1),h.free_exceeded(),wp_smushit_data.unsmushed.unshift(h.current_id),h.update_remaining_count()),h.single_done()}).complete(function(){h.continue()&&h.is_bulk?h.call_ajax():h.deferred.resolve()}),h.deferred.errors=a.errors,h.deferred},this.init(arguments),this.run=function(){this.is_bulk&&this.ids.length>0&&this.call_ajax(),this.is_bulk||this.call_ajax()},this.bind_deferred_events=function(){this.deferred.done(function(){if(h.$button.removeAttr("continue_smush"),a.errors.length){var e='<div class="wp-smush-ajax-error">'+wp_smush_msgs.error_in_bulk.replace("{{errors}}",a.errors.length)+"</div>";s(".wp-smush-ajax-error").remove(),h.$log.prepend(e)}h.bulk_done(),s(".wp-smush-button:not(.wp-smush-finished), .wp-smush-scan").removeAttr("disabled")})},this.cancel_ajax=function(){s(".wp-smush-cancel-bulk").on("click",function(){h.$button.attr("continue_smush",!1),h.sync_stats(),g(this.smush_type),h.request.abort(),h.enable_button(),h.$button.removeClass("wp-smush-started"),wp_smushit_data.unsmushed.unshift(h.current_id),s(".wp-smush-bulk-wrapper").show(),s(".wp-smush-bulk-progress-bar-wrapper").hide()})},this.update_smush_ids=function(s){if(void 0!==wp_smushit_data.unsmushed&&wp_smushit_data.unsmushed.length>0){var e=wp_smushit_data.unsmushed.indexOf(s);e>-1&&wp_smushit_data.unsmushed.splice(e,1)}if(void 0!==wp_smushit_data.resmush&&wp_smushit_data.resmush.length>0){var t=wp_smushit_data.resmush.indexOf(s);t>-1&&wp_smushit_data.resmush.splice(t,1)}},this.start(),this.run(),this.bind_deferred_events(),this.cancel_ajax(),this.deferred},s("body").on("click","button.wp-smush-all",function(e){if(e.preventDefault(),s(".sui-notice-top.sui-notice-success").remove(),s(".wp-resmush.wp-smush-action, .wp-smush-scan, .wp-smush-button, a.wp-smush-lossy-enable, button.wp-smush-resize-enable, input#wp-smush-save-settings").attr("disabled","disabled"),"undefined"==typeof wp_smushit_data||0==wp_smushit_data.unsmushed.length&&0==wp_smushit_data.resmush.length)return!1;s(".wp-smush-remaining").hide(),s(".sui-summary-smush .smush-stats-icon").removeClass("sui-icon-info sui-warning").addClass("sui-icon-loader sui-loading"),new a.Smush(s(this),!0)});var o=function(t,i,a,u){if("disabled"==i.attr("disabled"))return!1;t.preventDefault(),s(".wp-smush-error").remove(),s(".smush-stats-wrapper").hide();var r="grid";"smush_restore_image"==a&&(r=s(document).find("div.media-modal.wp-core-ui").length>0?"grid":window.location.search.indexOf("item")>-1?"grid":"list");var o={action:a,attachment_id:i.data("id"),mode:r,_nonce:i.data("nonce")};!function(s){var e=s.parent();e.css({opacity:"0.5"}),e.find("a").attr("disabled","disabled")}(i),n(i,wp_smush_msgs[u],"show"),s.post(ajaxurl,o,function(s){n(i,wp_smush_msgs[u],"hide"),function(s){var e=s.parent();e.css({opacity:"1"}),e.find("a").removeAttr("disabled")}(i),s.success&&void 0!==s.data.button?(void 0!==this.data&&this.data.indexOf("nextgen")>-1?i.parent().html(s.data.button):i.parents().eq(1).html(s.data.button),void 0!==s.data&&"restore"===u&&e(s.data.new_size)):s.data.message&&i.parent().append(s.data.message)})},d=function(s,e){if(Math.abs(s)<1024)return s+" B";var t=["KB","MB","GB","TB","PB"],i=-1;do{s/=1024,++i}while(Math.abs(s)>=1024&&i<t.length-1);return s.toFixed(e)+" "+t[i]},h=function(s,e){var t=s>=0?1:-1;return s=s>100?100:s,Math.round(s*Math.pow(10,e)+.001*t)/Math.pow(10,e)},m=function(e,t){e.text("").addClass("sui-button-onload sui-icon-loader sui-loading").blur();var i=e.data("type");i=void 0===i?"media":i,s("button.wp-smush-all").removeAttr("data-smush");var a=s(".sui-notice-top.sui-notice-success");a.slideUp(100,function(){a.remove()}),s(".wp-smush-button").attr("disabled","disabled"),s(".wp-smush-settings-changed").hide();var n={action:"scan_for_resmush",type:i,get_ui:!0,process_settings:t,wp_smush_options_nonce:jQuery("#wp_smush_options_nonce").val()};s.get(ajaxurl,n,function(e){if(void 0!==e.data){if(void 0!==e.data.resmush_ids){wp_smushit_data.resmush=e.data.resmush_ids,"undefinied"!=typeof wp_smushit_data&&(wp_smushit_data.count_smushed=void 0!==e.data.count_smushed?e.data.count_smushed:wp_smushit_data.count_smushed,wp_smushit_data.count_supersmushed=void 0!==e.data.count_supersmushed?e.data.count_supersmushed:wp_smushit_data.count_supersmushed,wp_smushit_data.count_images=void 0!==e.data.count_image?e.data.count_image:wp_smushit_data.count_images,wp_smushit_data.size_before=void 0!==e.data.size_before?e.data.size_before:wp_smushit_data.size_before,wp_smushit_data.size_after=void 0!==e.data.size_after?e.data.size_after:wp_smushit_data.size_after,wp_smushit_data.savings_resize=void 0!==e.data.savings_resize?e.data.savings_resize:wp_smushit_data.savings_resize,wp_smushit_data.savings_conversion=void 0!==e.data.savings_conversion?e.data.savings_conversion:wp_smushit_data.savings_conversion,wp_smushit_data.count_resize=void 0!==e.data.count_resize?e.data.count_resize:wp_smushit_data.count_resize),"nextgen"==i&&(wp_smushit_data.bytes=parseInt(wp_smushit_data.size_before)-parseInt(wp_smushit_data.size_after));var t=wp_smushit_data.count_smushed/wp_smushit_data.count_total*100;t=h(t,1),s(".wp-smush-images-percent").html(t);var a=s(".bulk-smush-wrapper .sui-notice");a.length>0&&(a.hide(),s(".wp-smush-pagespeed-recommendation").hide()),s(".wp-smush-resmush-notice").remove(),s(".wp-smush-bulk-wrapper").show(),void 0!==e.data.count&&function(s){if(void 0===s)return!1;var e=wp_smushit_data.count_total-s,t=jQuery(".bulk-smush-wrapper .wp-smush-progress-inner");if(!(t.length<1)){var i=e/wp_smushit_data.count_total*100;t.css("width",i+"%")}}(e.data.count)}if(void 0!==e.data.content&&s(".bulk-smush-wrapper .sui-box-body").prepend(e.data.content),void 0!==e.data.notice&&s(".wp-smush-page-header").after(e.data.notice),s("div.smush-final-log").hide(),void 0!==e.data.super_smush&&e.data.super_smush){var n=jQuery(".wp-smush-enable-lossy");n.length>0&&n.remove(),"undefined"!==e.data.super_smush_stats&&s(".super-smush-attachments .wp-smush-stats").html(e.data.super_smush_stats)}g(i)}}).always(function(){jQuery(".bulk-smush-wrapper .wp-smush-bulk-progress-bar-wrapper").hide(),e.text(wp_smush_msgs.resmush_complete).removeClass("sui-button-onload sui-icon-loader sui-loading").addClass("smush-button-check-success"),setTimeout(function(){e.removeClass("smush-button-check-success").text(wp_smush_msgs.resmush_check)},2e3),s(".wp-smush-button").removeAttr("disabled"),s(".wp-smush-re-check-message").length&&r(s(".wp-smush-re-check-message"))})},p=function(e){e.action="smush_get_directory_list",e.list_nonce=jQuery('input[name="list_nonce"]').val();var t="";return s.ajax({type:"GET",url:ajaxurl,data:e,success:function(s){t=s},async:!1}),s("button.wp-smush-select-dir").html(wp_smush_msgs.add_dir),t},l=function(){SUI.dialogs["wp-smush-list-dialog"].hide(),s(".wp-smush-select-dir, button.wp-smush-browse, button.wp-smush-resume, a.wp-smush-dir-link").removeAttr("disabled"),s(".wp-smush-select-dir, .wp-smush-list-dialog .sui-box-body").css({opacity:"1"})},c=function(){SUI.suiAccordion(s(".sui-table.sui-accordion.smush-dir-smush-accordion"))},_=function(e){var t=e.closest("tr"),i=t.prev("tr"),a=i.find(".wp-smush-image-dir-progress"),n=i.find(".wp-smush-image-progress-percent"),u=i.find(".sui-tag"),r=i.find(".wp-smush-exclude-dir"),o=e.closest("tr").find(".wp-smush-image-ele"),d=e.is("li")?e.parent():"";if(o.length>0){var m=o.length,p=o.filter(".optimised").length;if(p>0&&m>0){n.removeClass("sui-hidden");var l=p/m*100;l=h(l,1),n.html(l+"%")}}if(0!=s('input[name="wp-smush-continue-ajax"]').val()&&p!=m&&a.addClass("sui-icon-loader sui-loading"),0!==d.length&&function(s){return s.find("li.wp-smush-image-ele:not(.optimised,.processed,.error)").length<=0}(d)){if(p<m){var c=m-p,_='<div class="sui-notice sui-notice-warning"><p>'+c+" "+(1==c?wp_smush_msgs.unfinished_smush_single:wp_smush_msgs.unfinished_smush)+"</p></div>",w=d.find("div.sui-notice");w.length&&w.remove(),d.after(_),a.removeClass("sui-icon-loader sui-loading").addClass("partial"),t.find("td").addClass("partial"),i.find("td").addClass("partial")}else a.removeClass("partial sui-icon-loader sui-loading").addClass("optimised"),u.removeClass("sui-tag-warning").addClass("sui-tag-inactive"),r.hide(),t.find("td").removeClass("partial").addClass("optimised"),i.find("td").removeClass("partial").addClass("optimised");a.removeClass("sui-icon-loader sui-loading"),n.html("")}},w=function(){if(!(s("div.wp-smush-scan-result div.content").height()<1500||s("div.wp-smush-all-button-wrap.top").length>=1)){var e=s("div.wp-smush-all-button-wrap.bottom").clone();e.addClass("top").removeClass("bottom"),s("div.wp-smush-scan-result div.content").prepend(e)}},v=function(e){if(!(s("div.wp-smush-scan-result div.content").height()<1500||s("div.wp-smush-scan-result div.sui-notice.top").length>=1)){("all_done"==e?s("div.sui-notice.wp-smush-dir-all-done").clone():"smush_limit"==e?s("div.sui-notice.wp-smush-dir-limit").clone():s("div.sui-notice.wp-smush-dir-remaining").clone()).addClass("top")}},f=function(s,e){"undefined"!=typeof wp_smushit_data&&("media"==e?(wp_smushit_data.count_smushed=parseInt(wp_smushit_data.count_smushed)+1,wp_smushit_data.count_images=parseInt(wp_smushit_data.count_images)+parseInt(s.count),s.is_lossy&&(wp_smushit_data.count_supersmushed=parseInt(wp_smushit_data.count_supersmushed)+1),wp_smushit_data.savings_resize=void 0!==s.savings_resize.bytes?parseInt(wp_smushit_data.savings_resize)+parseInt(s.savings_resize.bytes):parseInt(wp_smushit_data.savings_resize),wp_smushit_data.count_resize=void 0!==s.savings_resize.bytes?parseInt(wp_smushit_data.count_resize)+1:wp_smushit_data.count_resize,wp_smushit_data.savings_conversion=void 0!==s.savings_conversion&&void 0!==s.savings_conversion.bytes?parseInt(wp_smushit_data.savings_conversion)+parseInt(s.savings_conversion.bytes):parseInt(wp_smushit_data.savings_conversion)):"directory_smush"==e?wp_smushit_data.count_images=parseInt(wp_smushit_data.count_images)+1:"nextgen"==e&&(wp_smushit_data.count_smushed=parseInt(wp_smushit_data.count_smushed)+1,wp_smushit_data.count_supersmushed=parseInt(wp_smushit_data.count_supersmushed)+1,wp_smushit_data.count_images=parseInt(wp_smushit_data.count_images)+parseInt(s.count)),s.size_before>s.size_after&&(wp_smushit_data.size_before=void 0!==s.size_before?parseInt(wp_smushit_data.size_before)+parseInt(s.size_before):parseInt(wp_smushit_data.size_before),wp_smushit_data.size_after=void 0!==s.size_after?parseInt(wp_smushit_data.size_after)+parseInt(s.size_after):parseInt(wp_smushit_data.size_after)),void 0!==s.savings_resize&&(wp_smushit_data.size_before=void 0!==s.savings_resize.size_before?parseInt(wp_smushit_data.size_before)+parseInt(s.savings_resize.size_before):parseInt(wp_smushit_data.size_before),wp_smushit_data.size_after=void 0!==s.savings_resize.size_after?parseInt(wp_smushit_data.size_after)+parseInt(s.savings_resize.size_after):parseInt(wp_smushit_data.size_after)),void 0!==s.savings_conversion&&(wp_smushit_data.size_before=void 0!==s.savings_conversion.size_before?parseInt(wp_smushit_data.size_before)+parseInt(s.savings_conversion.size_before):parseInt(wp_smushit_data.size_before),wp_smushit_data.size_after=void 0!==s.savings_conversion.size_after?parseInt(wp_smushit_data.size_after)+parseInt(s.savings_conversion.size_after):parseInt(wp_smushit_data.size_after)))},g=function(e){var t=0,i=void 0!==e&&"nextgen"==e;wp_smushit_data.savings_bytes=parseInt(wp_smushit_data.size_before)-parseInt(wp_smushit_data.size_after);var a=d(wp_smushit_data.savings_bytes,1);i?s(".wp-smush-savings .wp-smush-stats-human").html(a):(s(".wp-smush-savings .wp-smush-stats-human").html(function(s){return s.replace(/[0-9.]/g,"").trim()}(a)),s(".sui-summary-large.wp-smush-stats-human").html(function(s){return s.replace(/[a-zA-Z]/g,"").trim()}(a))),wp_smushit_data.savings_percent=h(parseInt(wp_smushit_data.savings_bytes)/parseInt(wp_smushit_data.size_before)*100,1),isNaN(wp_smushit_data.savings_percent)||s(".wp-smush-savings .wp-smush-stats-percent").html(wp_smushit_data.savings_percent),wp_smushit_data.smush_percent=h(parseInt(wp_smushit_data.count_smushed)/parseInt(wp_smushit_data.count_total)*100,1),s("span.wp-smush-images-percent").html(wp_smushit_data.smush_percent),void 0!==wp_smushit_data.savings_bytes&&void 0!==wp_smushit_data.savings_resize&&(t=parseInt(wp_smushit_data.savings_bytes)-parseInt(wp_smushit_data.savings_resize))>0&&s("li.super-smush-attachments span.smushed-savings").html(d(t,1)),i?s(".sui-summary-details span.wp-smush-total-optimised").html(wp_smushit_data.count_images):s("span.smushed-items-count span.wp-smush-count-total span.wp-smush-total-optimised").html(wp_smushit_data.count_images),s("span.smushed-items-count span.wp-smush-count-resize-total span.wp-smush-total-optimised").html(wp_smushit_data.count_resize),s("li.super-smush-attachments .smushed-count").length&&void 0!==wp_smushit_data.count_supersmushed&&s("li.super-smush-attachments .smushed-count").html(wp_smushit_data.count_supersmushed);var n=s(".smush-conversion-savings");if(n.length>0&&void 0!==wp_smushit_data.savings_conversion&&""!=wp_smushit_data.savings_conversion){var u=n.find(".wp-smush-stats");u.length>0&&u.html(d(wp_smushit_data.savings_conversion,1))}var r=s(".smush-resize-savings");if(r.length>0&&void 0!==wp_smushit_data.savings_resize&&""!=wp_smushit_data.savings_resize){var o=parseInt(wp_smushit_data.savings_resize),m=r.find(".wp-smush-stats"),p=r.find(".wp-smush-stats-label-message");o>0&&m.length>0&&(p.length>0&&p.hide(),m.html(d(wp_smushit_data.savings_resize,1)))}if(function(){var s=wp_smushit_data.savings_percent>0?wp_smushit_data.savings_percent:0,e=wp_smushit_data.savings_bytes>0?wp_smushit_data.savings_bytes:0,t=2.22058824;s>49&&(t=1.22054412);s>0&&(s*=t,e*=t),wp_smushit_data.pro_savings={percent:h(s,1),savings_bytes:d(e,1)}}(),void 0!==wp_smushit_data.pro_savings){var l=s(".smush-avg-pro-savings");if(l.length>0){var c=l.find(".wp-smush-stats-percent"),_=l.find(".wp-smush-stats-human");c.length>0&&void 0!==wp_smushit_data.pro_savings.percent&&""!=wp_smushit_data.pro_savings.percent&&c.html(wp_smushit_data.pro_savings.percent),_.length>0&&void 0!==wp_smushit_data.pro_savings.savings_bytes&&""!=wp_smushit_data.pro_savings.savings_bytes&&_.html(wp_smushit_data.pro_savings.savings_bytes)}}},b=function(e){if(s(".smush-nav-icon.directory").removeClass("sui-icon-loader sui-loading"),s("button.wp-smush-pause").hide().attr("disabled","disabled"),""==e?s("button.wp-smush-start").parent().hide():s("button.wp-smush-start").show().removeAttr("disabled"),s("button.wp-smush-browse").show().removeAttr("disabled","disabled"),add_dir_browser_button(),w(),""==e){var t=s("li.wp-smush-image-ele"),i=t.length,a=t.filter(":not(.optimised)").length,n=i-a;if(a>0)s("span.wp-smush-dir-remaining").html(a),s("span.wp-smush-dir-total").html(i),s("span.wp-smush-dir-smushed").html(n),s(".sui-notice.wp-smush-dir-remaining").show(),v();else{var u=s(".sui-notice.wp-smush-dir-all-done").clone().show();s(".wp-smush-image-list tbody tr").not(":first").not(":last").hide(),s(".wp-smush-image-list tbody tr:first td").html(u).removeClass("partial optimised"),v("all_done")}}else s(".wp-smush-notice.wp-smush-dir-limit").show(),v("smush_limit")};var y=function(e){s(e).length>0&&s("html, body").animate({scrollTop:s(e).offset().top-100},"slow")};s("body").on("click","a.smush-stats-details",function(e){if("disabled"==s(this).attr("disabled"))return!1;e.preventDefault();var t=s(this).find(".stats-toggle");s(this).parents().eq(1).find(".smush-stats-wrapper").slideToggle(),t.text("+"==t.text()?"-":"+")}),s("body").on("click",".wp-smush-send:not(.wp-smush-resmush)",function(e){e.preventDefault(),new a.Smush(s(this),!1)}),s("body").on("click",".wp-smush-nextgen-send",function(e){e.preventDefault(),new a.Smush(s(this),!1,"nextgen")}),s("body").on("click",".wp-smush-nextgen-bulk",function(e){if(e.preventDefault(),"undefined"==typeof wp_smushit_data||0==wp_smushit_data.unsmushed.length&&0==wp_smushit_data.resmush.length)return!1;jQuery(".wp-smush-button, .wp-smush-scan").attr("disabled","disabled"),s(".wp-smush-notice.wp-smush-remaining").hide(),new a.Smush(s(this),!0,"nextgen")}),s("body").on("click",".wp-smush-action.wp-smush-restore",function(e){var t=s(this);o(e,t,"smush_restore_image","restore");var i=t.parents().eq(1);i.hasClass("smushed")&&i.removeClass("smushed").addClass("unsmushed")}),s("body").on("click",".wp-smush-action.wp-smush-resmush",function(e){var t=s(this);o(e,t,"smush_resmush_image","smushing")}),s("body").on("click",".wp-smush-action.wp-smush-nextgen-restore",function(e){var t=s(this);o(e,t,"smush_restore_nextgen_image","restore")}),s("body").on("click",".wp-smush-action.wp-smush-nextgen-resmush",function(e){var t=s(this);o(e,t,"smush_resmush_nextgen_image","smushing")}),s("body").on("click",".wp-smush-scan",function(e){e.preventDefault(),m(s(this),!1)}),s("#wp-smush-welcome-box .smush-dismiss-welcome").on("click",function(e){e.preventDefault();var t=s(this).parents().eq(1);r(t);s.post(ajaxurl,{action:"dismiss_welcome_notice"})}),s("body").on("click",".wp-smush-notice .icon-fi-close",function(e){e.preventDefault();var t=s(this).parent();r(t)}),s("input#wp-smush-save-settings").on("click",function(e){e.preventDefault();var t="",i=s('input[name="setting-type"]');i.length>0&&(t=i.val());var a=s(this);if(a.parent().find("span.sui-icon-loader.sui-loading").removeClass("sui-hidden"),""!=t&&"network"==t){var n={action:"save_settings",nonce:s("#wp_smush_options_nonce").val()};n=jQuery.param(n)+"&"+jQuery("form#wp-smush-settings-form").serialize(),jQuery.post(ajaxurl,n).done(function(){return jQuery("form#wp-smush-settings-form").submit(),!0})}else{a.parents().eq(1);var u=document.getElementById("wp-smush-strip_exif"),r=document.getElementById("wp-smush-lossy"),o=document.getElementById("wp-smush-original"),d=document.getElementById("wp-smush-resize"),h=document.getElementById("wp-smush-png_to_jpg"),m=!0;s(".wp-smush-hex-notice").hide(),null!==u&&u.checked||null!==r&&r.checked||null!==o&&o.checked||null!==d&&d.checked||null!==h&&h.checked||(m=!1),a.attr("disabled","disabled").addClass("button-grey"),m&&a.val(wp_smush_msgs.checking);var p=a.data("type");p=void 0===p?"media":p;n={action:"scan_for_resmush",wp_smush_options_nonce:jQuery("#wp_smush_options_nonce").val(),scan_type:p};n=jQuery.param(n)+"&"+jQuery("form#wp-smush-settings-form").serialize(),jQuery.post(ajaxurl,n).done(function(){return jQuery("form#wp-smush-settings-form").submit(),!0})}}),s("body").on("click",".wp-smush-skip-resmush",function(e){e.preventDefault();var t=jQuery(this),i=t.parents().eq(1),a=t.parent();r(a),s(".sui-notice-top.sui-notice-success").remove(),i.find(".wp-smush-all").attr("data-smush","skip_resmush"),wp_smushit_data.count_smushed=parseInt(wp_smushit_data.count_smushed)+wp_smushit_data.resmush.length,wp_smushit_data.count_supersmushed=parseInt(wp_smushit_data.count_supersmushed)+wp_smushit_data.resmush.length,wp_smushit_data.count_smushed==wp_smushit_data.count_total&&(s(".wp-smush-notice.wp-smush-all-done, .wp-smush-pagespeed-recommendation").show(),s(".wp-smush-bulk-wrapper ").hide()),s(".wp-smush-resmush-notice").remove();var n=s(".wp-smush-scan").data("type");n=void 0===n?"media":n;var u=(void 0!==wp_smushit_data.count_smushed?wp_smushit_data.count_smushed:0)/wp_smushit_data.count_total*100;u=h(u,1),s(".wp-smush-images-percent").html(u);var o=jQuery(".bulk-smush-wrapper .wp-smush-progress-inner");if(!(o.length<1)){o.css("width",u+"%"),s(".wp-smush-bulk-wrapper").show(),s(".wp-smush-bulk-wrapper .sui-notice").show();var d={action:"delete_resmush_list",type:n};s.post(ajaxurl,d,function(e){if(e.success&&void 0!==e.data.stats){var t=e.data.stats;"undefinied"!=typeof wp_smushit_data&&(wp_smushit_data.count_images=void 0!==t.count_images?parseInt(wp_smushit_data.count_images)+t.count_images:wp_smushit_data.count_images,wp_smushit_data.size_before=void 0!==t.size_before?parseInt(wp_smushit_data.size_before)+t.size_before:wp_smushit_data.size_before,wp_smushit_data.size_after=void 0!==t.size_after?parseInt(wp_smushit_data.size_after)+t.size_after:wp_smushit_data.size_after,wp_smushit_data.savings_resize=void 0!==t.savings_resize?parseInt(wp_smushit_data.savings_resize)+t.savings_resize:wp_smushit_data.savings_resize,wp_smushit_data.savings_conversion=void 0!==t.savings_conversion?parseInt(wp_smushit_data.savings_conversion)+t.savings_conversion:wp_smushit_data.savings_conversion,void 0!==wp_smushit_data.savings_dir_smush&&void 0!==wp_smushit_data.savings_dir_smush.orig_size&&(wp_smushit_data.size_before=void 0!==wp_smushit_data.savings_dir_smush?parseInt(wp_smushit_data.size_before)+parseInt(wp_smushit_data.savings_dir_smush.orig_size):wp_smushit_data.size_before,wp_smushit_data.size_after=void 0!==wp_smushit_data.savings_dir_smush?parseInt(wp_smushit_data.size_after)+parseInt(wp_smushit_data.savings_dir_smush.image_size):wp_smushit_data.size_after),wp_smushit_data.count_resize=void 0!==t.count_resize?parseInt(wp_smushit_data.count_resize)+t.count_resize:wp_smushit_data.count_resize),s(".bulk-smush-wrapper .wp-smush-remaining-count").length&&void 0!==wp_smushit_data.unsmushed&&s(".bulk-smush-wrapper .wp-smush-remaining-count").html(wp_smushit_data.unsmushed.length),g()}})}});var k=function(){s("#wp-smush-resize").prop("checked",!0).focus(),s("div.wp-smush-resize-settings-wrap").show(),y("#column-wp-smush-resize")},z=function(){s("#wp-smush-lossy").prop("checked",!0).focus(),y("#column-wp-smush-lossy")};if(s("a.wp-smush-lossy-enable").on("click",function(s){s.preventDefault(),z()}),s(".wp-smush-resize-enable").on("click",function(s){s.preventDefault(),k()}),window.location.hash){var x=window.location.hash.substring(1);"enable-resize"===x?k():"enable-lossy"===x&&z()}function C(){console.log(s(".wp-smush-list-dialog .content")),s(".wp-smush-list-dialog .content").fileTree({script:p,multiFolder:!1},function(s){}).on("filetreeexpanded",function(s,e){e.container.find("li").removeClass("selected"),e.li.addClass("selected")}).on("filetreecollapsed",function(s,e){e.li.removeClass("selected"),e.container.find('[rel="'+e.rel+'"]').parent().closest(".expanded").addClass("selected")})}if(s("body").on("click",".wp-smush-trigger-bulk",function(e){e.preventDefault(),s("button.wp-smush-all").click(),s("span.sui-notice-dismiss").click()}),s(".wp-smush-setting-row .toggle-checkbox").focus(function(){s(this).keypress(function(e){32==e.keyCode&&(e.preventDefault(),s(this).find(".toggle-checkbox").click())})}),s("body").on("blur",".wp-smush-resize-input",function(){!function(s,e,t){var i=s.find("#wp-smush-resize, #wp-smush-resize-quick-setup");if(!t)var a=s.find("#wp-smush-resize_width"),n=s.find(".sui-notice-info.wp-smush-update-width");if(!e)var u=s.find("#wp-smush-resize_height"),r=s.find(".sui-notice-info.wp-smush-update-height");var o=!1,d=!1;!i.is(":checked")||void 0===wp_smushit_data.resize_sizes||void 0===wp_smushit_data.resize_sizes.width||(!t&&void 0!==a&&parseInt(wp_smushit_data.resize_sizes.width)>parseInt(a.val())?(a.parent().addClass("sui-form-field-error"),n.show("slow"),o=!0):(a.parent().removeClass("sui-form-field-error"),n.hide(),u.hasClass("error")&&r.show("slow")),!e&&void 0!==u&&parseInt(wp_smushit_data.resize_sizes.height)>parseInt(u.val())?(u.parent().addClass("sui-form-field-error"),o||r.show("slow"),d=!0):(u.parent().removeClass("sui-form-field-error"),r.hide(),a.hasClass("error")&&n.show("slow")))}(s(this).parents().eq(4),!1,!1)}),s("body").on("click","#wp-smush-resize, #wp-smush-resize-quick-setup",function(){var e=s(this),t=s(".wp-smush-resize-settings-wrap");e.is(":checked")?t.show():t.hide()}),s("body").on("click","#wp-smush-auto",function(){var e=s(this),t=s(".wp-smush-image-size-list");e.is(":checked")?t.show():t.hide()}),s("body").on("click","#wp-smush-detection",function(){var e=s(this),t=s(".smush-highlighting-notice");e.is(":checked")?t.show():t.hide()}),s("#wp-smush-png_to_jpg").click(function(){var e=s(this),t=s(".wp-smush-png_to_jpg-wrap");e.is(":checked")?t.show():t.hide()}),s("#wp-smush-networkwide").on("click",function(e){s(this).is(":checked")?(s(".network-settings-wrapper").show(),s(".sui-vertical-tabs li").not(".smush-bulk").each(function(e){s(this).removeClass("sui-hidden")})):(s(".network-settings-wrapper").hide(),s(".sui-vertical-tabs li").not(".smush-bulk").each(function(e){s(this).addClass("sui-hidden")}))}),s("#wp-smush-twitter-share").on("click",function(e){e.preventDefault();var t=function(s){s=s.slice(s.indexOf("?")+1).split("&");for(var e=0;e<s.length;e++)return decodeURI(s[e]).split(/=(.+)/)[1].replace(/<(?:.|\n)*?>/gm,"")}(a=this.href);a=a.replace(/(text=)[^\&]+/,"$1"+t);var i=(s(window).width()-550)/2,a=a,n="status=1,width=550,height=420,top="+(s(window).height()-420)/2+",left="+i;return window.open(a,"twitter",n),!1}),s("#wp-smush-facebook-share").on("click",function(e){e.preventDefault();var t=(s(window).width()-550)/2,i=(s(window).height()-420)/2,a=this.href,n="status=1,width=550,height=420,top="+i+",left="+t;return window.open(a,"facebook",n),!1}),s("#wp-smush-revalidate-member").on("click",function(e){e.preventDefault();var t=s(this).parents().eq(1);t.addClass("loading-notice"),s.get(ajaxurl,{action:"smush_show_warning"},function(s){t.removeClass("loading-notice").addClass("loaded-notice"),0==s?(t.attr("data-message",wp_smush_msgs.membership_valid),r(t,1e3)):(t.attr("data-message",wp_smush_msgs.membership_invalid),setTimeout(function(){t.removeClass("loaded-notice")},1e3))})}),"undefined"!=typeof wp_smush_run_re_check&&1==wp_smush_run_re_check&&s(".wp-smush-scan").length>0&&m(s(".wp-smush-scan"),!1),s("body").on("click","a.wp-smush-dir-link",function(e){s("div.sui-wrap button.wp-smush-browse").length>0&&(e.preventDefault(),SUI.dialogs["wp-smush-list-dialog"].show(),C())}),s("div.sui-wrap").on("click","button.wp-smush-browse",function(e){e.preventDefault(),s("div.wp-smush-scan-result div.wp-smush-notice").hide(),s(this).attr("disabled")||(s(this).attr("disabled","disabled"),s("button.wp-smush-resume").attr("disabled","disabled"),s("div.wp-smush-info").remove(),s(".wp-smush-list-dialog").show(),s(".wp-smush-list-dialog div.close").focus(),C())}),s(".sui-dialog-close").on("click",function(e){s(".wp-smush-browse").removeAttr("disabled"),l()}),s(".wp-smush-select-dir").on("click",function(e){if(e.preventDefault(),!s(this).attr("disabled")){var t=s(this);s("div.wp-smush-list-dialog div.sui-box-body").css({opacity:"0.8"}),s("div.wp-smush-list-dialog div.sui-box-body a").unbind("click"),s("button.wp-smush-resume").remove(),t.attr("disabled","disabled");var i=t.parent().find(".add-dir-loader");i.addClass("sui-icon-loader sui-loading");var a=s(".jqueryFileTree .selected a").attr("rel");a=void 0===a?"":a;var n=s('input[name="wp-smush-base-path"]').val();s(".wp-smush-dir-path").val(n+"/"+a);var u={action:"image_list",smush_path:s(".wp-smush-dir-path").val(),image_list_nonce:s('input[name="image_list_nonce"]').val()};s.get(ajaxurl,u,function(e){if(e.success||void 0===e.data.message){s(".wp-smush-scan-result .smush-dir-smush-done").addClass("sui-hidden"),s("div.wp-smush-scan-result div.content").html(e.data);e.data.ids}else s("div.wp-smush-scan-result div.content").html(e.data.message);c(),l(),i.removeClass("sui-icon-loader sui-loading"),s(".wp-smush-scan-result").removeClass("sui-hidden").show()}).done(function(e){s("div.sui-box-header button.wp-smush-browse").removeClass("sui-hidden"),e.success?(s("div.wp-smush-all-button-wrap.bottom").removeClass("sui-hidden"),s("button.wp-smush-start").removeAttr("disabled"),add_dir_browser_button(),w(),window.location.hash="#wp-smush-dir-browser"):s("div.wp-smush-all-button-wrap.bottom").addClass("sui-hidden")})}}),s("#wp-smush-dir-wrap-box").on("click","button.wp-smush-start",function(e){if(e.preventDefault(),s(".wp-smush-image-ele:not(.optimised)").length){var t=s(".wp-smush-start"),i=t.parent();s("div.wp-smush-scan-result div.sui-notice").hide(),s('input[name="wp-smush-continue-ajax"]').val(1),s("button.wp-smush-browse").hide(),s(".wp-smush-exclude-dir").hide(),t.hide(),i.find("button.wp-smush-pause").removeClass("disabled sui-hidden").removeAttr("disabled"),s("button.wp-smush-browse").attr("disabled","disabled"),s(".smush-nav-icon.directory").addClass("sui-icon-loader sui-loading"),function e(){var t=jQuery('.wp-smush-image-list .wp-smush-image-ele:not(".optimised, .processed")'),i=t.first(),a=i.find(".wp-smush-image-ele-progress"),n=i.closest("tr").prev("tr"),u=n.find(".wp-smush-image-dir-progress"),r=n.find(".wp-smush-exclude-dir");n.find(".wp-smush-image-progress-percent");if(1==u.length&&(u.addClass("sui-icon-loader sui-loading").removeClass("partial optimised"),r.addClass("sui-hidden").hide()),s(".wp-smush-image-progress-percent").not(".optimised").removeClass("sui-hidden"),a.addClass("sui-icon-loader sui-loading"),0!==i.length){var o={action:"optimise",image_id:i.attr("id"),get_stats:t.length>1?0:1,nonce:s("#wp-smush-all").val()};s.get(ajaxurl,o,function(t){if(void 0!==t.data&&"dir_smush_limit_exceeded"==t.data.error)return i.removeClass("processed"),void b("wp-smush-dir-limit");var a=void 0!==t.data?t.data:"";if(void 0!==a.image){var n=jQuery(document.getElementById(a.image.id)),u=n.find(".wp-smush-image-ele-progress");n.removeClass("partial"),u.removeClass("sui-icon-loader sui-loading"),t.success?(n.addClass("optimised"),u.addClass("optimised"),_(n)):(n.addClass("processed"),u.addClass("partial"),_(n))}1==s('input[name="wp-smush-continue-ajax"]').val()?e():s("input.wp-smush-continue-ajax").val(1)})}else b("")}()}}),s("div.wp-smush-scan-result").on("click","button.wp-smush-pause",function(e){e.preventDefault();var t=s("button.wp-smush-pause");if(t.hasClass("disabled"))return!1;s('input[name="wp-smush-continue-ajax"]').val(0),t.addClass("sui-hidden").attr("disabled","disabled"),s("button.wp-smush-start, button.wp-smush-browse").show().removeAttr("disabled"),s("span.wp-smush-image-dir-progress, span.wp-smush-image-ele-progress").removeClass("sui-icon-loader sui-loading"),s(".wp-smush-image-progress-percent").addClass("sui-hidden"),s(".wp-smush-exclude-dir").each(function(){0===s(this).parent().prevAll(".optimised, .partial").length&&s(this).show()}),s(".smush-nav-icon.directory").removeClass("sui-icon-loader sui-loading")}),s("div.wp-smush-scan-result").on("click",".wp-smush-exclude-dir",function(e){e.preventDefault();var t=s(this),i={action:"smush_exclude_path",path:t.data("path"),nonce:s('input[name="exclude-path-nonce"]').val()};s.post(ajaxurl,i,function(e){e.success&&(t.closest("tr.sui-accordion-item").remove(),t.closest("tr.sui-accordion-item").next("tr.sui-accordion-item-content").remove(),0==s(".wp-smush-image-ele:not(.optimised)").length&&(s("div.wp-smush-all-button-wrap.bottom").hide(),s("div.wp-smush-scan-result").hide()))})}),s("button.wp-smush-resume").on("click",function(){!function(e){e.attr("disabled","disabled"),s(".wp-smush-browse").attr("disabled","disabled")}(s(this)),s("span.wp-smush-resume-loder").removeClass("sui-hidden");s.get(ajaxurl,{action:"resume_scan"},function(e){s("button.wp-smush-resume").remove(),s("button.wp-smush-browse").removeAttr("disabled"),e.success?(s("div.wp-smush-scan-result div.content").html(e.data),s("div.wp-smush-scan-result").removeClass("sui-hidden"),c()):(s("p.wp-smush-no-images-content").after(e.data.message),s("span.wp-smush-resume-loder").addClass("sui-hidden"))}).done(function(){add_dir_browser_button(),w()})}),s("li.smush-dir-savings").length>0){s.get(ajaxurl,{action:"get_dir_smush_stats"},function(e){s("li.smush-dir-savings .sui-icon-loader").hide(),e.success||void 0===e.data.message?void 0===e.data||void 0===e.data.dir_smush?(s("li.smush-dir-savings span.wp-smush-stats").append(wp_smush_msgs.ajax_error),s("li.smush-dir-savings span.wp-smush-stats span").hide()):function(e){if(void 0!==e.dir_smush){var t=s("li.smush-dir-savings span.wp-smush-stats span.wp-smush-stats-human"),i=s("li.smush-dir-savings span.wp-smush-stats span.wp-smush-stats-percent");e.dir_smush.bytes>0&&(s("li.smush-dir-savings .wp-smush-stats-label-message").hide(),t.length>0?t.html(e.dir_smush.human):e.dir_smush.bytes,e.dir_smush.percent>0&&(s("li.smush-dir-savings span.wp-smush-stats span.wp-smush-stats-sep").removeClass("sui-hidden"),i.length>0?i.html(e.dir_smush.percent+"%"):e.dir_smush.percent))}if(void 0!==e.combined_stats&&e.combined_stats.length>0){var a=e.combined_stats,n=a.smushed/a.total_count*100;(n=h(n,1))&&s("div.wp-smush-count-total span.wp-smush-images-percent").html(n),a.total_count&&s("span.wp-smush-count-total span.wp-smush-total-optimised").html(a.total_count),a.savings&&s("span.wp-smush-savings span.wp-smush-stats-human").html(a.savings),a.percent&&s("span.wp-smush-savings span.wp-smush-stats-percent").html(a.percent)}}(e.data):s("div.wp-smush-scan-result div.content").prepend(e.data.message)})}s(document).keyup(function(e){if(27===e.keyCode){var t=s("div.dev-overlay.wp-smush-list-dialog, div.dev-overlay.wp-smush-get-pro");if(!t.is(":visible"))return;t.find("div.close").click()}}),s("span.dismiss-recommendation").on("click",function(e){e.preventDefault();var t=s(this).parent();t.hide("slow",function(){t.remove()}),s.ajax({type:"POST",url:ajaxurl,data:{action:"hide_pagespeed_suggestion"}})}),s("div.wp-smush-api-message i.icon-fi-close").on("click",function(e){e.preventDefault();var t=s(this).parent();t.hide("slow",function(){t.remove()}),s.ajax({type:"POST",url:ajaxurl,data:{action:"hide_api_message"}})})}),function(s){s.fn.wpsmush=function(e){return this.each(function(){var t=s(this);if(!t.data("wpsmush")){var i=new function(e,t){s(e)}(this,e);t.data("wpsmush",i)}})}}(jQuery)},function(s,e){var t=function(s,e){return function(){return s.apply(e,arguments)}};!function(s,e){var i;i=function(){function e(e,i,a){var n,u,r;this.onEvent=t(this.onEvent,this),n=s(e),u=this,r={root:"/",script:"/files/filetree",folderEvent:"click",expandSpeed:500,collapseSpeed:500,expandEasing:"swing",collapseEasing:"swing",multiFolder:!0,loadMessage:"Loading...",errorMessage:"Unable to get file tree information",multiSelect:!1,onlyFolders:!1,onlyFiles:!1,preventLinkAction:!1},this.jqft={container:n},this.options=s.extend(r,i),this.callback=a,this.data={},n.html('<ul class="jqueryFileTree start"><li class="wait">'+this.options.loadMessage+"<li></ul>"),u.showTree(n,escape(this.options.root),function(){return u._trigger("filetreeinitiated",{})}),n.delegate("li a",this.options.folderEvent,u.onEvent)}return e.prototype.onEvent=function(e){var t,i,a,n,u,r;return t=s(e.target),u=this.options,n=this.jqft,i=this,a=this.callback,i.data={},i.data.li=t.closest("li"),i.data.type=null!=(r=i.data.li.hasClass("directory"))?r:{directory:"file"},i.data.value=t.text(),i.data.rel=t.prop("rel"),i.data.container=n.container,u.preventLinkAction&&e.preventDefault(),t.parent().hasClass("directory")?t.parent().hasClass("collapsed")?(u.multiFolder||(t.parent().parent().find("UL").slideUp({duration:u.collapseSpeed,easing:u.collapseEasing}),t.parent().parent().find("LI.directory").removeClass("expanded").addClass("collapsed")),t.parent().removeClass("collapsed").addClass("expanded"),t.parent().find("UL").remove(),i.showTree(t.parent(),t.attr("rel"),function(){return i._trigger("filetreeexpanded",i.data),null!=a})):t.parent().find("UL").slideUp({duration:u.collapseSpeed,easing:u.collapseEasing,start:function(){return i._trigger("filetreecollapse",i.data)},complete:function(){return t.parent().removeClass("expanded").addClass("collapsed"),i._trigger("filetreecollapsed",i.data),null!=a}}):(u.multiSelect?t.parent().find("input").is(":checked")?(t.parent().find("input").prop("checked",!1),t.parent().removeClass("selected")):(t.parent().find("input").prop("checked",!0),t.parent().addClass("selected")):(n.container.find("li").removeClass("selected"),t.parent().addClass("selected")),i._trigger("filetreeclicked",i.data),"function"==typeof a?a(t.attr("rel")):void 0)},e.prototype.showTree=function(e,t,i){var a,n,u,r,o,d,h;return a=s(e),d=this.options,n=this,a.addClass("wait"),s(".jqueryFileTree.start").remove(),u={dir:t,onlyFolders:d.onlyFolders,onlyFiles:d.onlyFiles,multiSelect:d.multiSelect},o=function(e){var u;return a.find(".start").html(""),a.removeClass("wait").append(e),d.root===t?a.find("UL:hidden").show("undefined"!=typeof callback&&null!==callback):(void 0===jQuery.easing[d.expandEasing]&&(console.log("Easing library not loaded. Include jQueryUI or 3rd party lib."),d.expandEasing="swing"),a.find("UL:hidden").slideDown({duration:d.expandSpeed,easing:d.expandEasing,start:function(){return n._trigger("filetreeexpand",n.data)},complete:i})),u=s('[rel="'+decodeURIComponent(t)+'"]').parent(),d.multiSelect&&u.children("input").is(":checked")&&u.find("ul li input").each(function(){return s(this).prop("checked",!0),s(this).parent().addClass("selected")}),!1},r=function(){return a.find(".start").html(""),a.removeClass("wait").append("<p>"+d.errorMessage+"</p>"),!1},"function"==typeof d.script?"string"==typeof(h=d.script(u))||h instanceof jQuery?o(h):r():s.ajax({url:d.script,type:"POST",dataType:"HTML",data:u}).done(function(s){return o(s)}).fail(function(){return r()})},e.prototype._trigger=function(s,e){return this.jqft.container.triggerHandler(s,e)},e}(),s.fn.extend({fileTree:function(e,t){return this.each(function(){var a,n;if((n=(a=s(this)).data("fileTree"))||a.data("fileTree",n=new i(this,e,t)),"string"==typeof e)return n[option].apply(n)})}})}(window.jQuery,window)},function(s,e,t){"use strict";t(7),t(6),t(5),t(4),t(3)}]);
//# sourceMappingURL=admin.min.js.map